/*!
 * Copyright (c) 2024 Oracle and/or its affiliates.
 * All rights reserved. Oracle Digital Assistant Client Web SDK, Release: 24.6.0
 */
!function(t,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("WebSDK",[],factory):"object"==typeof exports?exports.WebSDK=factory():t.WebSDK=factory();t.WebSDK=factory()}(self,(function(){return function(){"use strict";var t={396:function(t,e,i){i.r(e),i.d(e,{ActionDisplayType:function(){return o},ActionStyle:function(){return s},ActionType:function(){return p},AttachmentType:function(){return a},BaseChatConnection:function(){return vt},ClientActionType:function(){return u},ConnectionEvent:function(){return gt},ConnectionState:function(){return ct},ContextSource:function(){return c},CoreApiError:function(){return ft},CoreError:function(){return bt},CoreEvent:function(){return mt},DisplayType:function(){return n},ExecuteActionType:function(){return h},MessageType:function(){return l},ReadOnlyDisplayType:function(){return r},RecognitionError:function(){return dt},RecognitionLocale:function(){return ht},SenderType:function(){return b},SkillMessageSource:function(){return v},SpeechSynthesisServiceEvent:function(){return pt},StateType:function(){return d},TokenType:function(){return g},buildPostbackMessage:function(){return P},buildUserAttachmentMessage:function(){return E},buildUserMessage:function(){return j},buildUserTextMessage:function(){return L},getCurrentPosition:function(){return Ct},getError:function(){return yt},getRejectPromiseError:function(){return kt},getUtteranceText:function(){return N},isEditFormPayloadWithFields:function(){return S},isEditFormPayloadWithRows:function(){return C},isEventPayload:function(){return _},isFormEntityWithFields:function(){return z},isFormEntityWithRows:function(){return M},isMessage:function(){return x},isMessagePayload:function(){return y},isPing:function(){return A},isPong:function(){return O},isPostbackPayload:function(){return k},isReadOnlyField:function(){return nt},isSuggestionMessage:function(){return $},isSuggestionPayload:function(){return T},isValidLocale:function(){return ut},isValidLocation:function(){return Lt},isValidMessage:function(){return X},isValidProfileMessage:function(){return tt},pingMessage:function(){return m},pongMessage:function(){return f},requestOn:function(){return xt},setRequestHeader:function(){return wt}});const s={Primary:"primary",Danger:"danger",Default:"default"},o={Button:"button",Icon:"icon",Link:"link"},r={Text:"text",Link:"link",Action:"action",Media:"media"},n=Object.assign(Object.assign({},r),{SingleSelect:"singleSelect",MultiSelect:"multiSelect",DatePicker:"datePicker",TimePicker:"timePicker",Toggle:"toggle",TextInput:"textInput",NumberInput:"numberInput"}),a={Image:"image",Video:"video",Audio:"audio",File:"file"},c={ChatWindow:"chatWindow",CompactChat:"compactChat",UIWidget:"UIWidget",Skill:"skill"},h={NAVIGATE:"navigate",QUERY:"query",UPDATE_FIELDS:"updateFields",CUSTOM:"custom"},l={Attachment:"attachment",Card:"card",Location:"location",Postback:"postback",Raw:"raw",Suggest:"suggest",Text:"text",CloseSession:"closeSession",SessionClosed:"sessionClosed",Table:"table",Form:"form",TableForm:"tableForm",Status:"status",EditForm:"editForm",FormSubmission:"formSubmission",InboundEvent:"inboundEvent",OutboundEvent:"outboundEvent",TextStream:"textStream",Command:"command",Error:"error",UpdateApplicationContextCommand:"updateApplicationContextCommand",ExecuteApplicationActionCommand:"executeApplicationActionCommand",GetDebugInfoCommand:"getDebugInfoCommand"},u=Object.assign(Object.assign({},h),{COPY_MESSAGE_TEXT:"copyMessageText"}),p={Call:"call",Client:"client",Location:"location",Popup:"popup",Postback:"postback",Share:"share",SubmitForm:"submitForm",Url:"url",Webview:"webview"},d={Auth:"auth",Ping:"ping",Pong:"pong",Token:"token"},g={JWT:"jwt"},m={state:{type:d.Ping}},f={state:{type:d.Pong}},b={Skill:"bot",User:"user"},v={Agent:"AGENT",Bot:"BOT"};var w=i(476);const x=t=>(0,w.isObject)(t)&&"messagePayload"in t,y=t=>(0,w.isObject)(t)&&"type"in t,k=t=>y(t)&&t.type===l.Postback,_=t=>y(t)&&(t.type===l.InboundEvent||t.type===l.OutboundEvent),z=t=>void 0!==t.fields,M=t=>void 0!==t.formRows,S=t=>void 0!==t.fields,C=t=>void 0!==t.formRows,T=t=>y(t)&&t.type===l.Suggest,$=t=>x(t)&&T(t.messagePayload),I=t=>(0,w.isObject)(t)&&"state"in t,A=t=>I(t)&&t.state.type===d.Ping,O=t=>I(t)&&t.state.type===d.Pong;function E(t,e,i){const s=function(t){const e=t.split("/")[0].toLowerCase();switch(e){case a.Audio:case a.Image:case a.Video:return e;default:return a.File}}(t);return{messagePayload:{type:l.Attachment,attachment:{type:s,url:e,title:i}}}}function L(t,e){const i={messagePayload:{text:t,type:l.Text}};return e&&(i.sdkMetadata?i.sdkMetadata.speechId=e:i.sdkMetadata={speechId:e}),i}function P(t){var e;let i;i="label"in t?t.label:null!==(e=t.text)&&void 0!==e?e:V;return{messagePayload:{text:i,postback:t.postback,type:l.Postback}}}function j(t){return{messagePayload:t}}const F="; ",V="",H=/<[^>]+>/g,D=/&#(\d+);/g,R=/&#[xX]([\da-fA-F]+);/g;function N(t,e){const i=t.messagePayload;let s=V;if(i.voice)return J(function(t){var e;const i=[null===(e=t.voice)||void 0===e?void 0:e.text];switch(t.type){case l.Card:i.push(function(t){if(!(null==t?void 0:t.length))return V;return t.filter((t=>t.voice)).map((t=>{var e;const i=[];return t.voice&&i.push(null===(e=t.voice)||void 0===e?void 0:e.text),i.push(Y(t.actions)),i.filter(Boolean).join(F)})).filter(Boolean).join(F)}(t.cards));break;case l.Form:case l.TableForm:i.push(function(t){if(!(null==t?void 0:t.length))return V;return t.filter(Boolean).map((t=>t.voice&&t.voice.text)).filter(Boolean).join(F)}(t.forms))}return i.push(Y(t.actions)),i.push(Y(t.globalActions)),i.filter(Boolean).join(F)}(t.messagePayload));switch(i.type){case l.Attachment:s=function(t,e){return e[`${t.type}_${t.attachment.type}`]}(i,e);break;case l.Card:s=function(t,e){const i=t.cards;let s=V;if(null==i?void 0:i.length){const t=e.card,o=t?t.indexOf("{0}")>=0?t:`${t} {0}`:V,r=i.length>1;s=i.filter((t=>t.title)).map(((t,e)=>{const i=[r?o.replace("{0}",`${e+1}`):V];return t.voice?i.push(t.voice.text):(i.push(t.title),i.push(t.description)),i.push(U(t.actions)),i.filter(Boolean).join(F)})).filter(Boolean).join(F)}return s}(i,e);break;case l.Location:s=function(t){const e=t.location;return`${e.title?`${e.title}${F}`:V}${e.latitude},${e.longitude}`}(i);break;case l.Text:case l.TextStream:s=i.text;break;case l.Table:s=function(t,e){return B(t.paginationInfo)+t.rows.filter((t=>{var e;return null===(e=null==t?void 0:t.fields)||void 0===e?void 0:e.length})).map(((t,i)=>Z(t,i,e))).filter(Boolean).join(F)}(i,e);break;case l.Form:s=function(t,e){return B(t.paginationInfo)+t.forms.filter((t=>t)).map(((t,i)=>{const s=(t.title?`${t.title}: `:V)+W(t,e);return s?`${(e.itemIterator||V).replace("{0}",`${i+1}`)}: ${s}`:V})).filter(Boolean).join(F)}(i,e);break;case l.TableForm:s=function(t,e){return B(t.paginationInfo)+t.rows.filter((t=>{var e;return null===(e=null==t?void 0:t.fields)||void 0===e?void 0:e.length})).map(((i,s)=>Z(i,s,e)+F+W(t.forms[s],e))).filter(Boolean).join(F)}(i,e);break;case l.EditForm:s=function(t){var e,i;return null!==(i=null!==(e=t.errorMessage)&&void 0!==e?e:t.title)&&void 0!==i?i:V}(i)}return(0,w.pipe)(function(t,e){if(t.type===l.EditForm&&t.errorMessage)return e;const i=[];return i.push(t.headerText),i.push(e),i.push(U(t.actions)),i.push(t.footerText),i.push(U(t.globalActions)),i.filter(Boolean).join(F)}(i,s),J,K,q)}function U(t){return t?t.filter((t=>t.type!==p.SubmitForm)).map((t=>t.voice?t.voice.text:t.label||V)).filter(Boolean).join(F):V}function B(t){if(t&&t.totalCount>t.rangeSize){const e=t.status;return e?e+F:V}return V}function W(t,e){let i=U(t.actions);return i&&(i=F+i),z(t)?G(t.fields,e)+i:t.formRows.filter((t=>null==t?void 0:t.columns.length)).map((t=>t.columns.filter((t=>null==t?void 0:t.fields.length)).map((t=>G(t.fields,e))).filter(Boolean).join(F))).filter(Boolean).join(F)+i}function Z(t,e,i){return`${(i.itemIterator||V).replace("{0}",`${e+1}`)}: ${G(t.fields,i)}`}function G(t,e){return(null==t?void 0:t.length)?t.filter((t=>t)).map((t=>function(t,e){var i;const s=null!==(i=t.label)&&void 0!==i?i:V,o=s?`${s}: `:V;switch(t.displayType){case r.Text:return o+(t.value||V);case r.Link:return o+(e.linkField||V).replace("{0}",s);case r.Action:const i=t.action;return o+(i.voice?i.voice.text:i.label)||V;default:return s}}(t,e))).filter(Boolean).join(F):V}function q(t){if(null==t?void 0:t.length){const e=t.replace((0,w.resetRegex)(D),((t,e)=>String.fromCharCode(e))).replace((0,w.resetRegex)(R),((t,e)=>{const i=Number.parseInt(`0x${e}`,16);return String.fromCharCode(i)}));return(0,w.removeDisplayNoneAndDecode)(e).replace((0,w.resetRegex)(H),V)}return V}function Y(t){return(null==t?void 0:t.length)?t.filter((t=>t.type!==p.SubmitForm)).map((t=>t.voice&&t.voice.text)).filter(Boolean).join(F):V}const J=t=>t.replaceAll(/([-.,?:;!]);/g,"$1"),K=t=>t.replaceAll(/\r|\n|<br\/?>/gim,F);function X(t){const e=!1;if(!x(t))return e;const i=t.messagePayload;return y(i)?i.actions&&!Q(i.actions)||i.globalActions&&!Q(i.globalActions)?e:function(t){switch(t.type){case l.Attachment:return function(t){const e=t.attachment;return!(!(null==e?void 0:e.type)||!e.url)}(t);case l.Card:return function(t){let e=!1;if(t.layout&&t.cards.length){e=!0;for(const e of t.cards){if(!e.title)return!1;if(e.actions&&!Q(e.actions))return!1}}return e}(t);case l.CloseSession:case l.SessionClosed:return!0;case l.Location:return function(t){const e=t.location;return!(!(null==e?void 0:e.latitude)||!e.longitude)}(t);case l.Postback:return function(t){return!!t.postback}(t);case l.Text:return function(t){return!!t.text}(t);case l.TextStream:return function(t){return"string"==typeof t.text&&!!t.streamState}(t);case l.Table:return et(t);case l.Form:return it(t);case l.TableForm:return function(t){return et(t)&&it(t)}(t);case l.EditForm:return function(t){const e=t.fields,i=t.formColumns,s=t.formRows;return(null==e?void 0:e.length)>0&&e.every((t=>function(t){const e=t.displayType,i=t;return e&&Object.values(n).includes(e)&&(function(t){const e=t.id;let i=!1;switch(t.displayType){case n.SingleSelect:case n.MultiSelect:i=function(t){const e=t.layoutStyle,i=t.options;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==i&&i.length>0&&i.every((t=>function(t){const e=t.label,i=t.value;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==i}(t)))}(t);break;case n.Toggle:i=function(t){const e=t.valueOn,i=t.valueOff;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==i&&"string"==typeof i&&i.length>0}(t);break;case n.DatePicker:case n.TimePicker:case n.TextInput:case n.NumberInput:i=!0}return i&&void 0!==e&&e.length>0}(i)||ot(t))}(t)))&&"number"==typeof i&&i>0||(null==s?void 0:s.length)>0}(t);case l.FormSubmission:return function(t){return!!t.submittedFields}(t);case l.InboundEvent:case l.OutboundEvent:return function(t){return!!t.eventType&&!!t.eventVersion&&!!t.eventData}(t);case l.Status:return function(t){return t.type===l.Status&&"status"in t}(t);case l.Command:return function(t){return t.type===l.Command&&"command"in t}(t);case l.UpdateApplicationContextCommand:return function(t){const{context:e,source:i}=t;return void 0!==e&&"string"==typeof e&&at.includes(i)}(t);case l.GetDebugInfoCommand:return function(t){return void 0!==t.infoTypes&&t.infoTypes.length>0}(t)}return!1}(i):e}function Q(t){for(const e of t)if(!e.type||!(e.label&&"string"==typeof e.label||e.imageUrl&&"string"==typeof e.imageUrl))return!1;return!0}function tt(t){return(0,w.isObject)(t)&&(0,w.isObject)(t.profile)}function et(t){const e=t.headings,i=t.rows;return e&&e.length>0&&i&&i.length>0&&e.every((t=>function(t){const e=t.label;return void 0!==e&&e.length>0}(t)))&&i.every((t=>st(t)))}function it(t){const e=t.forms;return e&&e.length>0&&e.every((t=>z(t)&&st(t)||M(t)))}function st(t){const e=t.fields;return e&&e.length>0&&e.every((t=>ot(t)))}function ot(t){return!!t.displayType&&nt(t)}const rt=Object.values(r);function nt(t){return t&&rt.includes(t.displayType)}const at=Object.values(c);const ct={Connecting:0,Open:1,Closing:2,Closed:3},ht={DE_DE:"de-de",EN_AU:"en-au",EN_GB:"en-gb",EN_IN:"en-in",EN_US:"en-us",ES_ES:"es-es",FR_FR:"fr-fr",HI_IN:"hi-in",IT_IT:"it-it",PT_BR:"pt-br"},lt=Object.keys(ht).map((t=>ht[t]));function ut(t){return lt.indexOf(t)>=0}const pt={TTSStart:"tts:start",TTSStop:"tts:stop"},dt={RecognitionNotAvailable:"RecognitionNotAvailable",RecognitionNotReady:"RecognitionNotReady",RecognitionNoAPI:"RecognitionNoAPI",RecognitionProcessingFailure:"RecognitionProcessingFailure",RecognitionTooMuchSpeechTimeout:"RecognitionTooMuchSpeechTimeout",RecognitionNoSpeechTimeout:"RecognitionNoSpeechTimeout",RecognitionMultipleConnection:"RecognitionMultipleConnection"},gt={Open:"open",Close:"close",Error:"error",Message:"message",MessageReceived:"message:received",MessageSent:"message:sent",State:"state"},mt=Object.assign(Object.assign(Object.assign({},pt),gt),h),ft={ConnectionNone:"ConnectionNone",ConnectionExplicitClose:"ConnectionExplicitClose",MessageInvalid:"MessageInvalid",NetworkFailure:"NetworkFailure",NetworkOffline:"NetworkOffline",ProfileInvalid:"ProfileInvalid",TtsNotAvailable:"TtsNotAvailable",TTSNoWebAPI:"TTSNoWebAPI",SuggestionsEmptyRequest:"SuggestionsEmptyRequest",SuggestionsInvalidRequest:"SuggestionsInvalidRequest",SuggestionsTimeout:"SuggestionsTimeout",UploadBadFile:"UploadBadFile",UploadMaxSize:"UploadMaxSize",UploadNetworkFail:"UploadNetworkFail",UploadNotAvailable:"UploadNotAvailable",UploadUnauthorized:"UploadUnauthorized",UploadZeroSize:"UploadZeroSize",LocationNoAPI:"LocationNoAPI",LocationNotAvailable:"LocationNotAvailable",LocationTimeout:"LocationTimeout",LocationInvalid:"LocationInvalid"},bt=Object.assign(Object.assign(Object.assign({},ft),w.AuthError),dt);class vt{constructor(t){this.dispatcher=t,this.state=ct.Closed}getState(){return this.state}isOpen(){return this.state===ct.Open}isClosed(){return this.state===ct.Closed}on(t,e){this.dispatcher.bind(t,e)}off(t,e){this.dispatcher.unbind(t,e)}setState(t){this.state=t,this.dispatcher.trigger(mt.State,t)}}function wt(t,e,i){t.setRequestHeader(e,i)}function xt(t,e,i){t.addEventListener(e,i)}function yt(t){return Error(t)}function kt(t){return Promise.reject(yt(t))}const _t=navigator,zt=null==_t?void 0:_t.geolocation,Mt=1e5,St=t=>Math.round(t*Mt)/Mt;function Ct(){return zt?new Promise(((t,e)=>{zt.getCurrentPosition((e=>{const i=e.coords,s=Object.assign(Object.assign({},i),{latitude:St(i.latitude),longitude:St(i.longitude)});t(s)}),(t=>{let i;switch(t.code){case t.POSITION_UNAVAILABLE:i=bt.LocationNotAvailable;break;case t.TIMEOUT:i=bt.LocationTimeout;break;case t.PERMISSION_DENIED:default:i=bt.LocationNoAPI}e(yt(i))}),{enableHighAccuracy:!0,timeout:5e3})})):kt(bt.LocationNoAPI)}function Tt(t){return"number"==typeof t}function $t(t,e,i){return t>=e&&t<=i}const It=-90,At=90,Ot=-180,Et=180;function Lt(t){const{latitude:e,longitude:i}=t;return Tt(e)&&Tt(i)&&$t(e,It,At)&&$t(i,Ot,Et)}},921:function(t,e,i){i.r(e),i.d(e,{ActionType:function(){return o.ActionType},AttachmentType:function(){return o.AttachmentType},ConnectionState:function(){return o.ConnectionState},CoreError:function(){return o.CoreError},CoreEvent:function(){return o.CoreEvent},CoreTTS:function(){return St},DisplayType:function(){return o.DisplayType},FILE_TYPES:function(){return Mt},MAX_MB:function(){return wt},MessageType:function(){return o.MessageType},RecognitionLocale:function(){return o.RecognitionLocale},SenderType:function(){return o.SenderType},SkillMessageSource:function(){return o.SkillMessageSource},SpeechSynthesisServiceEvent:function(){return o.SpeechSynthesisServiceEvent},WebCore:function(){return Tt},buildPostbackMessage:function(){return o.buildPostbackMessage},buildUserAttachmentMessage:function(){return o.buildUserAttachmentMessage},buildUserMessage:function(){return o.buildUserMessage},buildUserTextMessage:function(){return o.buildUserTextMessage},getCurrentPosition:function(){return o.getCurrentPosition},getError:function(){return o.getError},getRejectPromiseError:function(){return o.getRejectPromiseError},getUtteranceText:function(){return o.getUtteranceText},isEditFormPayloadWithFields:function(){return o.isEditFormPayloadWithFields},isEditFormPayloadWithRows:function(){return o.isEditFormPayloadWithRows},isFormEntityWithFields:function(){return o.isFormEntityWithFields},isFormEntityWithRows:function(){return o.isFormEntityWithRows},isMessagePayload:function(){return o.isMessagePayload},isPostbackPayload:function(){return o.isPostbackPayload},isValidLocale:function(){return o.isValidLocale},isValidLocation:function(){return o.isValidLocation},isValidMessage:function(){return o.isValidMessage},isValidProfileMessage:function(){return o.isValidProfileMessage}});var s=i(476),o=i(396);let r=1,n=1,a=1;const c=window,h=c.addEventListener,l=c.speechSynthesis,u=c.SpeechSynthesisUtterance,p=c.navigator,d=clearTimeout;class g{constructor(){if(this.t=!1,this.i=(0,s.generateEventDispatcher)(),!c||!l||!u)throw Error("TTSNoWebAPI");w().then((t=>{this.l=t})),h("beforeunload",(t=>{l.cancel(),d(this.u),delete t.returnValue})),h("click",(()=>{l&&(l.cancel(),l.resume(),l.speak(new u(" ")))}),{once:!0})}speak(t){if(this.l){const e=new u(t);e.voice=this.l,e.pitch=r,e.rate=n,e.volume=a,l.paused&&l.resume(),this.t||(this.t=!0,this.i.trigger(o.SpeechSynthesisServiceEvent.TTSStart)),l.speak(e),this.l.localService||(d(this.u),y((t=>this.u=t)))}}cancel(){l.speaking&&(l.cancel(),d(this.u))}getVoices(){return m()}setVoice(t){return function(t){const e=t.map((t=>Object.assign({lang:"",name:""},t)));return m().then((t=>{for(const i of e)for(const e of t)if(k(i.lang,e.lang)&&k(i.name,e.name))return e;for(const i of e)for(const e of t)if(k(i.lang,e.lang))return e;for(const i of e)for(const e of t)if(e.lang.indexOf(i.lang)>=0)return e;return w()}))}(t).then((t=>{this.l=t,r=t.pitch||1,n=t.rate||1,a=t.volume||1}))}getVoice(){return this.l}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}}function m(){return new Promise((t=>{f(t),l.addEventListener("voiceschanged",(()=>{f(t)}))}))}function f(t){const e=l.getVoices();if(e.length){t(function(t){if(!Array.isArray(t))return t.p;return t}(v(e)))}}const b=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox"],v=t=>t.filter((t=>b.indexOf(t.name)<0));function w(){return m().then((t=>{let e;const i=t.filter((t=>t.default));if(1===i.length&&(e=i[0]),!e){const i=p&&p.language;i&&(e=t.find((t=>k(t.lang,i))))}if(!e){const i=p&&p.language.substring(0,2);i&&(e=t.find((t=>_(t.lang).indexOf(i)>=0)))}return e||(e=t[0]),e}))}const x=1e4;function y(t){const e=c.setTimeout((()=>{l.speaking&&(l.pause(),l.resume(),y(t))}),x);t(e)}function k(t,e){return _(t)===_(e)}const _=t=>t.toLowerCase(),z={DEFAULT:0,VOICE_RECOGNITION:6},M=window.audioinput;function S(){return M}function C(t){return new Promise(((t,e)=>{const i=S();i.checkMicrophonePermission((s=>{s?t():i.getMicrophonePermission(((i,s)=>{i?t():e(s)}))}))})).then((()=>{const e=S();return e.start(t),e}))}function T(){return new Promise((t=>{const e=S();e.isCapturing()?(e.stop(t),e.disconnect()):t()}))}let $=window.AudioContext;const I=window.navigator;let A=I.mediaDevices;const O=I.webkitGetUserMedia,E=I.mozGetUserMedia,L=!!(A&&A.getUserMedia||O||E);var P=function(t,e,i,s){return new(i||(i=Promise))((function(o,r){function n(t){try{c(s.next(t))}catch(t){r(t)}}function a(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}c((s=s.apply(t,e||[])).next())}))};const j=4096,F=48e3;let V,H=!0;class D{static getInstance(){return this.v||(this.v=new D),this.v}constructor(){this.k=[],this._=!1,$=$||window.webkitAudioContext,L&&(void 0===A&&(A={}),void 0===A.getUserMedia&&(A.getUserMedia=t=>{const e=O||E;if(!e){const t=Error("getUserMedia is not implemented in this browser");return t.name="TypeError",Promise.reject(t)}return new Promise(((i,s)=>{e.call(navigator,t,i,s)}))}))}startRecognition(t){var e,i;return this.C=new s.Deferred,t&&(this.T=t.onRecognitionText,this.$=t.onAnalyserReady,this.I=t.onVisualData,this.O=t.onSpeechNetworkChange),(null===(e=this.L)||void 0===e?void 0:e.readyState)===o.ConnectionState.Closing||(null===(i=this.L)||void 0===i?void 0:i.readyState)===o.ConnectionState.Connecting?Promise.reject(new Error(o.RecognitionError.RecognitionMultipleConnection)):(this._?this.C.resolve():this.P?this.j():this.F().then((()=>this.j())),this.C.promise)}stopRecognition(){return this.V=new s.Deferred,this._?this.R():this.V.resolve(),this.V.promise}setConfig(t){return t.recognitionLocale||(t.recognitionLocale=o.RecognitionLocale.EN_US),t.tokenGenerator&&(this.N=s.AuthTokenService.getInstance()),this.U=t,this.F()}setLocale(t){(0,o.isValidLocale)(t)&&this.U&&(this.U.recognitionLocale=t,this.F())}B(t){var e;null===(e=this.O)||void 0===e||e.call(this,t)}F(){return(t=this.U,e=this.N,new Promise(((i,s)=>{t.tokenGenerator?e.get().then((e=>{t.channelId=e.getClaim("channelId"),t.userId=e.getClaim("userId"),U(t,i,s)})).catch((t=>s(t))):U(t,i,s)}))).then((t=>{this.P=t}));var t,e}j(){return new Promise(((t,e)=>{L?function(t,e){navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{const i=new AudioContext;t({context:i,stream:i.createMediaStreamSource(e)})})).catch((()=>{e(Error(o.RecognitionError.RecognitionNoAPI))}))}(t,e):void 0!==S()?function(t,e){T().then((()=>C({audioSourceType:z.VOICE_RECOGNITION,bufferSize:j,streamToWebAudio:!0}).then((e=>{t({context:S().getAudioContext(),stream:e})})))).catch((()=>{e(Error(o.RecognitionError.RecognitionNoAPI))}))}(t,e):e(Error(o.RecognitionError.RecognitionNoAPI))})).then((t=>{let e;this.k=[],V=new Float32Array(0),this.L=this.W(this.P),function(t,e,i){return P(this,void 0,void 0,(function*(){const s=t.createAnalyser();s.smoothingTimeConstant=.8,s.fftSize=256;const o=`class RecorderProcessor extends AudioWorkletProcessor {\n        buffersize = ${j};\n\n        // Track the current buffer fill level\n        _bytesWritten = 0;\n\n        // Create  a buffer of fixed size\n        _buffer = new Float32Array(this.buffersize);\n\n        constructor() {\n            super();\n            this.initBuffer();\n        }\n\n        initBuffer() {\n            this._bytesWritten = 0;\n        }\n\n        isBufferEmpty() {\n            return this._bytesWritten === 0;\n        }\n\n        isBufferFull() {\n            return this._bytesWritten === this.buffersize;\n        }\n\n        flush() {\n            // trim the buffer if ended prematurely\n            this.port.postMessage(\n                this._bytesWritten < this.buffersize\n                    ? this._buffer.slice(0, this._bytesWritten)\n                    : this._buffer\n            );\n            this.initBuffer();\n        }\n\n        process(inputs) {\n            this.append(inputs[0][0]);\n            return true;\n        }\n\n        append(channelData) {\n            if (this.isBufferFull()) {\n                this.flush();\n            }\n\n            if (!channelData) return;\n\n            for (let i = 0; i < channelData.length; i++) {\n                this._buffer[this._bytesWritten++] = channelData[i];\n            }\n        }\n    }\n\n    registerProcessor('recorder.worklet', RecorderProcessor);`,r=URL.createObjectURL(new Blob([o],{type:"application/javascript"}));yield t.audioWorklet.addModule(r);const n=new AudioWorkletNode(t,"recorder.worklet");return URL.revokeObjectURL(r),e.connect(s),s.connect(n),n.connect(t.destination),n.port.onmessage=i,{analyser:s,processor:n}}))}(t.context,t.stream,this.G.bind(this)).then((i=>{e=i,this.$&&this.$(e.analyser),this.q=t.context,this.Y=t.stream,this.J=e.analyser,this.K=e.processor}))})).catch((t=>{this.C&&this.C.reject(t)}))}W(t){try{const e=new WebSocket(t);return e.onopen=this.X.bind(this),e.onclose=this.tt.bind(this),e.onmessage=this.et.bind(this),e.onerror=this.st.bind(this),e}catch(t){throw Error(o.RecognitionError.RecognitionNotReady)}}X(){this.U.tokenGenerator?this.N.get().then((t=>{this.L.send(`Bearer ${t.token}`),this.B(o.ConnectionState.Open),this.ot()})):(this.B(o.ConnectionState.Open),this.ot())}tt(){this._&&this.R(),this.V&&(this.V.resolve(),this.V=void 0),this.B(o.ConnectionState.Closed)}et(t){try{const e=JSON.parse(t.data);if(!e.event&&e.code)throw t;const i=function(t){let e,i;const s=t.requestId,r=t.nbest;"partialResult"===t.event?(e="partial",i=r[0].utterance):r&&r.length?(e="final",i=r[0].utterance):(e="error",i=t.resultCode?o.RecognitionError.RecognitionTooMuchSpeechTimeout:o.RecognitionError.RecognitionNoSpeechTimeout);return{requestId:s,type:e,text:i,message:t}}(e);"finalResult"===e.event&&this.stopRecognition(),this.T&&this.T(i)}catch(t){this.rt(o.RecognitionError.RecognitionProcessingFailure),this.stopRecognition()}}st(){this.L.readyState===o.ConnectionState.Open&&(this.rt(o.RecognitionError.RecognitionProcessingFailure),this.L.close())}rt(t){this.T&&this.T({requestId:"",text:t,type:"error"})}G(t){var e;this.C&&(this._=!0,this.C.resolve(),this.C=void 0);const i=t.data,s=(null===(e=this.q)||void 0===e?void 0:e.sampleRate)||F;try{const t=function(t,e,i){if(i===e)return t;if(i>e)throw Error();let s=[];if(e===F)s=B;else{if(44100!==e)throw Error();s=W}const o=e/i;let r,n,a;H?(r=Math.floor(t.length%o),n=t.length-r,a=0===r?Array.from(t):t.slice(0,n)):(r=Math.floor((t.length+V.length-s.length)%o),n=t.length+V.length-s.length-r,a=new Float32Array(V.length+n),a.set(V),a.set(t.slice(0,n),V.length));const c=Math.floor(n/o),h=new Int16Array(c),l=-1,u=32767;if(e===F)for(let t=s.length;t<a.length;t+=o){let e=0;for(let i=0;i<s.length;i++)e+=a[t-i]*s[i];const i=Math.max(Math.min(e,1),l)*u;h[(t-s.length)/o]=i}else{const t=[];for(let e=s.length;e<a.length;e++){let i=0;for(let t=0;t<s.length;t++)i+=a[e-t]*s[t];t[e-s.length]=i}for(let e=0;e<c;e++){const i=3,s=e*o,r=Math.floor(s)-i+1,n=Math.floor(s)+i;let a=0;for(let e=r;e<=n;e++){a+=(e<0?t[0]:e>=t.length?t[t.length-1]:t[e])*Z(i,s-e)}h[e]=Math.max(Math.min(a,1),l)*u}}V=H?t.slice(n-s.length-V.length):t.slice(n-s.length-(V.length-s.length));return H=!1,h.buffer}(i,s,16e3);this.I&&this.nt(this.J),this.ct(t)}catch(t){this.rt(o.RecognitionError.RecognitionProcessingFailure),this.stopRecognition()}}nt(t){if(t){const e=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(e),this.I&&this.I(e)}}ct(t){this.L.readyState!==o.ConnectionState.Open||this.k.length?this.k.push(t):this.L.send(t)}ot(){if(this.L.readyState===o.ConnectionState.Open)for(;this.k.length;){const t=this.k.shift();t&&this.L.send(t)}}R(){var t,e,i;(this._=!1,this.L)&&(this.L.readyState===o.ConnectionState.Open&&(this.L.send("Done"),this.L.close()),this.K&&this.K.disconnect(),this.J&&this.J.disconnect(),S()?T():(i=this.Y)&&i.mediaStream&&i.mediaStream.getAudioTracks().forEach((t=>{t.stop()})),null===(t=this.Y)||void 0===t||t.disconnect(),null===(e=this.q)||void 0===e||e.suspend(),this.K=void 0,this.J=void 0,this.Y=void 0,this.k=[],H=!0,V=new Float32Array(0))}}const R="/voice/stream/recognize",N="generic";function U(t,e,i){t.channelId&&t.userId||i(Error(o.RecognitionError.RecognitionNotReady)),e(function(t){const e=`ws${t.isTLS?"s":""}://`,i=`${R}/${t.recognitionLocale}/${N}`,o={channelId:t.channelId||"",encoding:"audio/raw",userId:t.userId||""};t.tokenGenerator&&(o.jwtInBody="true");return(0,s.buildURL)(e,t.URI,o,i)}(t))}const B=[-25033838264794034e-21,-3645156113737857e-20,-11489993827892933e-21,393243788874656e-19,6998419352067277e-20,37556691270439976e-21,-476966455345305e-19,-.00011379935461751734,-8400957697117619e-20,4208817777607469e-20,.00016391587447478332,.00015508372993570357,-1253765788919669e-20,-.00021258262011091092,-.0002524059896175195,-51874329668708116e-21,.0002479230009768214,.00037351534477673157,.00016157590781788105,-.0002541085239198603,-.000510486865332593,-.0003246104617540939,.00021219136947965464,.0006488877825604561,.0005444416935293036,-.0001016639071691704,-.0007673001147209819,-.0008176720912938691,-972696982411551e-19,.0008376185852528038,.0011319450250252222,.0004008193339799052,-.0008262743020160207,-.0014643282305934196,-.0008183365045047033,.0006964471772153777,.001780467922489105,.0013489288090360295,-.00041122152287042,-.0020347535966250413,-.0019782994815083733,-6247794246099269e-20,.002171643809964705,.0026761621389245617,.00074944268608935,-.00212817775887288,-.003394541347147186,-.0016615884301227524,.001837545335885159,.004067170702246546,.0027936171643976352,-.001233420727213658,-.004610035314537476,-.004119319153202972,.00025459137646049936,.00492286494534436,.005588805700369816,.001150762425755883,-.004891042781491068,-.0071267634777626675,-.003021979039818941,.00438688631315642,.008631467181982988,.005385139236634672,-.003268406079325266,-.009973661255235284,-.008256256502745316,.0013719935383757782,.010993210336541666,.011651337116264694,.0015082475865128093,-.01148872195209017,-.015609515327517686,-.005671504441670989,.011188303272599716,.02024519058502148,.011637590928971467,-.009667754909210324,-.025878090076785515,-.020500381603699786,.006098908137700642,.033428666116203716,.03513487017573178,.001719739622764723,-.046085580848361105,-.06623078150315037,-.023349941728869696,.08292213207159124,.21069217442624302,.2973829711397418,.2973829711397419,.21069217442624305,.08292213207159124,-.023349941728869693,-.06623078150315037,-.046085580848361105,.0017197396227647225,.03513487017573178,.033428666116203716,.006098908137700641,-.020500381603699783,-.025878090076785508,-.009667754909210326,.011637590928971469,.020245190585021472,.011188303272599716,-.00567150444167099,-.015609515327517682,-.01148872195209017,.001508247586512809,.011651337116264699,.010993210336541666,.0013719935383757782,-.008256256502745314,-.009973661255235283,-.0032684060793252657,.00538513923663467,.008631467181982988,.004386886313156419,-.0030219790398189413,-.0071267634777626675,-.0048910427814910715,.0011507624257558842,.005588805700369813,.00492286494534436,.00025459137646049936,-.004119319153202973,-.004610035314537475,-.0012334207272136583,.002793617164397636,.004067170702246546,.0018375453358851592,-.0016615884301227509,-.0033945413471471847,-.0021281777588728797,.0007494426860893505,.0026761621389245612,.0021716438099647056,-6247794246099253e-20,-.001978299481508373,-.0020347535966250404,-.00041122152287042,.0013489288090360292,.0017804679224891048,.0006964471772153777,-.0008183365045047026,-.00146432823059342,-.0008262743020160207,.0004008193339799063,.0011319450250252222,.0008376185852528037,-9726969824115494e-20,-.0008176720912938694,-.0007673001147209783,-.00010166390716916983,.0005444416935293033,.0006488877825604562,.0002121913694796546,-.00032461046175409424,-.000510486865332593,-.00025410852391986036,.0001615759078178811,.0003735153447767315,.00024792300097682137,-5187432966870808e-20,-.0002524059896175194,-.00021258262011091095,-1253765788919669e-20,.0001550837299357036,.0001639158744747833,42088177776074685e-21,-8400957697117623e-20,-.00011379935461751733,-4769664553453051e-20,3755669127044002e-20,699841935206728e-19,393243788874656e-19,-11489993827892933e-21,-3645156113737856e-20,-2503383826479402e-20],W=[-5044267067893139e-21,5738740247594612e-21,1611195555688156e-20,10560179594562795e-21,-1242816862904201e-20,-3084430704328611e-20,-18160396924882423e-21,2303124169528074e-20,5216612702894834e-20,2806026886746509e-20,-389608521587068e-19,-8174245278012476e-20,-4037543061985353e-20,619375276294956e-19,.00012143092661620545,55083199655424166e-21,-9401891583478883e-20,-.00017326981522755043,-7198069055926206e-20,.0001376274218691789,.00023946132645647525,9064030545698025e-20,-.00019557611633250834,-.0003223511502826996,-.00011036322783022617,.0002710935667931249,.00042440564349633953,.00013013140955365376,-.00036784896615780913,-.0005481886438481025,-.00014855826094166272,.0004899798946967381,.000696340560985472,.00016383778624615643,-.0006421263408051642,-.0008715631880363658,-.00017369118859371453,.000829476349448821,.0010766146787146871,.00017530890385814463,-.0010578310750603923,-.001314320458073489,-.0001652844648711556,.0013337004262191077,.0015876076783199174,.000139534308084411,-.0016644454627712116,-.001899573527380014,-9319422024995832e-20,.002058491185395933,.0022536018141979036,20477911370491685e-21,-.0025256449668619525,-.0026535487754524955,8552498376473957e-20,.0030775744811722015,.0031040297261921,-.00023314744969763122,-.003728529808331677,-.003610856230113392,.000432598472497653,.0044964472481822506,.004181705019767344,-.0006966685466235378,-.005404666489478738,-.00482715710731867,.0010418556659416306,.006484667519607787,.00556235368742558,-.0014902159613265254,-.007780573986407925,-.0064097301786953595,.002072517010858728,.009356870546119134,.0074037416266333166,-.00283386009764953,-.011312323822665827,-.008599512596140524,.003844300507349054,.013806774337071994,.01008985372973804,-.005220460312862638,-.01711716324115331,-.01204196749753927,.007174046245357611,.021768247992024713,.01478690833035584,-.010136389804721707,-.02888735624896028,-.019078400739739057,.015146805312378952,.041410446665863104,.027068163980255515,-.025512027260482153,-.07011218378743589,-.04829678433503421,.06041368701604651,.21199607414538668,.3213532652447261,.3213532652447261,.21199607414538668,.060413687016046526,-.04829678433503422,-.07011218378743589,-.025512027260482153,.027068163980255515,.041410446665863104,.015146805312378952,-.019078400739739057,-.02888735624896028,-.010136389804721703,.01478690833035584,.021768247992024713,.007174046245357611,-.01204196749753927,-.01711716324115331,-.005220460312862639,.010089853729738038,.013806774337071994,.0038443005073490553,-.008599512596140524,-.011312323822665827,-.0028338600976495314,.007403741626633317,.009356870546119134,.002072517010858727,-.006409730178695359,-.007780573986407925,-.001490215961326526,.005562353687425577,.006484667519607787,.0010418556659416256,-.004827157107318673,-.005404666489478739,-.0006966685466235378,.004181705019767345,.004496447248182251,.0004325984724976533,-.003610856230113392,-.003728529808331677,-.0002331474496976315,.0031040297261921003,.003077574481172201,8552498376473897e-20,-.002653548775452496,-.002525644966861952,2047791137049164e-20,.002253601814197904,.002058491185395933,-9319422024995909e-20,-.001899573527380014,-.0016644454627712118,.00013953430808441038,.0015876076783199174,.0013337004262191077,-.0001652844648711556,-.0013143204580734896,-.0010578310750603925,.00017530890385814333,.0010766146787146878,.0008294763494488195,-.00017369118859371463,-.00087156318803637,-.0006421263408051633,.00016383778624615698,.0006963405609854716,.0004899798946967381,-.00014855826094166245,-.0005481886438481027,-.00036784896615780924,.00013013140955365368,.00042440564349633964,.00027109356679312505,-.00011036322783022619,-.0003223511502826996,-.00019557611633250842,9064030545698017e-20,.00023946132645647525,.00013762742186917883,-7198069055926207e-20,-.0001732698152275505,-9401891583478886e-20,5508319965542416e-20,.00012143092661620549,6193752762949557e-20,-4037543061985352e-20,-8174245278012477e-20,-38960852158706805e-21,28060268867465078e-21,52166127028948336e-21,2303124169528077e-20,-18160396924882423e-21,-30844307043286126e-21,-12428168629042018e-21,10560179594562806e-21,1611195555688157e-20,5738740247594605e-21,-5044267067893138e-21];function Z(t,e){let i;if(0===e)i=1;else if(Math.abs(e)>=t)i=0;else{const s=Math.PI*e;i=t*Math.sin(s)*Math.sin(s/t)/Math.pow(s,2)}return i}const G="ended",q="suspended";const Y=(t,e)=>new Float32Array([...t,...J(e)]),J=t=>Float32Array.from(new Int16Array(t),(t=>t/32768)),K="speak",X="channelId",Q="userId",tt="https://",et=/<[\w]+/g,it=K;class st{constructor(t){this.ht="",this.lt=[],this.ut=!1,this.t=!1,this.dt=new AbortController,this.i=(0,s.generateEventDispatcher)(),this.U=t=>{this.gt=t,this.ht=`${t.URI}/tts/`,t.tokenGenerator&&(this.N=s.AuthTokenService.getInstance())},this.ft=t=>{let e=t;t.match(et)&&(e=`<${it}>${t}</${it}>`);const i=Object.assign({text:encodeURIComponent(e),stream:"chunked"},this.l&&{voice:this.l.name});return this.bt(K,i).then((t=>this.vt(t)))},this.bt=(t,e={})=>{const i=this.gt;if(i){if(i.tokenGenerator)return this.N.get().then((i=>(e[X]=i.getClaim(X),e[Q]=i.getClaim(Q),Promise.resolve((0,s.buildURL)(tt,this.ht,e,t)))));e[X]=i.channelId,e[Q]=i.userId}return Promise.resolve((0,s.buildURL)(tt,this.ht,e,t))},this.vt=(t,e=!0)=>new Promise(((i,s)=>{const o=this.gt,r=e?this.dt.signal:void 0;o&&o.tokenGenerator?this.N.get().then((e=>{fetch(t,{signal:r,headers:{Authorization:`Bearer ${e.token}`}}).then(i,s)})):fetch(t,{signal:r}).then(i,s)})),this.wt=t=>{if(t&&t.body){const e=t.body.getReader();this.xt(),this.t||(this.t=!0,this.i.trigger(o.SpeechSynthesisServiceEvent.TTSStart)),this.yt(e)}},this.yt=t=>{t.read().then((({done:e,value:i})=>{if(e)return void this.kt.next();let s=i.buffer;if(this.ut||(this.ut=!0,this._t.config(at(s)),s=nt(s)),void 0!==this.zt){const t=new Uint8Array(s),e=new Uint8Array(t.length+1);e[0]=this.zt,e.set(t,1),s=rt(e),this.zt=void 0}if(s.byteLength%2){const t=new Uint8Array(s),e=new Uint8Array(t.length-1);e.set(t.slice(0,t.length-1)),s=rt(e),this.zt=t[t.length-1]}this._t.play(s),this.yt(t)})).catch((()=>{this.kt.next()}))},this.xt=()=>{this.ut=!1,this.zt=void 0},this.Mt=()=>{this.t&&(this.t=!1,this.i.trigger(o.SpeechSynthesisServiceEvent.TTSStop))},this.U(t),this.kt=ot(this.wt,(()=>{})),this._t=function(t){let e,i,s,o=t,r=[],n=()=>{},a=0,c=!0;const h=()=>{e||(e=new AudioContext),e.state===q&&e.resume()},l=()=>{r.forEach((t=>{t.removeEventListener(G,d),t.stop(),t.disconnect()})),r=[]},u=()=>{(null==e?void 0:e.state)!==q&&(null==e||e.suspend()),s=new Float32Array,c=!0,a=0,r=[]},p=()=>{if(!e||!s.length)return;if(c&&s.length<4096)return void(c=!1);c=!1;const t=s.length,n=new AudioBuffer({sampleRate:o.sampleRate,length:t});for(let e=0;e<o.numChannels;e++){const i=n.getChannelData(e);for(let e=0;e<t;e++)i[e]=s[e]}a<e.currentTime&&(a=e.currentTime),i&&i.removeEventListener(G,d),i=new AudioBufferSourceNode(e,{buffer:n}),i.connect(e.destination),i.addEventListener(G,d),i.start(a),a+=n.duration,r.push(i),s=new Float32Array},d=()=>{a=0,setTimeout((()=>{a||(u(),n())}),250)};return(()=>{const t=document.body,i=["touchend","click"];let s=!0;const o=()=>{s&&(e=new AudioContext,"closed"!==e.state&&e.resume().then((()=>{r()})))},r=()=>{i.forEach((e=>{t.removeEventListener(e,o)})),s=!1};i.forEach((e=>{t.addEventListener(e,o)}))})(),{play:t=>{h(),s=s?Y(s,t):J(t),p()},stop:()=>{e&&(l(),u(),n())},config:t=>{o=Object.assign(Object.assign({},o),t)},onEnd:t=>{n=t}}}({sampleRate:22050,numChannels:1}),this._t.onEnd(this.Mt),this.getVoices().then((t=>{this.l=t.filter((t=>t.default))[0]})),window.addEventListener("beforeunload",(()=>{this.cancel()}))}speak(t){"string"==typeof t&&t.trim().length&&this.kt.push(this.ft(t))}cancel(){this.t&&(this.dt.abort(),this._t.stop(),this.kt.cancel(),this.dt=new AbortController)}getVoices(){let t=this.lt;if(t.length)return Promise.resolve(t);const e=()=>{this.St=void 0};return this.St||(this.St=this.bt("voices").then((t=>this.vt(t,!1))).then((t=>t.json())).then((i=>{const s=i.voices||[];return t=s.map((t=>({name:t.name,lang:ct(t.culture),default:!!t.default}))),setTimeout(e),this.lt=t,t})).catch((()=>(setTimeout(e),t)))),this.St}getVoice(){return this.l}setVoice(t){return t&&Array.isArray(t)&&t.length?this.l&&1===t.length&&!t[0].name&&ct(t[0].lang)===this.l.lang?Promise.resolve():this.getVoices().then((e=>{if(!e.length)return Promise.reject(Error("TTSNoVoices"));return t.find((t=>{let i,s=!1;if(t.name){const s=ct(t.name);i=e.find((t=>s===ct(t.name)))}if(!i&&t.lang){const s=ct(t.lang);let o=e.filter((t=>s===t.lang));o.length||(o=e.filter((t=>s===t.lang.split("-")[0]))),i=o.find((t=>t.default))||o[0]}return i&&(this.l=i,s=!0),s}))?Promise.resolve():Promise.reject(Error("TTSNoMatch"))})):Promise.reject(Error("TTSEmptyParam"))}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}}const ot=(t,e)=>{const i=[],s=()=>{i.length&&i[0].then(t).catch(e)};return{push:t=>{t.catch((()=>{const e=i.indexOf(t);e>0&&i.splice(e,1)})),i.push(t),1===i.length&&s()},cancel:()=>{i.length=0},next:()=>{i.shift(),s()}}},rt=t=>t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset),nt=t=>{const e=new Uint8Array(t),i=new Uint8Array(e.length-44);return i.set(e.slice(44,e.length)),rt(i)},at=t=>{const e=new DataView(t,0,44);return{numChannels:e.getUint16(22,true),sampleRate:e.getUint32(24,true)}},ct=t=>t.toLowerCase();class ht extends o.BaseChatConnection{constructor(t){super(t.dispatcher),this.url=t.url,this.authService=t.authService}open(){return this.isOpen()?Promise.resolve():navigator.onLine?this.Ct():(0,o.getRejectPromiseError)(o.CoreError.NetworkOffline)}close(){return this.isClosed()?Promise.resolve():this.Tt()}send(t){return new Promise(((e,i)=>{if(this.isOpen()){const s=new XMLHttpRequest;s.open("POST",this.url),(0,o.setRequestHeader)(s,"Content-Type","application/json"),s.onload=()=>{s.status>=200&&s.status<300?e(t):i(s.response)},s.onerror=()=>{i((0,o.getError)(o.CoreError.NetworkFailure))},this.$t(s,JSON.stringify(t)).catch(i)}else i((0,o.getError)(o.CoreError.ConnectionNone))}))}updateConnectionUrl(t){this.url=(0,s.getLongPollURL)(t.URI,{channelId:t.channelId,userId:t.userId},t.isTLS)}Ct(){return this.It||(this.It=new s.Deferred,this.setState(o.ConnectionState.Connecting),this.At().then((()=>{this.X(),this.Ot()})).catch((t=>{this.It&&(this.It.reject(t),this.It=null),this.tt()}))),this.It.promise}Tt(){return this.Et||(this.Lt.abort(),this.Et=new s.Deferred,this.setState(o.ConnectionState.Closing),setTimeout((()=>{this.tt()}),100)),this.Et.promise}At(){return new Promise(((t,e)=>{const i=new XMLHttpRequest;i.open("POST",this.url),(0,o.setRequestHeader)(i,"Content-Type","application/json"),i.onload=()=>{i.status>=200&&i.status<300?t():e(i.response)},i.onerror=()=>{e((0,o.getError)(o.CoreError.NetworkFailure))},this.$t(i,JSON.stringify(o.pingMessage)).catch((t=>{e(t)}))}))}Ot(){let t=0;this.isOpen()&&(this.Lt=new XMLHttpRequest,this.Lt.open("GET",this.url),this.Lt.onload=()=>{t=0,this.Lt.status&&200===this.Lt.status&&this.Pt(this.Lt.responseText),this.Ot()},this.Lt.onerror=()=>{5===t?this.close():(t++,this.Ot())},this.$t(this.Lt))}$t(t,e){return this.authService?new Promise(((i,s)=>{var r;null===(r=this.authService)||void 0===r||r.get().then((s=>{(0,o.setRequestHeader)(t,"Authorization",`Bearer ${s.token}`),t.send(e),i()})).catch((t=>{s(t)}))})):(t.send(e),Promise.resolve())}Pt(t){try{JSON.parse(t).forEach((t=>{this.et(JSON.parse(t))}))}catch(t){this.st(t)}}X(){this.It&&(this.It.resolve(),this.It=null),this.Et&&(this.Et.reject(),this.Et=null),this.setState(o.ConnectionState.Open),this.dispatcher.trigger(o.CoreEvent.Open)}tt(){this.Et&&(this.Et.resolve(),this.Et=null),this.It=null,this.setState(o.ConnectionState.Closed),this.dispatcher.trigger(o.CoreEvent.Close)}et(t){ft(t),this.dispatcher.trigger(o.CoreEvent.Message,t),this.dispatcher.trigger(o.CoreEvent.MessageReceived,t);const e=t.messagePayload;if(e.type===o.MessageType.ExecuteApplicationActionCommand){const t=e;this.dispatcher.trigger(t.actionType,t)}}st(t){this.dispatcher.trigger(o.CoreEvent.Error,t)}}const lt=Promise,ut=3e6,pt=window;class dt extends o.BaseChatConnection{constructor(t){super(t.dispatcher),this.jt=!1,this.Ft=!1,this.Vt=!1,this.Ht=0,this.Dt=!1,this.Rt=null,this.url=t.url,this.authService=t.authService,this.Nt=t.retryInterval,this.Ut=t.retryMaxAttempts}open(){return this.isOpen()?lt.resolve():navigator.onLine?this.Ct():(0,o.getRejectPromiseError)(o.CoreError.NetworkOffline)}close(){return this.jt=!0,clearTimeout(this.Bt),this.isClosed()?lt.resolve():this.Tt()}send(t){return new lt(((e,i)=>{if(this.Rt&&this.isOpen()){this.Vt=!0;try{this.Rt.send(JSON.stringify(t)),e(t),(0,o.isPing)(t)||(this.dispatcher.trigger(o.CoreEvent.Message,t),this.dispatcher.trigger(o.CoreEvent.MessageSent,t))}catch(t){i((0,o.getError)(o.CoreError.NetworkFailure))}}else i((0,o.getError)(o.CoreError.ConnectionNone))}))}updateConnectionUrl(t){this.url=(0,s.getWebSocketURL)(t.URI,{channelId:t.channelId,userId:t.userId},t.isTLS,t.channel)}setSuggestionPromise(t){this.Wt=t}Ct(){return this.It||(this.It=new s.Deferred,this.setState(o.ConnectionState.Connecting),this.At()),this.It.promise}Tt(){var t;return this.Et||(null===(t=this.Rt)||void 0===t||t.close(),this.Et=new s.Deferred,this.setState(o.ConnectionState.Closing)),this.Et.promise}At(){try{this.Rt=new WebSocket(this.url),this.Rt.onopen=()=>{this.setState(o.ConnectionState.Open),this.Dt=!1,this.authService?this.Zt():this.X()},this.Rt.onclose=t=>{this.Gt(),this.jt?(this.setState(o.ConnectionState.Closed),this.qt(o.CoreError.ConnectionExplicitClose,t)):this.authService&&!this.Vt&&1006!==t.code?(this.setState(o.ConnectionState.Closed),this.qt(o.CoreError.AuthExpiredToken,t)):this.Dt||this.Yt(t)},this.Rt.onmessage=this.et.bind(this),this.Rt.onerror=()=>{this.Yt(),this.Dt=!0,this.st.bind(this)}}catch(t){this.Yt()}}Yt(t){this.setState(o.ConnectionState.Connecting),this.Ht<this.Ut?(this.Ht++,this.Bt=pt.setTimeout(this.At.bind(this),this.Nt)):(this.setState(o.ConnectionState.Closed),this.qt(o.CoreError.NetworkFailure,t))}qt(t,e){this.It&&this.It.reject((0,o.getError)(t)),this.tt(e)}Zt(){var t;this.Vt=!1,null===(t=this.authService)||void 0===t||t.get().then((t=>{this.send(function(t){return{state:{token:t,tokenType:o.TokenType.JWT,type:o.StateType.Auth}}}(t.token)).then((()=>{setTimeout((()=>this.Vt=!0),1e4),this.X()}))})).catch((t=>{var e;null===(e=this.It)||void 0===e||e.reject(t),this.close()}))}X(){var t;this.Gt(),clearTimeout(this.Bt),this.Jt=this.Kt(),this.Xt=(t=this,pt.setTimeout((()=>{gt(t)}),ut)),this.Ht=0,this.jt=!1,this.Vt=!1,this.It&&(this.It.resolve(),this.It=null),this.Et&&(this.Et.reject(),this.Et=null),this.dispatcher.trigger(o.CoreEvent.Open)}tt(t){this.Ht=0,this.jt=!1,this.Vt=!1,this.Et&&(this.Et.resolve(),this.Et=null),this.It=null,this.dispatcher.trigger(o.CoreEvent.Close,t)}et(t){try{const e=JSON.parse(t.data);if((0,o.isPong)(e))this.Ft=!0;else if(e.suggestions&&this.Wt)this.Wt.resolve(e.suggestions);else{ft(e),this.dispatcher.trigger(o.CoreEvent.Message,e),this.dispatcher.trigger(o.CoreEvent.MessageReceived,e);const t=e.messagePayload;if(t.type===o.MessageType.ExecuteApplicationActionCommand){const e=t;this.dispatcher.trigger(e.actionType,e)}}}catch(t){this.st(t)}}st(t){this.dispatcher.trigger(o.CoreEvent.Error,t)}Kt(){return pt.setInterval((()=>{this.send(o.pingMessage).then((()=>{this.Ft=!1,this.Qt=pt.setTimeout((()=>{this.isOpen()&&!this.Ft&&gt(this)}),1e4)}))}),3e4)}Gt(){clearTimeout(this.Xt),clearInterval(this.Jt),clearTimeout(this.Qt)}}function gt(t){t.close().then((()=>t.open()))}class mt{constructor(t){this.te=t,t.isLongPoll&&(this.te.retryInterval=2e3,this.te.retryMaxAttempts=5),this.i=(0,s.generateEventDispatcher)(),this.ee=new dt({authService:t.authService,url:(0,s.getWebSocketURL)(t.baseURL,t.searchParams,t.isTLS,t.channel),retryInterval:t.retryInterval,retryMaxAttempts:t.retryMaxAttempts,dispatcher:this.i}),this.ie=this.ee}open(){return this.te.isLongPoll?new Promise(((t,e)=>{this.ee.open().then((()=>{this.se(t)})).catch((()=>{this.oe(t,e)}))})):this.ie.open()}close(){return clearTimeout(this.re),this.ie.close()}send(t){return this.ie.send(t)}isOpen(){return this.ie.isOpen()}isClosed(){return this.ie.isClosed()}getState(){return this.ie.getState()}updateConnectionUrl(t){var e;this.ee.updateConnectionUrl(t),this.te=Object.assign(Object.assign({},this.te),{baseURL:t.URI,searchParams:{channelId:t.channelId,userId:t.userId},isTLS:t.isTLS,channel:t.channel}),null===(e=this.ne)||void 0===e||e.updateConnectionUrl(t)}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}setSuggestionPromise(t){this.ee.setSuggestionPromise(t)}se(t){var e;this.ie=this.ee,clearTimeout(this.re),(null===(e=this.ne)||void 0===e?void 0:e.isOpen())&&this.ne.close(),t()}oe(t,e){this.ie=this.ae(),this.ie.open().then((()=>{this.re=this.ce(),t()})).catch((t=>{e(t)}))}ae(){return this.ne||(this.ne=new ht({url:(0,s.getLongPollURL)(this.te.baseURL,this.te.searchParams,this.te.isTLS),authService:this.te.authService,dispatcher:this.i})),this.ne}ce(){return window.setTimeout((()=>{this.ie.close().then((()=>{this.open()}))}),3e5)}}const ft=t=>{const e=t.messagePayload;e&&e.type===o.MessageType.TextStream&&(e.streamState=e.streamState.toLowerCase())},bt={isLongPoll:!1,isTLS:!0};class vt{constructor(t){this.he=(t,e,i)=>{let s=!1;return(t&&t!==this.U.URI||e&&e!==this.U.channelId||i&&i!==this.U.userId)&&(s=!0),s},this.le=(t,e,i)=>new Promise(((s,o)=>{t&&"string"==typeof t&&t.length&&(this.U.URI=t),this.N?this.N.get().then((t=>{this.U.channelId=t.getClaim("channelId"),this.U.userId=t.getClaim("userId"),this.L.updateConnectionUrl({URI:this.U.URI,channelId:this.U.channelId,userId:this.U.userId,isTLS:this.U.isTLS,channel:this.U.channel}),s()})).catch((t=>o(t))):("string"==typeof e&&e.length&&(this.U.channelId=e),"string"==typeof i&&i.length&&(this.U.userId=i),this.L.updateConnectionUrl({URI:this.U.URI,channelId:this.U.channelId,userId:this.U.userId,isTLS:this.U.isTLS,channel:this.U.channel}),s())})),this.U=Object.assign(Object.assign({},bt),t),this.U.tokenGenerator&&(this.N=s.AuthTokenService.getInstance()),this.L=new mt({baseURL:this.U.URI,isLongPoll:this.U.isLongPoll,isTLS:this.U.isTLS,channel:this.U.channel,retryInterval:void 0!==this.U.retryInterval&&this.U.retryInterval>=0?1e3*this.U.retryInterval:5e3,retryMaxAttempts:void 0!==this.U.retryMaxAttempts&&this.U.retryMaxAttempts>=0?this.U.retryMaxAttempts:5,searchParams:{channelId:this.U.channelId,userId:this.U.userId},authService:this.N}),window.addEventListener("online",(()=>this.open())),window.addEventListener("offline",(()=>this.close()))}open(t){const{URI:e,userId:i,channelId:s}=t||{};if(this.isOpen()){if(this.he(e,s,i)){const t=e&&this.U.URI!==e;return!this.N||t?this.close().then((()=>this.le(e,s,i).then((()=>this.L.open())))):Promise.resolve()}return Promise.resolve()}return this.le(e,s,i).then((()=>this.L.open()))}close(){return this.L.close()}getState(){return this.L.getState()}isOpen(){return this.L.isOpen()}send(t,e,i){let s;if(s="string"==typeof t?(0,o.buildUserTextMessage)(t,e):(0,o.isPostbackPayload)(t)?(0,o.buildPostbackMessage)(t):(0,o.isMessagePayload)(t)?(0,o.buildUserMessage)(t):t,!(0,o.isValidMessage)(s))return(0,o.getRejectPromiseError)(o.CoreError.MessageInvalid);if(i){const{sdkMetadata:t,threadId:e}=i;t&&(s=this.ue(s,t)),e&&(s.threadId=e)}return s.userId=this.U.userId,this.L.send(s)}updateUser(t,e){let i=t;return(null==e?void 0:e.sdkMetadata)&&(i=this.ue(t,e.sdkMetadata)),this.L.send(i)}sendDeviceToken(t,e){const i={state:{type:"token",deviceToken:t,deviceType:e,"store.undelivered.messages":!1,"notify.undelivered.skill.messages":!1}};return this.L.send(i)}getSuggestions(t){const e=new s.Deferred;this.L.setSuggestionPromise(e);const i={messagePayload:{query:t,threshold:30,type:o.MessageType.Suggest}};return this.L.send(i).catch(null==e?void 0:e.reject),setTimeout((()=>{null==e||e.reject((0,o.getError)(o.CoreError.SuggestionsTimeout))}),1e4),null==e?void 0:e.promise}on(t,e){this.L.on(t,e)}off(t,e){this.L.off(t,e)}ue(t,e){return e&&(t.sdkMetadata=Object.assign(Object.assign({},t.sdkMetadata),e)),t}}const wt=25,xt=1024*wt*1024,yt="channelId",kt="userId";class _t{static getInstance(){return this.v||(this.v=new _t),this.v}setParams(t){this.gt=t,t.tokenGenerator?(this.N=s.AuthTokenService.getInstance(),this.N.get().then((e=>{t[yt]=e.getClaim(yt),t[kt]=e.getClaim(kt),this.pe=zt(t)}))):this.pe=zt(t)}upload(t,e){return new Promise(((i,s)=>{const r=t.size;if(0===r)return void s(Error(o.CoreError.UploadZeroSize));if(r>xt)return void s(Error(o.CoreError.UploadMaxSize));const n=new XMLHttpRequest,a=()=>s(Error(o.CoreError.UploadNetworkFail));(0,o.requestOn)(n,"readystatechange",(()=>{if(4===n.readyState)switch(n.status){case 200:{const t=JSON.parse(n.responseText);i(t);break}case 413:s(Error(o.CoreError.UploadMaxSize));break;case 415:s(Error(o.CoreError.UploadBadFile));break;default:a()}})),(0,o.requestOn)(n,"abort",a),(0,o.requestOn)(n,"error",a),(0,o.requestOn)(n,"timeout",a),this.gt.tokenGenerator?this.N.get().then((i=>this.ge(n,{file:t,options:e,token:i.token}))).catch((t=>s(t))):this.ge(n,{file:t,options:e})}))}ge(t,{file:e,options:i,token:s}){const r=new FormData;r.append("attachment",e,encodeURI(e.name)),t.open("POST",this.pe),(0,o.setRequestHeader)(t,"x-oda-meta-file-size",e.size.toString()),s&&((0,o.setRequestHeader)(t,"Authorization",`Bearer ${s}`),this.gt.enableAttachmentSecurity&&((0,o.setRequestHeader)(t,"x-oda-meta-file-isProtected","True"),(0,o.setRequestHeader)(t,"x-oda-meta-file-authType","ChannelClientAuth"))),t.send(r),i&&i.onInitUpload&&i.onInitUpload(t)}}function zt(t){const e=`http${t.isTLS?"s":""}://`,{URI:i,channelId:o,userId:r}=t;return(0,s.buildURL)(e,i,{channelId:o,userId:r},"/chat/v1/attachments")}const Mt={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};Mt.ALL=`${Mt.AUDIO},${Mt.FILE},${Mt.IMAGE},${Mt.VIDEO}`;const St={oracle:"oracle",platform:"platform"},Ct=St.oracle;class Tt{constructor(t){this.U=t,this.me=null,this.fe=new Map,this.U.URI=(0,s.stripHTTP)(t.URI),this.be(t),this.ve=new vt(t),this.ve.on(o.CoreEvent.Open,(()=>{var t,e;const i=this.U;null===(t=this.we)||void 0===t||t.setParams(i),null===(e=this.xe)||void 0===e||e.setConfig(i)}))}connect(t){return t&&(t.URI&&(t.URI=(0,s.stripHTTP)(t.URI)),this.U=Object.assign(Object.assign({},this.U),t)),this.ve.open(t)}disconnect(){const t=this.ve.close();return t.then(this.ye.bind(this)),t}getState(){return this.ve.getState()}isConnected(){return this.ve.isOpen()}sendMessage(t,e){if(!t)return(0,o.getRejectPromiseError)(o.CoreError.MessageInvalid);let i="",s="";if("string"==typeof t)s=t;else if((0,o.isMessagePayload)(t)){s=t.text}return this.me&&this.me.text===s&&(i=this.me.requestId),this.me=null,this.ve.send(t,i,Object.assign(Object.assign({},e),{threadId:(null==e?void 0:e.threadId)||this.ke}))}updateChatContext(t,e,i,s){return this.sendMessage({messagePayload:Object.assign({type:o.MessageType.UpdateApplicationContextCommand,source:o.ContextSource.ChatWindow,context:t},e)},{sdkMetadata:s,threadId:i})}updateUser(t,e){return(0,o.isValidProfileMessage)(t)?this.ve.updateUser(t,Object.assign(Object.assign({},e),{threadId:this.ke})):(0,o.getRejectPromiseError)(o.CoreError.ProfileInvalid)}sendDeviceToken(t,e){return this.ve.sendDeviceToken(t,e)}setCurrentThreadId(t){this.ke=t}uploadAttachment(t,e){return this.isConnected()?this.we?this.we.upload(t,e).then((t=>(0,o.buildUserAttachmentMessage)(t.type,t.url,t.fileName))):(0,o.getRejectPromiseError)(o.CoreError.UploadNotAvailable):(0,o.getRejectPromiseError)(o.CoreError.ConnectionNone)}sendAttachment(t,e){return this.uploadAttachment(t,e).then((t=>this.ve.send(t,"",{sdkMetadata:null==e?void 0:e.sdkMetadata})))}sendLocation(t){return this.isConnected()?t?(0,o.isValidLocation)(t)?this.ve.send({messagePayload:{type:o.MessageType.Location,location:t}}):(0,o.getRejectPromiseError)(o.CoreError.LocationInvalid):(0,o.getCurrentPosition)().then((t=>this.ve.send({messagePayload:{type:o.MessageType.Location,location:{latitude:t.latitude,longitude:t.longitude}}}))):(0,o.getRejectPromiseError)(o.CoreError.ConnectionNone)}sendUserTypingStatus(t,e){return this.sendMessage((0,o.buildUserMessage)({partyType:"user",source:"sdk",status:t,type:o.MessageType.Status,text:e}))}getSuggestions(t){return t?"string"!=typeof t?(0,o.getRejectPromiseError)(o.CoreError.SuggestionsInvalidRequest):this.ve.getSuggestions(t):(0,o.getRejectPromiseError)(o.CoreError.SuggestionsEmptyRequest)}destroy(){this.disconnect();for(const t in this)this[t]&&delete this[t]}setTTSService(t){this._e="string"==typeof t?this.ze(t):t}getTTSService(){return this._e}getTTSVoices(){return this._e?this._e.getVoices():(0,o.getRejectPromiseError)(o.CoreError.TtsNotAvailable)}setTTSVoice(t){return this._e?this._e.setVoice(t):(0,o.getRejectPromiseError)(o.CoreError.TtsNotAvailable)}getTTSVoice(){if(this._e)return this._e.getVoice();throw(0,o.getError)(o.CoreError.TtsNotAvailable)}speakTTS(t,e){if(this._e){let i;if("string"==typeof t)i=t;else{if(!(0,o.isValidMessage)(t))return;i=(0,o.getUtteranceText)(t,e)}this._e.speak(i)}}cancelTTS(){this._e&&this._e.cancel()}startRecognition(t){return this.xe?this.isConnected()?this.xe.startRecognition(Object.assign(Object.assign({},t),{onRecognitionText:e=>{"final"===e.type&&(this.me=e),t.onRecognitionText(e)}})):(0,o.getRejectPromiseError)(o.CoreError.ConnectionNone):(0,o.getRejectPromiseError)(o.CoreError.RecognitionNotAvailable)}stopRecognition(){return this.xe?this.xe.stopRecognition():(0,o.getRejectPromiseError)(o.CoreError.RecognitionNotAvailable)}setRecognitionLocale(t){if(t&&"string"==typeof t&&this.xe){const e=t.toLowerCase();this.xe.setLocale(e)}}on(t,e){var i;switch(t){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:null===(i=this._e)||void 0===i||i.on(t,e);break;default:this.ve.on(t,e)}}off(t,e){var i;switch(t){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:null===(i=this._e)||void 0===i||i.off(t,e);break;default:this.ve.off(t,e)}}getAuthToken(){var t;return null===(t=this.N)||void 0===t?void 0:t.get()}ye(){}be(t){t.URI=t.URI.replace(/^https?:\/\//gi,(t=>(console.warn(`Please remove "${t}" from URI.`),""))),this.Me(t),this.Se(t),this.Ce(t),this.xe=D.getInstance()}Me(t){t.enableAttachment&&(this.we=_t.getInstance())}Se(t){t.tokenGenerator&&(this.N=s.AuthTokenService.getInstance(),this.N.setFetch(t.tokenGenerator))}Ce(t){if(t.isTTS){let e;const i=t.TTSService;e=i?"string"==typeof i?this.ze(i):i:this.ze(Ct),this._e=e}}ze(t){const e=this.fe.get(t);if(e)return e;let i;try{t===St.oracle?i=new st(this.U):t===St.platform&&(i=new g),this.fe.set(t,i)}catch(t){console.log(t)}return i}}Tt.TTS=St},356:function(t,e,i){i.r(e),i.d(e,{ChatEvent:function(){return o},ContextualWidgetComponent:function(){return Es},DOMUtil:function(){return ai},Logger:function(){return $t},MESSAGE_SIDE:function(){return Ot},MessageComponent:function(){return Et},MessageComponentFactory:function(){return $e},SDK_VERSION:function(){return Ft},ShareCategory:function(){return Oe},StorageType:function(){return Ie},WidgetComponent:function(){return Cs},WidgetTheme:function(){return Ae},addDefaultSettings:function(){return ti},configureColorCustomization:function(){return Ye},configureLocale:function(){return We},debounce:function(){return Ze},getFieldInputValues:function(){return Je},isAnyVoiceAvailable:function(){return Pe},mergeTranslationStrings:function(){return Qe},syncTTSLocaleIfUnavailable:function(){return Ne}});var s=i(396);const o=Object.assign(Object.assign(Object.assign({},s.SpeechSynthesisServiceEvent),{CHAT_LANG:"chatlanguagechange",CLICK_AUDIO_RESPONSE_TOGGLE:"click:audiotoggle",CLICK_ERASE:"click:erase",CLICK_VOICE_TOGGLE:"click:voicetoggle",DESTROY:"destroy",CHAT_END:"chatend",MESSAGE:"message",MESSAGE_RECEIVED:"message:received",MESSAGE_SENT:"message:sent",NETWORK:"networkstatuschange",READY:"ready",TYPING:"typing",UNREAD:"unreadCount",WIDGET_CLOSED:"widget:closed",WIDGET_OPENED:"widget:opened",WIDGET_SHOW:"widget:show",WIDGET_HIDE:"widget:hide"}),s.ExecuteActionType),r=()=>{var t;return(null===(t=navigator.languages)||void 0===t?void 0:t.map((t=>t.toLowerCase())))||[]},n=t=>{let e;try{e=window[t];const i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}};var a=i(476);const c=q('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>'),h=q('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),l=q('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>'),u=q('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>'),p=q('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>'),d=q('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>'),g=q('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>'),m=q('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>'),f=q('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>'),b=q('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>'),v=q('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>'),w=q('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>'),x=q('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>'),y=q('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>'),k=q('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />'),_=q('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>'),z='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>',M=q('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>'),S=q('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>'),C=q('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>'),T=q('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>'),$=q('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>'),I=q('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>'),A=q('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>'),O=q('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>'),E=q('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>'),L=q('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>'),P=q('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>'),j=q('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>'),F=q('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),V=q('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>'),H=q('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>'),D=q('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>'),R=q('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>'),N=q('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20"),U=q('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20"),B=q('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20"),W=q('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16"),Z=q('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16"),G=q('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>');function q(t,e){return`<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 ${e||"24"} ${e||"24"}">${t}</svg>`}function Y(t){return t.filter((t=>{const e=t.getActionType();return e===s.ActionType.Postback||e===s.ActionType.Location||e===s.ActionType.SubmitForm}))}var J=function(t,e,i,s){return new(i||(i=Promise))((function(o,r){function n(t){try{c(s.next(t))}catch(t){r(t)}}function a(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}c((s=s.apply(t,e||[])).next())}))};const K=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gimu,X=(t,e,i)=>{const s=Q(t),o=st(s).replace((0,a.resetRegex)(K),at(i,e)),r=ot(o);return vt(r,e)},Q=t=>{let e;try{e=(0,a.parseDOM)(t)}catch(e){return t}return tt(e),et(e),e.innerHTML},tt=t=>(t.querySelectorAll("a").forEach((t=>{t.outerHTML=it(t.outerHTML)})),t),et=t=>{t.querySelectorAll("*").forEach((t=>{if("A"!==t.tagName){const e=t.attributes;for(let t=0;t<e.length;t++){const i=e[t];i.value=it(i.value)}}}))},it=t=>t.replace(/(https?|www)/gim,nt),st=t=>t.replace(/&lt;|&gt;|&nbsp;|&amp;/gim,nt),ot=t=>{let e=t;return rt.forEach(((t,i)=>{e=e.replace(new RegExp(i,"g"),t)})),rt.clear(),e},rt=new Map,nt=t=>{const e=performance.now().toString(36).replace(".","_")+Math.random().toString(36).substring(2);return rt.set(e,t),e},at=(t,e)=>(i,s)=>{if(t){const t=ct(i,e);if(t)return t}return`<a href="${s?`https://${i}`:i}" target="_blank" rel="noreferrer">${i}</a>`},ct=(t,e)=>{let i,s;try{const e=t.toLowerCase().startsWith("https")?new URL(t):new URL(`https://${t}`);i=e.hostname.toLowerCase()}catch(t){return s}return ft.some((o=>{const r=i.includes(o.name);if(r){const i=wt();"videohub"!==o.name&&ht(o.url,t,e,i),s=o.getEmbed(o.getId(t),i,e)}return r})),s},ht=(t,e,i,s)=>J(void 0,void 0,void 0,(function*(){const o=`${t}?url=${e}`;try{const t=yield fetch(o);if(!t.ok)return;const e=yield t.json();if(e&&e.html){const t=e.html.replace("<iframe",`<iframe class="${i}-video-wrapper"`),o=document.getElementById(s);null==o||o.replaceWith((0,a.stringToHTML)(t))}}catch(t){}})),lt=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,ut=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,pt=/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)(?:|\/\?)/gim,dt=/^(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com\/(?:video|embed)|dai.ly)\/([a-z0-9]+)/gim,gt="allow",mt=`${gt}="autoplay *; fullscreen *; encrypted-media *" sandbox="${gt}-downloads ${gt}-forms ${gt}-same-origin ${gt}-scripts ${gt}-top-navigation ${gt}-pointer-lock ${gt}-popups ${gt}-modals ${gt}-orientation-lock ${gt}-popups-to-escape-sandbox ${gt}-presentation ${gt}-top-navigation-by-user-activation" height="auto"`,ft=[{name:"youtu",url:"https://www.youtube.com/oembed",getEmbed:(t,e,i)=>xt(`src="https://www.youtube.com/embed/${t}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"`,e,i,"youtube"),getId:t=>bt(t,lt)},{name:"videohub",url:"",getEmbed:(t,e,i)=>{const s="flashvars";return xt(`src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id=${t}&${s}[streamerType]=auto&amp;${s}[localizationCode]=en&amp;${s}[sideBarContainer.plugin]=true&amp;${s}[sideBarContainer.position]=left&amp;${s}[sideBarContainer.clickToClose]=true&amp;${s}[chapters.plugin]=true&amp;${s}[chapters.layout]=vertical&amp;${s}[chapters.thumbnailRotator]=false&amp;${s}[streamSelector.plugin]=true&amp;${s}[EmbedPlayer.SpinnerTarget]=videoHolder&amp;${s}[dualScreen.plugin]=true&amp;${s}[hotspots.plugin]=1&amp;${s}[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ${mt}`,e,i,"ovh")},getId:t=>bt(t,ut)},{name:"vimeo",url:"https://vimeo.com/api/oembed.json",getEmbed:(t,e,i)=>xt(`src="https://player.vimeo.com/video/${t}" allow="fullscreen; picture-in-picture"`,e,i,"vimeo"),getId:t=>bt(t,pt)},{name:"dai",url:"https://www.dailymotion.com/services/oembed",getEmbed:(t,e,i)=>xt(`src="https://geo.dailymotion.com/player.html?video=${t}" allow="fullscreen; picture-in-picture; web-share"`,e,i,"dailymotion"),getId:t=>bt(t,dt)}],bt=(t,e)=>{let i;return t.replace((0,a.resetRegex)(e),((t,e)=>(e&&e.length&&(i=e),t))),i},vt=(t,e)=>{const i=(0,a.parseDOM)(t);if(!i)return t;const s=i.querySelectorAll("video"),o=`${e}-video-wrapper`;return s.forEach((t=>{t.classList.add(o)})),i.innerHTML},wt=()=>`${Date.now()}-${Math.floor(1e3*Math.random())}`,xt=(t,e,i,s)=>`<div class="${i}-${s}-wrapper"><iframe id="${e}" class="${i}-video-wrapper" ${t} allowfullscreen frameborder="0"></iframe></div>`;class yt{constructor(t,e){var i,o;this.util=t,this.Te=!1,this.$e=e.type,this.Ie=e.label,this.Ae=e.imageUrl,this.Oe=e.style,this.Ee=e.tooltip,this.Le=e.displayType,this.Pe=null===(i=e.channelExtensions)||void 0===i?void 0:i.activeImageUrl,this.je=null===(o=e.channelExtensions)||void 0===o?void 0:o.c2kText,this.$e!==s.ActionType.SubmitForm||this.Oe||(this.Oe=s.ActionStyle.Primary)}render(){const t=this.util,e=t.createButton(["action-postback",this.Oe===s.ActionStyle.Primary?"primary":this.Oe===s.ActionStyle.Danger?"danger":""]);if(this.Le===s.ActionDisplayType.Icon&&t.addCSSClass(e,s.ActionDisplayType.Icon),e.onclick=this.handleOnClick.bind(this),this.Ae&&e.appendChild(t.createImage(this.Ae,["action-image"],this.Ie||"")),this.Ie){const i=X(this.Ie,t.cssPrefix),o=t.createTextDiv();if(this.Le===s.ActionDisplayType.Link){const s=t.createAnchor("",i);s.onclick=t=>t.preventDefault(),o.appendChild(s),t.addCSSClass(e,"display-link")}else this.je?(o.innerHTML=String.fromCharCode(parseInt(this.Ie)+10111),t.addCSSClass(e,"c2k-action"),e.addEventListener("mouseover",(()=>{o.innerHTML=String.fromCharCode(parseInt(this.Ie)+10121);for(const e of Array.from(document.getElementsByClassName(this.je)))t.addCSSClass(e,"highlight")})),e.addEventListener("mouseleave",(()=>{o.innerHTML=String.fromCharCode(parseInt(this.Ie)+10111);for(const e of Array.from(document.getElementsByClassName(this.je)))t.removeCSSClass(e,"highlight")}))):o.innerHTML=i;e.appendChild(o)}if(this.Te&&t.addCSSClass(e,"disabled"),this.Ee){const i=t.createDiv(["action-wrapper"]),s=t.createDiv(),o=t.createTextDiv(["tooltip","none"]);return o.innerText=this.Ee,o.setAttribute("role","tooltip"),s.appendChild(o),i.appendChild(e),i.appendChild(s),i}return this.Fe=e,e}handleOnClick(t){if(this.onActionClick&&!this.Te){const t={getPayload:this.getEventPayload.bind(this),label:this.Ie,imageUrl:this.Pe||this.Ae,type:this.$e};this.Pe&&this.Fe.lastElementChild.replaceWith(this.util.createImage(this.Pe,["action-image"],this.Ie||"")),this.onActionClick(t)}this.$e!==s.ActionType.Postback&&this.$e!==s.ActionType.Location&&this.$e!==s.ActionType.Share||(t.preventDefault(),t.stopPropagation())}disable(){this.Te=!0,this.Fe&&(this.util.addCSSClass(this.Fe,"disabled"),this.Fe.disabled=!0)}enable(){this.Te=!1,this.Fe&&(this.util.removeCSSClass(this.Fe,"disabled"),this.Fe.disabled=!1)}getActionType(){return this.$e}}class kt extends yt{constructor(t,e){super(t,e),this.Ve=e.phoneNumber}render(){const t=this.util,e=super.render();"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-call"):t.addCSSClass(e.firstElementChild,"action-call");const i=t.createAnchor(`tel:${this.Ve}`,"");return this.onActionClick=()=>{i.click()},e}getEventPayload(){return Promise.resolve(this.Ve)}}class _t extends yt{render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-location"):t.addCSSClass(e.firstElementChild,"action-location"),e}getEventPayload(){return(0,s.getCurrentPosition)()}}class zt extends yt{constructor(t,e,i,s){super(t,e),this.He=i,this.De=s,this.Re=e.popupContent}render(){const t=this.util,e=super.render();"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-popup"):t.addCSSClass(e.firstElementChild,"action-popup");const i=function(t,e,i,o){const r=t.createDiv(["wrapper","popup-content-wrapper","none"]),n=t.createDiv(["popup-dialog"]),a=$e.fromMessage(i,t,{messagePayload:e});return a.onActionClick=e=>{(e.type!==s.ActionType.SubmitForm||a.validateForm())&&(t.addCSSClass(r,"none"),o(e))},n.appendChild(a.render()),r.appendChild(n),r.onclick=e=>{n.contains(e.target)||t.addCSSClass(r,"none")},r}(t,this.Re,this.He,this.De);return document.body.appendChild(i),this.onActionClick=()=>{t.removeCSSClass(i,"none")},e}getEventPayload(){return Promise.resolve(this.Re)}}class Mt extends yt{constructor(t,e){super(t,e),this.Ne=e.postback}getEventPayload(){return Promise.resolve(this.Ne)}}class St extends yt{constructor(t,e,i){super(t,e),this.Ue=i}render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-share"):t.addCSSClass(e.firstElementChild,"action-share"),e}getEventPayload(){return Promise.resolve(this.Ue)}}class Ct extends yt{constructor(t,e){super(t,e),this.Ne=e.postback}getEventPayload(){return Promise.resolve(this.Ne)}}class Tt extends yt{constructor(t,e,i=!1,s){super(t,e),this.Be=i,this.We=s,this.P=e.url}render(){const t=this.util,e=super.render();if("button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-url"):t.addCSSClass(e.firstElementChild,"action-url"),this.P){const i=t.createAnchor(this.P,"",[],this.Be,this.We);e.onclick=()=>{i.click()}}return e}getEventPayload(){return Promise.resolve(this.P)}}class $t{constructor(t){this.Ze=t}debug(...t){this.Ge($t.LOG_LEVEL.DEBUG,t)}error(...t){this.Ge($t.LOG_LEVEL.ERROR,t)}info(...t){this.Ge($t.LOG_LEVEL.INFO,t)}warn(...t){this.Ge($t.LOG_LEVEL.WARN,t)}Ge(t,e){if($t.logLevel>=t){let i;switch(e.unshift(`[${$t.appName}.${$t.appVersion}.${this.Ze}]`),t){case $t.LOG_LEVEL.ERROR:i=console.error;break;case $t.LOG_LEVEL.WARN:i=console.warn;break;case $t.LOG_LEVEL.INFO:i=console.info;break;case $t.LOG_LEVEL.DEBUG:i=console.debug}i.apply(console,e)}}}$t.LOG_LEVEL={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},$t.logLevel=$t.LOG_LEVEL.NONE;class It extends yt{constructor(t,e,i){super(t,e),this.qe=e,this.Ue=i}render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-client"):t.addCSSClass(e.firstElementChild,"action-client"),e}getEventPayload(){return this.qe.actionType===s.ClientActionType.COPY_MESSAGE_TEXT?Promise.resolve(this.Ue):Promise.resolve(this.qe)}}class At{static fromActionPayload(t,e,i,o,r){switch(t.type){case s.ActionType.Postback:return new Mt(e,t);case s.ActionType.Url:return new Tt(e,t,i.openLinksInNewWindow,i.linkHandler);case s.ActionType.Webview:return new Tt(e,t,i.openLinksInNewWindow,r.webviewLinkHandler);case s.ActionType.Location:return new _t(e,t);case s.ActionType.Call:return new kt(e,t);case s.ActionType.Share:return new St(e,t,o);case s.ActionType.SubmitForm:return new Ct(e,t);case s.ActionType.Popup:return new zt(e,t,i,r.onMessageActionClicked);case s.ActionType.Client:return new It(e,t,o);default:return At.logger.error(`Payload contains wrong action type:${t.type}`),null}}}At.logger=new $t("ActionComponentFactory");const Ot={LEFT:"left",RIGHT:"right"};class Et{constructor(t,e,i,o,r,n){this.settings=t,this.util=e,this.payload=i,this.side=o,this.source=r,this.options=n,this.actions=[],this.globalActions=[],this.Ye=[],this.locale=t.locale,this.translations=t.i18n[this.locale],this.shareText=function(t){let e="";switch(t.type){case s.MessageType.Card:return t.cards.forEach((t=>{var i;e+=(t.title?`${t.title} - `:"")+(t.description?`${t.description} - `:"")+(null!==(i=t.url)&&void 0!==i?i:"")+"\n"})),e;case s.MessageType.Text:return t.text;case s.MessageType.Attachment:return t.attachment.url;case s.MessageType.Location:const i=t.location;return`${i.title?`${i.title} - `:""}${i.latitude}, ${i.longitude}`;case s.MessageType.Table:t.rows.forEach((t=>{t.fields.forEach((t=>{e+=t.value?`${t.value} - `:""}))}));break;case s.MessageType.Form:t.forms.forEach((t=>{const i=qe(t);e+=i?`${i} - `:""}));break;case s.MessageType.EditForm:const o=t;e=o.title?`${o.title} - `:"",(0,s.isEditFormPayloadWithFields)(o)?o.fields.forEach((t=>{(0,s.isReadOnlyField)(t)?e+=t.value?`${t.value} - `:"":e+=t.label?`${t.label} - `:""})):o.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,s.isReadOnlyField)(t)?e+=t.value?`${t.value} - `:"":e+=t.label?`${t.label} - `:""}))}))}));break;case s.MessageType.TableForm:const r=t;r.rows.forEach(((t,i)=>{t.fields.forEach((t=>{e+=t.value?`${t.value} - `:""})),e+=qe(r.forms[i])}))}return ei(e)}(i),n&&n.locale&&(this.locale=n.locale,this.translations=Object.assign(Object.assign({},this.translations),this.settings.i18n[n.locale])),i.actions&&(this.actions=this.buildActions(i.actions,this.shareText)),i.globalActions&&(this.globalActions=this.buildActions(i.globalActions,this.shareText)),this.headerText=i.headerText,this.footerText=i.footerText,i.footerForm&&(this.footerFormComponent=je(e,i.footerForm,t,n)),this.Ye=Y(this.actions).concat(Y(this.globalActions))}handleOnActionClick(t){if(this.onActionClick){const e=t;e.messageComponent=this,this.onActionClick(e)}}hasActions(){return this.actions.length>0||this.globalActions.length>0}focusFirstAction(){var t;null===(t=this.firstActionButton)||void 0===t||t.focus()}disableActions(){this.actions.forEach((t=>{t.disable()})),this.globalActions.forEach((t=>{t.disable()})),this.footerFormComponent&&this.footerFormComponent.disableActions()}disablePostbacks(){this.Ye.forEach((t=>{t.disable()})),this.footerFormComponent&&this.footerFormComponent.disablePostbacks()}enableActions(){this.actions.forEach((t=>{t.enable()})),this.globalActions.forEach((t=>{t.enable()})),this.footerFormComponent&&this.footerFormComponent.enableActions()}enablePostbacks(){this.Ye.forEach((t=>{t.enable()})),this.footerFormComponent&&this.footerFormComponent.enablePostbacks()}render(t){const e=this,i=e.util,s=e.actions,o=e.globalActions,r=this.payload.embeddedActions,n="embeddedAction";this.element&&(this.element.innerHTML="");const a=this.element?this.element:i.createDiv(["message"]);a.lang=e.locale;const c=i.createDiv(["message-wrapper"]);a.appendChild(c);const h=e.getContent(t);if(e.headerText&&c.appendChild(e.getHeader()),c.appendChild(h),s&&s.length){const t=e.getActions();(this.settings.displayActionsAsPills?c:h).appendChild(t),e.firstActionButton||(e.firstActionButton=t.firstElementChild),this.actionsWrapper=t}if(e.footerText&&c.appendChild(e.getFooter()),this.footerFormComponent){const t=i.createDiv(["footer-form"]);t.appendChild(this.footerFormComponent.render()),c.appendChild(t)}if(o&&o.length){const t=e.getGlobalActions();a.appendChild(t),e.firstActionButton||(e.firstActionButton=t.firstElementChild)}return this.element=a,a.querySelectorAll(`span.${n}`).forEach((t=>{const e=t,s=r.find((e=>e.id===t.id));if(s){i.addCSSClass(t,n,`display-${s.displayType}`);const o=At.fromActionPayload(s,i,this.settings,this.shareText,this.options);o&&(o.onActionClick=this.handleOnActionClick.bind(this),o.render(),e.onclick=t=>o.handleOnClick(t))}})),a}getHeader(){return Lt(this.headerText,"message-header",this.util,this.settings.embeddedVideo)}getContent(t){const e=this.util.createDiv(["message-bubble"]);return e.style.padding=this.settings.messagePadding||e.style.padding,t&&e.appendChild(t),e}getActions(){const t=this.settings,e=t.displayActionsAsPills?["message-global-actions"]:["message-actions"];return"horizontal"!==t.actionsLayout&&e.push("col"),Pt(this.actions,e,this.util)}getFooter(){return Lt(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)}getGlobalActions(){const t=["message-global-actions"];return this.settings.icons.avatarBot&&t.push("has-message-icon"),"horizontal"!==this.settings.globalActionsLayout&&t.push("col"),Pt(this.globalActions,t,this.util)}buildActions(t,e){const i=this.settings;return function(t,e,i,s,o,r){const n=[];return t.forEach((t=>{const a=At.fromActionPayload(t,e,i,s,o);a&&(a.onActionClick=r,n.push(a))})),n}(t,this.util,i,e,this.options,this.handleOnActionClick.bind(this))}}function Lt(t,e,i,s){const o=i.createDiv(["message-bubble",e]),r=i.createTextDiv();return r.innerHTML=X(t,i.cssPrefix,s),o.appendChild(r),o}function Pt(t,e,i){const s=i.createTextDiv(e);return t.forEach((t=>{s.appendChild(t.render())})),s}class jt{}jt.GEOLOCATION_REQUEST_DENIED=1,jt.CHAT_SCROLL_DELAY=300,jt.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],jt.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},jt.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},jt.MAX_SUGGESTIONS_COUNT=5,jt.MIN_SUGGESTIONS_COUNT=1,jt.SUGGESTIONS_COUNT_THRESHOLD=30,jt.TIME={MIN_FIFTY:3e6};const Ft="24.06",Vt=1024,Ht=26214400,Dt=1e3;class Rt{static capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}constructor(t,e,i,s,o){this.settings=t,this.util=e,this.side=s,this.Je=o,this.P=i.url,this.$e=i.type;const r=i.url.split("/");this.Ke=i.title||decodeURI(r[r.length-1]),this.Xe=i.filename}Qe(t,e){const i=this.util,s=this.settings,o=i.createElement("a",[],!0),r=i.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:s.icons.download||b,iconCss:["attachment-download-icon"],title:s.i18n[s.locale].download});return o.setAttribute("href",t),o.setAttribute("download",e||""),o.setAttribute("target","_blank"),o.appendChild(r),o}createAttachment(t,e){const i=this.util,o=this.settings,r=i.createDiv(["attachment"]),n=i.createDiv(["attachment-placeholder","flex"]),a=i.createDiv(["attachment-icon"]),c=i.createImageIcon({icon:t});a.appendChild(c);const h=this.Ke,l=i.createDiv(["attachment-footer","flex",this.Je&&"with-actions"]),u=i.createLabel(["attachment-title"]),p=i.createDiv(["attachment-controls","flex"]);if(u.innerText=h,u.setAttribute("title",h),l.appendChild(u),this.$e===s.AttachmentType.Image){const t=i.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:o.icons.expandImage||H,iconCss:["attachment-expand-icon"],title:o.i18n[o.locale].imageViewerOpen});t.onclick=()=>{this.createImagePreview(this.P,h)},p.appendChild(t)}if(this.side===Ot.LEFT&&p.appendChild(this.Qe(this.P,this.Xe)),e)switch(n.appendChild(e),e.onerror=()=>{e.remove(),n.appendChild(a)},this.$e){case s.AttachmentType.Image:e.onload=()=>{e.clientHeight>211&&(n.style.alignItems="flex-start"),l.appendChild(p)},e.onclick=()=>{this.createImagePreview(this.P,this.Ke)};break;case s.AttachmentType.Audio:case s.AttachmentType.Video:e.onloadeddata=()=>{l.appendChild(p)}}else n.appendChild(a),l.appendChild(p);return r.appendChild(n),null==r||r.appendChild(l),r}createImagePreview(t,e){const i=this.util,s="image-preview",o=this.settings,r=i.createDiv([`${s}-wrapper`]),n=i.createImage(t,[s]),a=i.createLabel([`${s}-title`]);a.innerText=e;const c=document.querySelector(`.${this.settings.name}-wrapper`),h=o.icons.close||m,l=i.createIconButton({css:[`${s}-close`],icon:h,iconCss:[`${s}-close-icon`],title:o.i18n[o.locale].imageViewerClose});l.onclick=()=>{r.remove()},l.onkeydown=t=>{"Tab"===t.code&&(r.focus(),t.preventDefault())};const u=i.createDiv([`${s}-header`]);u.appendChild(a),u.appendChild(l),r.appendChild(u),r.appendChild(n),r.setAttribute("tabindex","-1"),r.onkeydown=t=>{"Escape"===t.code&&r.remove()},c.appendChild(r),r.focus()}}class Nt extends Rt{render(){const t=this.util,e=this.settings,i=e.icons.fileAudio||h,s=t.createMedia("video",this.P,["attachment-audio"]);s.controls=!0,s.preload="metadata",Ot.RIGHT===this.side&&s.setAttribute("controlsList","nodownload");const o=`<a href="${this.P}">`,r=e.i18n[e.locale].attachmentAudioFallback.replace("{0}",o).replace("{/0}","</a>");return s.innerHTML=r,e.linkHandler?De(s,e.linkHandler):e.openLinksInNewWindow&&Re(s),this.createAttachment(i,s)}}class Ut extends Rt{render(){const t=this.settings.icons.fileGeneric||x;return this.createAttachment(t)}}class Bt extends Rt{render(){const t=this.util,e=this.settings.icons.fileImage||y,i=t.createImage(this.P,["attachment-image"],this.Ke);return this.createAttachment(e,i)}}class Wt extends Rt{render(){const t=this.util,e=this.settings,i=this.P,s=e.icons.fileVideo||F,o=ct(i,t.cssPrefix);if(o){const e=t.createElement("span");return e.innerHTML=o,e}const r=t.createMedia("video",this.P,["attachment-video"]);r.controls=!0,r.preload="metadata",Ot.RIGHT===this.side&&r.setAttribute("controlsList","nodownload");const n=`<a href="${this.P}">`,a=e.i18n[e.locale].attachmentVideoFallback.replace("{0}",n).replace("{/0}","</a>");return r.innerHTML=a,this.settings.linkHandler?De(r,e.linkHandler):this.settings.openLinksInNewWindow&&Re(r),this.createAttachment(s,r)}}class Zt extends Et{static fromPayload(t,e,i,o,r,n=!1){if(r&&r.authToken&&r.uri&&i.url.indexOf(r.uri)>=0&&!this.ti.test(i.url)){const t=null==r?void 0:r.authToken;(null==t?void 0:t.length)&&(i.url=`${i.url}?token=${t}`)}switch(i.type){case s.AttachmentType.Image:return new Bt(t,e,i,o,n);case s.AttachmentType.Video:return new Wt(t,e,i,o,n);case s.AttachmentType.Audio:return new Nt(t,e,i,o,n);case s.AttachmentType.File:return new Ut(t,e,i,o,n);default:throw Error("Payload contains wrong attachment type")}}constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.ei=Zt.fromPayload(t,e,i.attachment,s,r,this.hasActions())}getContent(){return super.getContent(this.ei.render())}}Zt.ti=/token=[a-z\.\d]+/i;class Gt{constructor(t,e,i,s,o){var r;if(this.He=t,this.ii=e,this.te=o,this.si=[],this.Ye=[],this.Ke=i.title,this.oi=i.description,this.Ae=i.imageUrl,this.P=i.url,i.actions){for(const s of i.actions){const i=(this.Ke?`${this.Ke} - `:"")+(this.oi?`${this.oi} - `:"")+(null!==(r=this.P)&&void 0!==r?r:""),n=At.fromActionPayload(s,e,t,i,o);n&&(n.onActionClick=this.handleOnActionClick.bind(this),this.si.push(n))}this.Ye=Y(this.si)}}handleOnActionClick(t){this.onActionClick&&this.onActionClick(t)}render(){const t=this.ii,e=this.He,i=e.embeddedVideo,s=e.locale,o=this.P,r=t.createDiv(["card"]),n=o?t.createAnchor(o,"",["card-component"],e.openLinksInNewWindow,e.linkHandler):t.createDiv(["card-content"]);if(this.P&&(n.innerText=""),this.Ae){const i=e.i18n;let o=i[s].cardImagePlaceholder;if(this.te&&this.te.locale){const t=i[this.te.locale];o=t?t.cardImagePlaceholder:o}n.appendChild(t.createImage(this.Ae,["card-image"],o))}const a=t.createTextDiv(["card-title"]);if(a.innerHTML=X(this.Ke,t.cssPrefix,i),n.appendChild(a),this.oi){const e=t.createTextDiv(["card-description"]);e.innerHTML=X(this.oi,t.cssPrefix,i),n.appendChild(e)}if(r.appendChild(n),e.linkHandler?De(n,e.linkHandler):e.openLinksInNewWindow&&Re(n),this.si.length>0){const i=t.createDiv("horizontal"!==e.cardActionsLayout?["card-actions","col"]:["card-actions"]);let s=!0;for(const t of this.si){const e=t.render();s&&(this.ri=e,s=!1),i.appendChild(e)}r.appendChild(i)}return r}hasActions(){return this.si.length>0}disableActions(){this.si.forEach((t=>t.disable()))}disablePostbacks(){this.Ye.forEach((t=>t.disable()))}enableActions(){this.si.forEach((t=>t.enable()))}enablePostbacks(){this.Ye.forEach((t=>t.enable()))}getFirstActionButton(){return this.ri}}class qt extends Et{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.ni=[],this.ai=i.layout,this.ci=i.cards.length;let n=0;i.cards.forEach((t=>{n++,this.ni.push(new Gt(this.settings,e,t,n,r))})),this.globalActions=this.actions.concat(this.globalActions),this.actions=[],this.li=!1}hasActions(){return this.ni[0].hasActions()||this.actions.length>0||this.globalActions.length>0}disableActions(){super.disableActions(),this.ni.forEach((t=>{t.disableActions()}))}disablePostbacks(){super.disablePostbacks(),this.ni.forEach((t=>{t.disablePostbacks()}))}enableActions(){super.enableActions(),this.ni.forEach((t=>{t.enableActions()}))}enablePostbacks(){super.enablePostbacks(),this.ni.forEach((t=>{t.enablePostbacks()}))}render(){const t=this.util,e=this.settings.name,i=[`card-message-${this.ai}`],s=super.render();if(s.querySelector(`.${e}-icon-wrapper`)){i.push("has-message-icon");const o=s.querySelector(`.${e}-content-wrapper`);t.addCSSClass(o,"with-icon")}return t.addCSSClass(s,...i),s}setCardsScrollDirection(){this.li="rtl"===getComputedStyle(this.ui).direction}getContent(){const t=this.util,e=this.ci,i=t.createDiv(["card-message-content"]),s=t.createDiv(["card-message-cards"]);let o=!0;if(this.ni.forEach((t=>{t.onActionClick=this.handleOnActionClick.bind(this);const e=t.render();o&&t.hasActions()&&(this.firstActionButton=t.getFirstActionButton(),o=!1),s.appendChild(e)})),i.appendChild(s),"horizontal"===this.ai&&e>1){let t;i.appendChild(this.pi()),this.di=0,s.addEventListener("scroll",(()=>{window.clearTimeout(t),t=window.setTimeout((()=>{let t=0;for(let i=0;i<e;i++){const o=this.li?e-i-1:i,r=s.children[o];if(s.scrollLeft<=r.offsetLeft+5){t=o;break}}t!==this.di&&(this.di=t,this.gi())}),100)})),window.addEventListener("resize",Ze((()=>{this.mi()}),500))}this.fi=i,this.ui=s;const r=this.settings.name;return new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&this.mi()}))}),{root:document.querySelector(`.${r}-conversation`)}).observe(s),i}pi(){if(!this.bi){const t=this.util,e=this.translations.cardNavNext;this.bi=t.createDiv(["next-wrapper"]);const i=t.createIconButton({css:["round","next"],icon:p,iconCss:[],title:e});i.onclick=this.vi.bind(this),this.bi.appendChild(i)}return this.bi}wi(){if(!this.xi){const t=this.util,e=this.translations.cardNavPrevious;this.xi=t.createDiv(["prev-wrapper"]);const i=t.createIconButton({css:["round","previous"],icon:d,iconCss:[],title:e});i.onclick=this.yi.bind(this),this.xi.appendChild(i)}return this.xi}vi(){this.di<this.ci&&(this.di++,this.gi())}yi(){this.di>0&&(this.di--,this.gi())}gi(){var t,e,i,s;const o=this.ui.children[this.di];o&&(this.ui.scrollLeft=o.offsetLeft-56,0===this.di?null===(t=this.xi)||void 0===t||t.remove():(null===(e=this.xi)||void 0===e?void 0:e.parentElement)||this.fi.prepend(this.wi()),this.di===this.ci-1?null===(i=this.bi)||void 0===i||i.remove():(null===(s=this.bi)||void 0===s?void 0:s.parentElement)||this.fi.appendChild(this.pi()))}mi(){this.ui.scrollWidth===this.ui.offsetWidth?(this.bi&&(this.bi.hidden=!0),this.xi&&(this.xi.hidden=!0)):(this.bi&&(this.bi.hidden=!1),this.xi&&(this.xi.hidden=!1))}}class Yt extends Et{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r);const n=i.location;this.Ke=n.title,this.P=n.url,this.ki=n.longitude,this._i=n.latitude}render(){const t=this.util,e=t.createDiv(["message"]);e.lang=this.locale;const i=t.createDiv(["message-wrapper"]);e.appendChild(i);const s=t.createDiv(["attachment"]),o=t.createDiv(["attachment-placeholder","flex"]),r=t.createDiv(["attachment-icon"]),n=t.createImageIcon({icon:this.settings.icons.shareMenuLocation||O}),a=t.createDiv(["attachment-footer","flex"]),c=t.createLabel(["attachment-title"]);if(c.innerText=this.Ke?this.Ke:`${this._i.toFixed(4)}, ${this.ki.toFixed(4)}`,a.appendChild(c),r.appendChild(n),o.appendChild(r),!this.actions.length){const e=t.createDiv(["attachment-controls"]),i=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:this.settings.icons.externalLink||w,iconCss:[],title:this.translations.openMap}),s=t.createAnchor(this.P||`https://www.google.com/maps/@${this._i},${this.ki},12z`,"",[],this.settings.openLinksInNewWindow,this.settings.linkHandler);i.onclick=()=>{s.click()},e.appendChild(i),a.appendChild(e)}return s.appendChild(o),s.appendChild(a),i.appendChild(this.getContent(s)),e}}class Jt extends Et{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.qe=JSON.stringify(i.payload)}getContent(){const t=this.util.createTextSpan();return t.innerText=this.qe,super.getContent(t)}}class Kt extends Et{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.zi=i.text}getContent(){const t=this.settings,e=this.util,i=this.zi,o=e.createTextDiv(["message-text"]);return this.side===Ot.RIGHT?(0,s.isPostbackPayload)(this.payload)&&Xt(i)?(e.addCSSClass(o,"message-user-postback"),o.innerHTML=i):o.textContent=Qt(i):(o.innerHTML=X(i,e.cssPrefix,t.embeddedVideo),t.linkHandler?De(o,t.linkHandler):t.openLinksInNewWindow&&Re(o)),super.getContent(o)}}const Xt=t=>!!t&&/^<img\s+/i.test(t),Qt=t=>t.replace(/&#x([0-9a-f]+);/gi,((t,e)=>String.fromCharCode(parseInt(e,16)))),te="start",ee="end";class ie extends Et{constructor(t,e,i,s,o,r){var n;super(t,e,i,s,o,r),this.Mi="",this.Si=!0,this.Ci=i.streamState,this.zi=i.text,this.Mi=i.text,this.Si=null!==(n=r.isFresh)&&void 0!==n?n:this.Si;let a="";this.Ti=se((i=>{a+=i;const s=a.length%20?a:X(a,e.cssPrefix,t.embeddedVideo),o=Ve(s);this.textElement&&(this.textElement instanceof HTMLInputElement||this.textElement instanceof HTMLTextAreaElement?(this.textElement.focus(),this.textElement.value=o,this.textElement instanceof HTMLTextAreaElement&&(this.textElement.scrollTop=this.textElement.scrollHeight)):this.textElement.innerHTML=o)}),(()=>{var t;this.Ci===ee&&(this.isCoPilot?this.showDone():(this.zi=null===(t=this.textElement)||void 0===t?void 0:t.innerHTML,this.render()))}),t.typingDelay||1)}update(t){const e=t.streamState;switch(this.Ci=e,e){case te:this.renderClean(t),this.isCoPilot&&this.Ti.push(t.text.split(""));break;case"running":this.Ti.push(t.text.split("")),this.Mi=t.text;break;case ee:if(this.Si){const e=this.Mi;if(this.Mi="",e.length){const i=t.text.lastIndexOf(e);if(i>=0){const s=t.text.substring(i+e.length);this.Ti.push(s.split("")),this.isCoPilot||this.setAddOnComponents(t);break}}}this.renderClean(t)}}getContent(){var t;const e=this.settings,i=this.util,s=i.createTextDiv();return s.setAttribute("aria-hidden","true"),!this.Si||this.Ci!==te&&this.textElement?(s.innerHTML=X(this.zi,i.cssPrefix,e.embeddedVideo),this.Ci===ee&&s.removeAttribute("aria-hidden"),e.linkHandler?De(s,e.linkHandler):e.openLinksInNewWindow&&Re(s)):(this.textElement=s,this.Ti.push(null===(t=this.zi)||void 0===t?void 0:t.split(""))),super.getContent(s)}renderClean(t){this.Ti.clear(),this.zi=t.text,this.isCoPilot||(this.setAddOnComponents(t),this.render())}setAddOnComponents(t){this.headerText=t.headerText,t.actions&&(this.actions=this.buildActions(t.actions)),this.footerText=t.footerText,t.footerForm&&(this.footerFormComponent=je(this.util,t.footerForm,this.settings,this.options)),t.globalActions&&(this.globalActions=this.buildActions(t.globalActions)),this.Ye=Y(this.actions).concat(Y(this.globalActions))}}const se=(t,e,i)=>{const s=[];let o=!0;const r=()=>{if(!s.length)return o=!0,void setTimeout((()=>e()));setTimeout((()=>{s.length&&(t(s.shift()),r())}),i)};return{push:t=>{s.push(...t),o&&(o=!1,r())},clear:()=>{s.length=0}}};class oe extends Kt{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.$i=0,this.Ii=i.actions,this.ratingId=Date.now()}focusFirstAction(){this.Ai[0].focus()}disableActions(){this.Oi(!0),super.disableActions()}disablePostbacks(){this.Oi(!0),super.disablePostbacks()}enableActions(){this.Oi(!1),super.enableActions()}enablePostbacks(){this.Oi(!1),super.enablePostbacks()}highlightRating(t){if(!this.actions||!this.Ai)return;const e=this.util,i="active",s="string"==typeof t?this.Ei(t):t;for(let t=1;t<=this.Ai.length;t++){const o=this.Ai[t-1];if(!o)break;s&&t<=s||0===s&&t<=this.$i?e.addCSSClass(o,i):e.removeCSSClass(o,i)}}getActions(){const t=this.util,e=this.settings,i=e.i18n[e.locale].ratingStar,s=t.createDiv(["rating-wrapper"]);this.Ai=this.Ii.map((o=>{const r=t.createElement("input",["star-input","rating-hidden"]);r.id=`rating-${o.label}-${this.ratingId}`,r.type="radio",r.name=`rating-${this.ratingId}`,r.value=o.label;const n=t.createLabel(["star-label"]);n.htmlFor=`rating-${o.label}-${this.ratingId}`,n.setAttribute("data-rating",o.label);const a=t.createTextSpan(["rating-hidden"]),c=i.replace("{0}",`${o.label}`);a.innerText=c;const h=e.icons&&e.icons.rating||C,l=t.createImageIcon({icon:h,iconCss:["rating-star-icon"]});return n.appendChild(a),n.appendChild(l),r.onfocus=()=>{r.disabled||(this.$i=this.Li(r))},r.onkeydown=t=>{"Enter"===t.key&&this.Pi(o)},n.onclick=()=>{r.disabled||(this.$i=this.Li(n),this.Pi(o))},n.onmouseover=()=>{r.disabled||this.Li(n)},n.onmouseleave=()=>{r.disabled||this.Li(null)},s.appendChild(r),s.appendChild(n),r})),this.$i&&this.Li(null);const o=t.createDiv(["rating-root"]);return o.appendChild(s),o}Oi(t){this.Ai&&this.Ai.forEach((e=>{e.disabled=t}))}Pi(t){const e={getPayload:()=>Promise.resolve(t.postback),label:t.label,type:t.type};this.handleOnActionClick(e)}Li(t){let e=0;if(t){const i="value"in t?t.value:null==t?void 0:t.getAttribute("data-rating");e=i?parseInt(i,10):0}return this.highlightRating(e),e}Ei(t){let e=0;if(t.match(/^\d+$/)){const i=parseInt(t,10);i>0&&i<=this.actions.length&&(e=i)}return e}}class re extends Et{constructor(t,e,i,s,o,r){super(t,e,i,s,o,r),this.si=[],this.cssPrefix=t.name,this.te=r,this.qe=i}disableActions(){super.disableActions(),this.si.forEach((t=>{t.disable()}))}disablePostbacks(){super.disablePostbacks(),Y(this.si).forEach((t=>{t.disable()}))}enableActions(){super.enableActions(),this.si.forEach((t=>{t.enable()}))}enablePostbacks(){super.enablePostbacks(),Y(this.si).forEach((t=>{t.enable()}))}render(){return super.render()}getHeader(){const t=this.util,e=super.getHeader();return t.addCSSClass(e,"message-header-yellow"),e}getContent(t){const e=this.util,i="message-bubble",o=this.qe.type,r=e.createDiv([i]);o===s.MessageType.Table||o===s.MessageType.TableForm?e.addCSSClass(r,`${i}-tabular-message`):e.addCSSClass(r,`${i}-form-message`,o===s.MessageType.EditForm?"edit-form-message":""),t&&r.appendChild(t);const n=this.getPageStatus();return n&&r.appendChild(n),r}getPageStatus(){const t=this.util;let e;const i=this.qe.paginationInfo;return i&&i.totalCount>i.rangeSize&&(e=t.createTextDiv(["results-page-status"]),e.innerText=i.status),e}}class ne{constructor(t,e,i,o,r,n){this.He=t,this.ii=e,this.ji=i,this.Fi=n,this.isTableField=!1,this.isColumnField=!1,i.displayType===s.DisplayType.Action&&(this.action=At.fromActionPayload(i.action,e,t,o,r))}render(){var t;const e=this.ii,i=this.ji,o="form-message",r=this.He,{alignment:n,label:c,labelFontSize:h,labelFontWeight:l,marginTop:u,onHoverPopupContent:p}=i,d=e.createTextDiv([`${o}-value`]),g=null===(t=i.value)||void 0===t?void 0:t.toString();switch(i.displayType){case s.DisplayType.Link:const t=e.createDiv(),{imageUrl:o,linkLabel:h}=i,l=e.createElement("a",h?[]:["ellipsis"],!0);if(l.href=g,o){const t=e.createImage(o,["video-wrapper"],g);t.alt=h||"",l.appendChild(t),c&&e.addCSSClass(d,"with-top-margin")}else l.innerHTML=h||(0,a.stripHTTP)(g)||"";l.setAttribute("target","_blank"),t.appendChild(l),r.linkHandler?De(t,r.linkHandler):r.openLinksInNewWindow&&Re(t),d.appendChild(l);break;case s.DisplayType.Text:const{fontSize:u,fontWeight:p,truncateAt:m}=i;g&&m?(d.innerHTML=`${g.slice(0,m)}...`,d.title=g):d.innerHTML=g||"",ae(d,u,p,e);break;case s.DisplayType.Media:const f=i.mediaType,b=c&&g;switch(f){case"image":const t=e.createImage(g,["video-wrapper"],g);b&&e.addCSSClass(d,"with-top-margin"),d.appendChild(t);break;case"video":ct(g,e.cssPrefix)?(d.innerHTML=X(g,e.cssPrefix,r.embeddedVideo),r.embeddedVideo&&b&&e.addCSSClass(d,"with-top-margin")):d.appendChild(le(f,g,d,b,e));break;case"audio":d.appendChild(le(f,g,d,b,e))}break;case s.DisplayType.Action:e.addCSSClass(d,"flex"),d.style.justifyContent=n,c&&e.addCSSClass(d,"with-top-margin"),this.action.onActionClick=this.onActionClick,d.appendChild(this.action.render())}if(this.isTableField)return he(d,p,r,e),d;const m=`${o}-field`,f=[m,`${m}-col-${this.Fi}`],b=e.createDiv(f),v=e.createDiv([`${o}-key`]);return v.innerHTML=c||"",n&&(v.style.textAlign=n,d.style.textAlign=n),ae(v,h,l,e),b.appendChild(v),b.appendChild(d),he(b,p,r,e),this.isColumnField?ce(b,u,e):b}disableActions(){this.action.disable()}disablePostbacks(){Y([this.action]).forEach((t=>{t.disable()}))}enableActions(){this.action.enable()}enablePostbacks(){Y([this.action]).forEach((t=>{t.enable()}))}}function ae(t,e,i,s){switch(e){case"large":s.addCSSClass(t,"font-size-lg");break;case"small":s.addCSSClass(t,"font-size-sm");break;default:s.addCSSClass(t,"font-size-md")}switch(i){case"bold":s.addCSSClass(t,"font-weight-bold");break;case"light":s.addCSSClass(t,"font-weight-light");break;default:s.addCSSClass(t,"font-weight-md")}}function ce(t,e,i){return"large"===e?i.addCSSClass(t,"margin-top-lg"):"none"!==e&&i.addCSSClass(t,"margin-top-md"),t}function he(t,e,i,s){if(e){const o=$e.fromMessage(i,s,{messagePayload:e});if(o){const e=s.createDiv(),i=s.createDiv(["popupContent"]);i.appendChild(o.render()),i.setAttribute("role","tooltip"),e.appendChild(i),t.style.cursor="pointer",t.appendChild(e)}}}const le=(t,e,i,s,o)=>{const r=o.createMedia(t,e,["video-wrapper"]);return r.controls=!0,r.preload="metadata",s&&o.addCSSClass(i,"with-top-margin"),r};class ue extends re{getContent(){const t=this.util,e=this.settings,i=this.qe,s="form-message",o=t.createDiv([s]);i.formColumns>2&&(i.formColumns=2);const r=i.forms;return r.forEach(((n,a)=>{if(n.title){const e=t.createTextDiv([`${s}-header`]);e.innerText=n.title,o.appendChild(e)}const[c,h]=pe(t,n,i.formColumns,e,this.handleOnActionClick.bind(this),this.te);this.si=this.si.concat(h);const l=a+1;l===r.length||r[l].title||t.addCSSClass(c,"with-border"),o.appendChild(c)})),super.getContent(o)}}function pe(t,e,i,o,r,n){var a;const c="form-message",h=`${c}-actions-col`,l=null===(a=e.channelExtensions)||void 0===a?void 0:a.c2kReferences,u=t.createDiv([`${c}-item`,l?"c2k-reference":""]),p=qe(e,!0),d=function(t,e,i,s,o,r){var n;const a=[];if((null===(n=t.actions)||void 0===n?void 0:n.length)>0)for(const n of t.actions){const t=At.fromActionPayload(n,e,i,o,r);t&&(t.onActionClick=s,a.push(t))}return a}(e,t,o,r,p,n);let g;if(d.length&&(g=function(t,e,i,s){const o=e.createDiv("horizontal"!==i.formActionsLayout?["form-actions","col",s]:["form-actions"]);for(const e of t){const t=e.render();o.appendChild(t)}return o}(d,t,o,h)),(0,s.isFormEntityWithRows)(e)?e.formRows.forEach(((e,i)=>{const a=de(e,d,t,o,p,r,n),c=e.columns.length;if(e.columns.forEach((e=>{const i=me(e,t);e.fields.forEach((a=>{if((0,s.isReadOnlyField)(a)){const s=new ne(o,t,a,p,n);s.isColumnField=!0,s.onActionClick=r,s.action&&d.push(s.action),fe(e.width,a.displayType,i,c),i.appendChild(s.render())}})),a.appendChild(i)})),l&&0!==i){const e=t.createTextSpan(["delimiter"]);e.innerHTML="&bull;",a.firstElementChild.firstElementChild.lastElementChild.prepend(e)}u.appendChild(a)})):e.fields.forEach((e=>{const s=new ne(o,t,e,p,n,i);s.onActionClick=r,s.action&&d.push(s.action),u.appendChild(s.render())})),g&&u.appendChild(g),e.selectAction){ge(At.fromActionPayload(e.selectAction,t,o,p,n),d,r,u,e.selectAction.label)}return[u,d]}function de(t,e,i,s,o,r,n){const a=i.createDiv(["form-row",t.separator?"separator":""]);if(t.selectAction){ge(At.fromActionPayload(t.selectAction,i,s,o,n),e,r,a,t.selectAction.label)}return a}function ge(t,e,i,s,o){t&&(e.push(t),t.onActionClick=i,s.onclick=e=>t.handleOnClick(e),s.title=o||"",s.style.cursor="pointer")}function me(t,e){const{width:i,verticalAlignment:s}=t,o=e.createDiv(["form-row-column",i||""]);return"center"===s?e.addCSSClass(o,"align-center"):"bottom"===s?e.addCSSClass(o,"align-end"):e.addCSSClass(o,"align-start"),o}function fe(t,e,i,o){"stretch"===t||e!==s.DisplayType.Media||i.style.maxWidth||(i.style.maxWidth=`calc((100% - ${16*(o-1)}px)/${o})`)}const be="aria-expanded";class ve extends re{constructor(){super(...arguments),this.Vi=0,this.Hi=0,this.Di=[],this.Ri=new $t("EditFormMessageComponent"),this.Ni={}}disableActions(){super.disableActions(),we(this.Ui,this.Di,this.util)}disablePostbacks(){super.disablePostbacks(),we(this.Ui,this.Di,this.util)}enableActions(){super.enableActions(),we(this.Ui,this.Di,this.util,!1)}enablePostbacks(){super.enablePostbacks(),we(this.Ui,this.Di,this.util,!1)}getContent(){const t=this.qe,e=this.settings,i=this.util,o="form-message",r=`${o}-item`,n=i.createDiv([o]),a=i.createDiv([r]);if(t.title){const e=i.createTextDiv([`${o}-header`]);e.innerText=t.title,n.appendChild(e)}return(0,s.isEditFormPayloadWithFields)(t)?(t.formColumns>2&&(t.formColumns=2),t.fields.filter((t=>t)).forEach((e=>{a.appendChild(this.Bi(e,o,!1,t.formColumns))}))):t.formRows.forEach((t=>{const s=de(t,this.si,i,e,this.shareText,this.handleOnActionClick.bind(this),this.options),r=t.columns.length;t.columns.forEach((t=>{const e=me(t,i);t.fields.filter((t=>t)).forEach((i=>{e.appendChild(this.Bi(i,o,!0)),fe(t.width,i.displayType,e,r)})),s.appendChild(e)})),a.appendChild(s)})),this.actions.concat(this.si).some((t=>t.getActionType()===s.ActionType.SubmitForm))||this.Ri.error("Payload does not contain submit-form action"),this.Wi(a,t.errorMessage||(this.Hi&&this.Vi>1?this.translations.editFormErrorMessage:""),!0),n.appendChild(a),this.Zi=a,super.getContent(n)}validateForm(){var t;let e=!0;return null===(t=this.Ui)||void 0===t||t.remove(),this.Di.forEach((t=>{e=this.Gi(t)&&e})),!e&&this.Vi>1&&this.Wi(this.Zi,this.translations.editFormErrorMessage,!0),e}getSubmittedFields(){return this.Di.filter((t=>{const e=t.tagName.toLowerCase();return"textarea"===e&&(this.Ni[t.id]=t.value),"input"===e})).forEach((t=>{const e=t;switch(e.type){case"checkbox":this.Ni[e.id]=e.checked?e.getAttribute("valueOn"):e.getAttribute("valueOff");break;case"number":this.Ni[e.id]=e.valueAsNumber;break;default:this.Ni[e.id]=e.value}})),this.Ni}Bi(t,e,i,o){const r=this.shareText,n=this.util;if(this.Vi++,(0,s.isReadOnlyField)(t)){const e=new ne(this.settings,n,t,r,this.options,o);return e.isColumnField=i,e.onActionClick=this.handleOnActionClick.bind(this),e.action&&this.si.push(e.action),e.render()}return i?ce(this.qi(t,o,e,n),t.marginTop,n):this.qi(t,o,e,n)}qi(t,e,i,o){var r,n,c,h;const u=`${i}-field`,p=[u,`${u}-col-${e}`,`edit-${u}`],d=o.createDiv(p),g=o.createDiv([`${i}-key`,"with-margin"]),{labelFontSize:f,labelFontWeight:b,id:v,displayType:w,placeholder:x,required:y,clientErrorMessage:k,serverErrorMessage:_,autoSubmit:z}=t;let M,S,C;switch(g.innerHTML=t.label||"",ae(g,f,b,o),d.appendChild(g),w){case s.DisplayType.SingleSelect:const e=t;if(S=e.defaultValue,C=e.layoutStyle,S&&(this.Ni[v]=S),C&&"list"!==C)if("radioGroup"===C){const t=o.createElement("form",[`${i}-value`,"form-container","col"]);o.setAttributes(t,{id:v,ariaLabel:w,errorMsg:k}),t.onclick=t=>t.stopPropagation(),e.options.forEach((e=>{const i=o.createInputElement({type:"radio",name:v,value:e.label,required:y,checked:e.value===S},["radio-input"]);i.onchange=()=>{i.checked&&(this.Ni[v]=e.value),this.Yi(v,z,t)};const s=o.createLabel();s.innerText=e.label,s.prepend(i),t.appendChild(s)})),this.Di.push(t),d.appendChild(t),this.Wi(t,_)}else this.Ri.error(`Payload contains wrong layout style:${C} for single select field`);else{const t=o.createDiv(["select-wrapper",`${i}-value`]),s=o.createInputElement({type:"text",placeholder:x,required:y,id:v,autocomplete:"off"},[`${i}-value`]),n=o.createDiv(),c=o.createDiv(["listbox","popup","none"]),h=o.createElement("ul",["single-select-list"]),u=h.getElementsByTagName("li"),p=o.createIconButton({css:["select-icon"],icon:l,iconCss:[],title:""}),g=e=>{"true"!==t.getAttribute(be)||n.contains(e.target)||(b||(s.value=""),f(!1))},m=()=>{"false"===t.getAttribute(be)&&(t.setAttribute(be,"true"),o.removeCSSClass(c,"none"),setTimeout((()=>document.addEventListener("click",g))),s.focus())},f=(e=!0)=>{"true"===t.getAttribute(be)&&(b&&(s.value=b.textContent||b.innerText),t.setAttribute(be,"false"),o.addCSSClass(c,"none"),document.removeEventListener("click",g),this.Ji("",u,M),e&&s.focus())};let b,M=[];o.setAttributes(t,{errorMsg:k}),t.setAttribute(be,"false"),t.setAttribute("aria-label",w),t.onclick=t=>{t.stopPropagation(),m()},t.oninput=()=>{this.Ji(s.value,u,M)?m():f()},t.onkeydown=t=>{var e;const i=t.key;i===a.KeyCode.Down||i===a.KeyCode.Up?!b||b.classList.contains(`${this.cssPrefix}-none`)?null===(e=M[0])||void 0===e||e.focus():null==b||b.focus():i!==a.KeyCode.Esc&&i!==a.KeyCode.Tab||f()},s.onfocus=()=>o.addCSSClass(t,"focused"),s.onblur=()=>o.removeCSSClass(t,"focused"),p.onclick=e=>{e.stopPropagation(),"true"===t.getAttribute(be)?f():m()},null===(r=e.options)||void 0===r||r.forEach((e=>{const i=o.createListItem(e.label,e.label,e.label,"","",(()=>{o.addCSSClass(i,"selected"),b&&o.removeCSSClass(b,"selected"),b=i,f(),this.Ni[v]=e.value,this.Yi(v,z,t)}),!1,!1);i.onkeydown=t=>this.Ki(t,i,h,s,M),e.value===S&&(o.addCSSClass(i,"selected"),b=i,s.value=e.label),h.appendChild(i)})),M=Array.from(u),n.onclick=t=>t.stopPropagation(),t.appendChild(s),t.appendChild(p),c.appendChild(h),n.appendChild(c),d.appendChild(t),d.appendChild(n),this.Di.push(t),this.Wi(s,_)}break;case s.DisplayType.MultiSelect:const u=t;if(S=u.defaultValue,C=u.layoutStyle,this.Ni[v]=S||[],C&&"list"!==C)if("checkboxes"===C){const t=o.createElement("form",[`${i}-value`,"form-container","col"]);o.setAttributes(t,{id:v,ariaLabel:w,errorMsg:k,ariaRequired:y?"true":""}),t.onclick=t=>t.stopPropagation(),u.options.forEach((e=>{const i=o.createInputElement({type:"checkbox",name:v,value:e.label,checked:null==S?void 0:S.includes(e.value),required:y},["radio-input"]),s=o.createLabel();s.innerText=e.label,s.prepend(i),i.onchange=()=>{if(i.checked)this.Ni[v].push(e.value);else{const t=this.Ni[v];t.splice(t.indexOf(e.value),1)}this.Yi(v,z,t)},t.appendChild(s)})),this.Di.push(t),d.appendChild(t),this.Wi(t,_)}else this.Ri.error(`Payload contains wrong layout style:${C} for multi select field`);else{const t=o.createDiv([`${i}-value`,"text-field-container"]),e=o.createElement("ul",["selected-options"]),s=o.createDiv(),r=o.createDiv(["listbox","popup","none"]),n=[],c=o.createDiv(["filter-message-box"]),h=o.createDiv(["filter-message-text","none"]),l=o.createInputElement({type:"text"},[`${i}-value`,"listbox-search","none"]),p=o.createElement("ul",["multi-select-list"]),g=p.getElementsByTagName("li"),f=o.createDiv(["search-icon-wrapper","none"]),b=o.createImageIcon({icon:T,iconCss:["search-icon"]});h.textContent=this.translations.noResultText,c.appendChild(h),l.oninput=()=>this.Ji(l.value,g,n)?o.addCSSClass(h,"none"):o.removeCSSClass(h,"none"),l.onkeydown=e=>{var i;const s=e.key;s===a.KeyCode.Down?(this.Ji(l.value,g,n),null===(i=n[0])||void 0===i||i.focus()):s!==a.KeyCode.Esc&&s!==a.KeyCode.Tab||t.click()},x&&e.setAttribute("data-placeholder",x),t.setAttribute(be,"false");const w=e=>{"true"!==t.getAttribute(be)||s.contains(e.target)||M()},M=()=>{t.setAttribute(be,"false"),o.addCSSClass(r,"none"),document.removeEventListener("click",w),l.value="",this.Ji(l.value,g,n),o.addCSSClass(l,"none"),o.addCSSClass(f,"none"),o.addCSSClass(h,"none")};t.onclick=e=>{if(e.stopPropagation(),"true"===t.getAttribute(be))M(),t.focus();else{t.setAttribute(be,"true"),o.removeCSSClass(r,"none");const e=p.firstElementChild;e?e.focus():o.removeCSSClass(h,"none"),setTimeout((()=>document.addEventListener("click",w)))}},t.onkeydown=e=>{const i=e.code;e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||i===a.KeyCode.Esc||i===a.KeyCode.Tab||(t.click(),o.removeCSSClass(l,"none"),o.removeCSSClass(f,"none"),l.focus())},t.setAttribute("aria-required",y?"true":"false"),t.tabIndex=0,k&&t.setAttribute("data-error",k),u.options.forEach((i=>{const s=s=>{const r=o.createDiv(["multi-select-option"]);r.innerText=i.label;const n=o.createImageIcon({icon:m,iconCss:["opt-close"]});n.onclick=()=>{e.removeChild(r),p.appendChild(s);const o=this.Ni[v];o.splice(o.indexOf(i.value),1),this.Yi(v,z,t)},r.appendChild(n),r.onclick=e=>{e.stopPropagation(),"true"===t.getAttribute(be)&&t.click()},e.appendChild(r)},r=o.createListItem(i.label,i.label,i.label,"","",(()=>{t.click(),p.removeChild(r),this.Ni[v].push(i.value),s(r),this.Yi(v,z,t)}),!1,!1);r.onkeydown=e=>this.Ki(e,r,p,t,n),(null==S?void 0:S.includes(i.value))?s(r):p.appendChild(r)})),s.onclick=t=>t.stopPropagation(),t.appendChild(e),this.Di.push(t),d.appendChild(t),f.appendChild(b),r.appendChild(c),r.appendChild(l),r.appendChild(f),r.appendChild(p),s.appendChild(r),d.appendChild(s),this.Wi(t,_)}break;case s.DisplayType.Toggle:const p=t,g=o.createLabel([`${i}-value`,"toggle"]);g.tabIndex=0,g.onclick=t=>t.stopPropagation(),M=o.createInputElement({id:v,placeholder:x,required:y,type:"checkbox",checked:p.defaultValue===p.valueOn,errorMsg:k,valueOn:p.valueOn,valueOff:p.valueOff});const f=p.labelOn||p.valueOn,b=p.labelOff||p.valueOff;M.setAttribute("aria-label",M.checked?f:b),M.oninput=()=>{M.setAttribute("aria-label",M.checked?f:b),this.Yi(v,z,M)},g.appendChild(M),g.appendChild(o.createDiv(["round-slider"])),d.appendChild(g),this.Wi(M.parentElement,_);break;case s.DisplayType.DatePicker:const $=t;M=o.createInputElement({type:"date",id:v,title:x,required:y,defaultValue:$.defaultValue,min:$.minDate,max:$.maxDate,errorMsg:k},[`${i}-value`]);break;case s.DisplayType.TimePicker:const I=t;M=o.createInputElement({type:"time",id:v,title:x,required:y,defaultValue:I.defaultValue,min:I.minTime,max:I.maxTime,errorMsg:k},[`${i}-value`]);break;case s.DisplayType.TextInput:const A=t;if(A.multiLine){const t=o.createElement("textarea",[`${i}-value`],!0);o.setAttributes(t,{id:v,required:y,minLength:A.minLength,maxLength:A.maxLength,defaultValue:A.defaultValue,placeholder:A.placeholder,errorMsg:k}),t.rows=3,t.onchange=()=>this.Yi(v,z,t),t.onclick=t=>t.stopPropagation(),d.appendChild(t),this.Di.push(t),this.Wi(t,_)}else M=o.createInputElement({type:A.inputStyle||"text",id:v,placeholder:x,required:y,defaultValue:A.defaultValue,errorMsg:k,minLength:A.minLength,maxLength:A.maxLength,pattern:A.validationRegularExpression},[`${i}-value`]);break;case s.DisplayType.NumberInput:const O=t;M=o.createInputElement({type:"number",id:v,placeholder:x,required:y,defaultValue:null===(n=O.defaultValue)||void 0===n?void 0:n.toString(),min:null===(c=O.minValue)||void 0===c?void 0:c.toString(),max:null===(h=O.maxValue)||void 0===h?void 0:h.toString(),errorMsg:k},[`${i}-value`]);break;default:this.Ri.error(`Payload contains wrong display type:${w} for editable field`)}return M&&("checkbox"!==M.type&&(d.appendChild(M),this.Wi(M,_),M.onchange=()=>this.Yi(v,z,M),M.onclick=t=>t.stopPropagation()),this.Di.push(M)),d}Gi(t,e=!1){const i=t.dataset.error,o=()=>{e||("SPAN"===(null==n?void 0:n.tagName)&&(this.util.removeCSSClass(t.parentElement,"error"),n.remove(),this.Hi--),a||this.Wi(t,r||this.translations.editFieldErrorMessage))};let r,n=t.nextElementSibling,a=!0;switch(t.tagName.toLowerCase()){case"form":const e=t,c=e.getAttribute("aria-label");if(c===s.DisplayType.MultiSelect&&"true"===e.ariaRequired){e.querySelectorAll("input[type='checkbox']:checked").length||(a=!1,r=i||e.querySelector("input").validationMessage)}else c!==s.DisplayType.SingleSelect||e.checkValidity()||(a=!1,r=i||e.querySelector("input").validationMessage);break;case"input":const h=t;"checkbox"===h.type?n=n.parentElement.nextElementSibling:h.checkValidity()||(r=i||h.validationMessage,a=!1);break;case"textarea":const l=t;l.checkValidity()||(r=i||l.validationMessage,a=!1);break;case"div":const u=t;n=n.nextElementSibling,u.getAttribute("aria-label")===s.DisplayType.SingleSelect?setTimeout((()=>{const t=u.firstElementChild;return t.checkValidity()||(a=!1,r=i||t.validationMessage),o(),a})):"true"===u.getAttribute("aria-required")&&(r=i,a=!!u.firstElementChild.firstElementChild)}return o(),a}Ji(t,e,i){const s=this.util;i.length=0;for(let o=0;o<e.length;o++){const r=e[o],n=r.querySelector("span"),a=r.textContent||r.innerText;a.toLowerCase().indexOf(t.toLowerCase())<0?(s.addCSSClass(r,"none"),n.innerHTML=a.replace(/(<b>)|(<\/b>)/g,"")):(n.innerHTML=t?a.replace(new RegExp(`${t}`,"gi"),"<b>$&</b>"):a.replace(/(<b>)|(<\/b>)/g,""),s.removeCSSClass(r,"none"),i.push(r))}return i.length>0}Ki(t,e,i,s,o){var r,n,c,h;const l=this.cssPrefix,u=o.indexOf(e),p=o.length;let d=!1;if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.shiftKey&&t.code===a.KeyCode.Tab)s.click();else switch(t.code){case a.KeyCode.Return:case a.KeyCode.Space:e.click(),d=!0;break;case a.KeyCode.Esc:case a.KeyCode.Tab:s.click(),t.code===a.KeyCode.Esc&&(s.focus(),d=!0);break;case a.KeyCode.Up:const g=e.previousElementSibling||i.lastElementChild;g.classList.contains(`${l}-none`)?null===(r=o[(u+p-1)%p])||void 0===r||r.focus():g.focus(),d=!0;break;case a.KeyCode.Down:const m=e.nextElementSibling||i.firstElementChild;m.classList.contains(`${l}-none`)?null===(n=o[(u+1)%p])||void 0===n||n.focus():m.focus(),d=!0;break;case a.KeyCode.Home:case a.KeyCode.PageUp:const f=i.firstElementChild;f.classList.contains(`${l}-none`)?null===(c=o[0])||void 0===c||c.focus():f.focus(),d=!0;break;case a.KeyCode.End:case a.KeyCode.PageDown:const b=i.lastElementChild;b.classList.contains(`${l}-none`)?null===(h=o[p-1])||void 0===h||h.focus():b.focus(),d=!0;break;default:if(s instanceof HTMLInputElement)s.focus();else{const t=i.previousElementSibling,e=t.previousElementSibling,s=this.util;s.removeCSSClass(e,"none"),s.removeCSSClass(t,"none"),e.focus()}}d&&(t.stopPropagation(),t.preventDefault())}}Yi(t,e,i){if(this.Gi(i)&&e){const e=JSON.parse(JSON.stringify(this.getSubmittedFields()));this.Di.forEach((t=>{this.Gi(t,!0)||delete e[t.id]})),Object.keys(e).forEach((t=>{const i=e[t];Array.isArray(i)?0===i.length&&delete e[t]:0===i||i||delete e[t]}));const i=this.settings.sdkMetadata?Object.assign({version:Ft},this.settings.sdkMetadata):{version:Ft};this.te.webCore.sendMessage((0,s.buildUserMessage)({submittedFields:e,partialSubmitField:t,type:s.MessageType.FormSubmission}),{sdkMetadata:i}).then((()=>{const t=this.settings.disablePastActions;"all"===t?this.disableActions():"postback"===t&&this.disablePostbacks()})).catch((t=>this.Ri.error("[partialSubmit] Failed to send postback message:",t)))}}Wi(t,e,i=!1){if(e){const s=this.util,o=s.createTextSpan(["field-error",i?"form-error":""]),r=s.createImageIcon({icon:v,iconCss:["form-error-icon"]}),n=s.createTextSpan(["error-text"]);if(n.innerText=e,o.appendChild(r),o.appendChild(n),i)t.appendChild(o),this.Ui=o;else{const e=t.parentElement;s.addCSSClass(e,"error"),e.appendChild(o),this.Hi++}}}}function we(t,e,i,s=!0){t&&(s?i.addCSSClass(t,"disabled"):i.removeCSSClass(t,"disabled")),e.forEach((t=>{switch(t.tagName.toLowerCase()){case"form":const e=t.getElementsByTagName("input");s?i.addCSSClass(t,"disabled"):i.removeCSSClass(t,"disabled");for(let t=0;t<e.length;t++){e[t].disabled=s}break;case"input":const o=t;o.disabled=s,"checkbox"===o.type&&(s?i.addCSSClass(t.parentElement,"disabled"):i.removeCSSClass(t.parentElement,"disabled"));break;case"textarea":t.disabled=s;break;case"div":s?(i.addCSSClass(t,"disabled"),i.addCSSClass(t.parentElement,"disabled")):(i.removeCSSClass(t,"disabled"),i.removeCSSClass(t.parentElement,"disabled"))}}))}const xe=100;class ye extends re{getContent(){const t=this.util,e=this.qe,i=_e(e.headings),s="table-message",o=t.createDiv([`${s}-wrapper`]),r=t.createElement("table",[s]);o.appendChild(r);const n=t.createElement("tr",[`${s}-headings`]);return i.forEach((e=>{const i=ke(t,[`${s}-heading`],e.width,e.alignment);i.innerText=e.label,n.appendChild(i)})),r.appendChild(n),e.rows.forEach((e=>{const o=t.createElement("tr",[`${s}-row`]);if(e.selectAction){ge(At.fromActionPayload(e.selectAction,t,this.settings,this.shareText,this.options),this.si,this.handleOnActionClick.bind(this),o,e.selectAction.label)}e.fields.forEach(((e,r)=>{const n=ke(t,[`${s}-item`],i[r].width,e.alignment),a=new ne(this.settings,t,e,this.shareText,this.options);a.isTableField=!0,a.onActionClick=this.handleOnActionClick.bind(this),a.action&&this.si.push(a.action),n.appendChild(a.render()),o.appendChild(n)})),r.appendChild(o)})),super.getContent(o)}}function ke(t,e,i,s){const o=t.createElement("td",e,!0);return o.style.textAlign=s,o.style.width=`${i}%`,o}function _e(t){let e;if(t.every((t=>!t.width||t.width>=0&&t.width<=xe))){let i=0,s=0;if(t.forEach((t=>{t.width?s+=t.width:i++})),i)if(s<xe){const o=(xe-s)/i;e=t.map((t=>(t.width||(t.width=o),t)))}else e=ze(t);else if(s===xe)e=t;else{const i=xe/s;e=t.map((t=>(t.width=t.width*i,t)))}}else e=ze(t);return e}function ze(t){const e=xe/t.length;return t.map((t=>(t.width=e,t)))}class Me extends re{getContent(){const t=this.util,e=this.qe,i=_e(e.headings.concat({alignment:"center",label:""})),s="table-message",o=t.createDiv([`${s}-wrapper`]),r=t.createElement("table",[s,"tableform-message"]);o.appendChild(r);const n=t.createElement("tr",[`${s}-headings`]);i.forEach((e=>{const i=ke(t,[`${s}-heading`],e.width,e.alignment);i.innerText=e.label,n.appendChild(i)})),r.appendChild(n);return n.lastElementChild.style.width="32px",e.rows.forEach(((o,n)=>{const a=t.createElement("tr",[`${s}-row`]);o.fields.forEach(((e,o)=>{const r=ke(t,[`${s}-item`],i[o].width,e.alignment),n=new ne(this.settings,t,e,this.shareText,this.options);n.isTableField=!0,n.onActionClick=this.handleOnActionClick.bind(this),n.action&&this.si.push(n.action),r.appendChild(n.render()),a.appendChild(r)})),e.formColumns>2&&(e.formColumns=2);const c=e.forms[n],h=ke(t,[`${s}-item`,"button-cell"]),l=t.createIconButton({css:[`${s}-item`,`${s}-item-form-toggle`],icon:u,iconCss:[],title:c.title||""});h.appendChild(l),a.appendChild(h);const p="none",d="rotate-180",[g,m]=pe(t,c,e.formColumns,this.settings,this.handleOnActionClick.bind(this),this.te);this.si=this.si.concat(m),t.addCSSClass(g,p);let f=!1;a.onclick=()=>{f?(t.addCSSClass(g,p),t.removeCSSClass(l,d)):(t.removeCSSClass(g,p),t.addCSSClass(l,d)),f=!f},r.appendChild(a),r.appendChild(g)})),super.getContent(o)}}function Se(t){return!!t.source}function Ce(t){if(t.msgId)return t.msgId;const e=JSON.stringify(t.messagePayload);return`${Te(e)}`}const Te=t=>{let e=0,i=0;const s=Math.pow(9,9);for(;e<t.length;)i=Math.imul(i^t.charCodeAt(e++),s);return i^i>>>9};class $e{static fromMessage(t,e,i,o){let r,n;Se(i)?(r=Ot.LEFT,n=i.source||s.SkillMessageSource.Bot):r=Ot.RIGHT;const a=i.messagePayload;switch(a.type){case s.MessageType.Postback:case s.MessageType.Text:return a.channelExtensions&&"stars"===a.channelExtensions.displayType?new oe(t,e,a,r,n,o):new Kt(t,e,a,r,n,o);case s.MessageType.TextStream:return new ie(t,e,a,r,n,o);case s.MessageType.Attachment:return new Zt(t,e,a,r,n,o);case s.MessageType.Card:return new qt(t,e,a,r,n,o);case s.MessageType.Location:return new Yt(t,e,a,r,n,o);case s.MessageType.Table:return new ye(t,e,a,r,n,o);case s.MessageType.Form:return new ue(t,e,a,r,n,o);case s.MessageType.TableForm:return new Me(t,e,a,r,n,o);case s.MessageType.EditForm:return new ve(t,e,a,r,n,o);case s.MessageType.Raw:return new Jt(t,e,a,r,n,o);default:throw Error(`Wrong message payload type:${a.type}`)}}}const Ie={SESSION:"sessionStorage",LOCAL:"localStorage",CUSTOM:"custom"},Ae={CLASSIC:"classic",DEFAULT:"default",REDWOOD_DARK:"redwood-dark"},Oe={AUDIO:"audio",FILE:"file",LOCATION:"location",VISUAL:"visual"},Ee="Please try sharing it again, or else type it in.",Le={badgePosition:{right:"-5px",top:"-5px"},clientAuthEnabled:!1,conversationBeginPosition:"bottom",disablePastActions:"all",displayActionsAsPills:!1,searchBarMode:!1,sidepanel:!1,embedded:!1,embeddedVideo:!0,enableAgentSneakPreview:!1,enableAttachment:!0,enableAttachmentSecurity:!1,enableHeaderActionCollapse:!0,enableAutocomplete:!1,enableAutocompleteClientCache:!1,enableBotAudioResponse:!1,enableDefaultClientResponse:!1,enableClearMessage:!1,enableEndConversation:!0,enableHeadless:!1,enableLocalConversationHistory:!1,enableLongPolling:!1,enableResizableWidget:!1,enableSendTypingStatus:!1,enableSecureConnection:!0,enableSpeech:!1,enableSpeechAutoSend:!0,enableTabsSync:!0,enableTimestamp:!0,enableVoiceOnlyMode:!1,focusOnNewMessage:"input",height:"620px",i18n:{en:{agent:"Agent",agentMessage:"{0} says",attachment_audio:"Audio attachment",attachment_file:"File attachment",attachment_image:"Image attachment",attachment_video:"Video attachment",attachmentAudioFallback:"Your browser does not support embedded audio. However you can {0}download it{/0}.",attachmentVideoFallback:"Your browser does not support embedded video. However you can {0}download it{/0}.",audioResponseOff:"Turn audio response on",audioResponseOn:"Turn audio response off",avatarAgent:"Agent icon",avatarBot:"Bot icon",avatarUser:"User icon",card:"Card {0}",cardImagePlaceholder:"Card image",cardNavNext:"Next card",cardNavPrevious:"Previous card",chatTitle:"Chat",clear:"Clear conversation",close:"Close widget",closing:"Closing",connected:"Connected",connecting:"Connecting",connectionFailureMessage:"Sorry, the assistant is unavailable right now. If the issue persists, contact your help desk.",connectionRetryLabel:"Try Again",copyFailureMessage:"Sorry, copying is not available on this device.",copySuccessMessage:"Successfully copied the response text to the clipboard.",defaultGreetingMessage:"Hey, Nice to meet you! Allow me a moment to get back to you.",defaultWaitMessage:"I'm still working on your request. Thank you for your patience!",defaultSorryMessage:"I'm sorry. I can't get you the right content. Please try again.",disconnected:"Disconnected",download:"Download",editFieldErrorMessage:"Field input is invalid",editFormErrorMessage:"Some of the fields need your attention",endConversation:"End Conversation",endConversationConfirmMessage:"Are you sure you want to end the conversation?",endConversationDescription:"This will also clear your conversation history.",errorSpeechInvalidUrl:"ODA URL for connection is not set. Please pass 'URI' parameter during SDK initialization.",errorSpeechMultipleConnection:"Another voice recognition is ongoing. Can't start a new one.",errorSpeechTooMuchTimeout:"The voice message is too long to recognize and generate text.",errorSpeechUnavailable:"To allow voice messaging, update your browser settings to enable access to your microphone.",errorSpeechUnsupportedLocale:"The locale set for voice recognition is not supported. Please use a valid locale in 'speechLocale' setting.",inputPlaceholder:"Type a message",imageViewerClose:"Close image viewer",imageViewerOpen:"Open image viewer",itemIterator:"Item {0}",language_ar:"Arabic",language_de:"German",language_detect:"Detect Language",language_en:"English",language_es:"Spanish",language_fr:"French",language_hi:"Hindi",language_it:"Italian",language_nl:"Dutch",language_pt:"Portuguese",languageSelectDropdown:"Select chat language",linkField:"Click on the highlighted text to open Link for {0}",noResultText:"No more results",noSpeechTimeout:"The voice could not be detected to perform recognition.",noText:"No",openMap:"Open Map",previousChats:"End of previous conversation",ratingStar:"Rate {0} star",recognitionTextPlaceholder:"Speak your message",relTimeDay:"{0}d ago",relTimeHr:"{0}hr ago",relTimeMin:"{0}min ago",relTimeMoment:"A few seconds ago",relTimeMon:"{0}mth ago",relTimeNow:"Now",relTimeYr:"{0}yr ago",requestLocation:"Requesting location",requestLocationDeniedPermission:"To allow sharing your location, update your browser settings to enable access to your location. You can also type in the location instead.",requestLocationDeniedTimeout:`It is taking too long to get your location. ${Ee}`,requestLocationDeniedUnavailable:`Your current location is unavailable. ${Ee}`,retryMessage:"Try again",send:"Send message",shareAudio:"Share Audio",shareFailureMessage:"Sorry, sharing is not available on this device.",shareFile:"Share File",shareLocation:"Share Location",shareVisual:"Share Image/Video",skillMessage:"Skill says",showOptions:"Show Options",speak:"Speak a message",typingIndicator:"Waiting for response",upload:"Share popup",uploadFailed:"Upload Failed.",uploadFileNetworkFailure:"Upload not completed due to network failure.",uploadFileSizeLimitExceeded:"File size should not be more than {0}MB.",uploadFileSizeZeroByte:"Files of size zero bytes can't be uploaded.",uploadUnauthorized:"Upload request is unauthorized.",uploadUnsupportedFileType:"Unsupported file type.",userMessage:"I say",utteranceGeneric:"Message from skill.",webViewAccessibilityTitle:"In-widget WebView to display links",webViewClose:"Done",webViewErrorInfoDismiss:"Dismiss",webViewErrorInfoText:"Don't see the page? {0}Click here{/0} to open it in a browser.",yesText:"Yes"},ar:{language_ar:"اَلْعَرَبِيَّةُ"},de:{language_de:"Deutsch"},es:{language_es:"Español"},fr:{language_fr:"Français"},hi:{language_hi:"हिन्दी"},it:{language_it:"Italiano"},nl:{language_nl:"Nederlands"},pt:{language_pt:"Português"}},initBotAudioMuted:!0,initMessageOptions:{sendAt:"expand"},disableInlineCSS:!1,isDebugMode:!1,locale:"en",messageCacheSizeLimit:2e3,name:"oda-chat",openChatOnLoad:!1,openLinksInNewWindow:!1,readMark:"✓",reconnectInterval:5,reconnectMaxAttempts:5,shareMenuItems:[Oe.AUDIO,Oe.FILE,Oe.LOCATION,Oe.VISUAL],showConnectionStatus:!1,showPrevConvStatus:!0,showTypingIndicator:!0,speechLocale:s.RecognitionLocale.EN_US,theme:Ae.DEFAULT,timestampMode:"default",defaultGreetingTimeout:5,defaultWaitMessageInterval:5,typingIndicatorTimeout:30,typingStatusInterval:3,typingDelay:0,upgradeToWebSocketInterval:300,webViewConfig:{},width:"375px",actionsLayout:"vertical",globalActionsLayout:"vertical",cardActionsLayout:"vertical",formActionsLayout:"vertical",wcfsEnableEndConversationButtonToClose:!1};function Pe(t,e){if(!e)return Promise.resolve(!1);if(Array.isArray(e)||(e=[e]),!e.length)return Promise.resolve(!1);const i=e.map((t=>{var e;return null===(e=t.lang)||void 0===e?void 0:e.toLowerCase()}));return t.getVoices().then((t=>{let e=!1;const s=t.map((t=>t.lang.toLowerCase()));for(const t of i)if(s.indexOf(t)>=0){e=!0;break}return e}))}function je(t,e,i,o){const r=$e.fromMessage(i,t,{messagePayload:{type:s.MessageType.Form,forms:[e]}},o);return r.onActionClick=o.onMessageActionClicked,r}const Fe=/<br\s*\/?>/g,Ve=t=>t.replace(Fe,"\n");const He=[{match:/<([a-z])/gi,replace:(t,e)=>`&#x3c;${e}`},{match:/<\/([a-z])/gi,replace:(t,e)=>`&#x3c;&#47;${e}`}];function De(t,e){for(let i=0;i<t.childElementCount;i++){const s=t.children[i];if("a"===s.tagName.toLowerCase()){const t=s;t.rel="noreferrer noopener",e.onclick&&(t.onclick=e.onclick.bind(t)),e.target&&(t.target=e.target)}s.hasChildNodes()&&De(s,e)}}function Re(t){for(let e=0;e<t.childElementCount;e++){const i=t.children[e];"a"===i.tagName.toLowerCase()&&(i.onclick=t=>(window.open(i.href,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1)),i.hasChildNodes()&&Re(i)}}const Ne=(()=>{let t=!1;return(e={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:"",synthesisLocales:[]})=>{var i;e.isReset&&(t=!1);let s=e.synthesisLocales;return Array.isArray(s)||(s=[]),e.hasRecognition&&e.hasSynthesis&&(null===(i=e.recognitionLocale)||void 0===i?void 0:i.length)&&(!t&&e.synthesisLocales.length||(t=!0,s=[{lang:e.recognitionLocale}])),s}})();function Ue(t,e){const i=t.toLowerCase();for(const t in e)if(i===t.toLowerCase())return!0;return!1}function Be(t,e){const i=t.toLowerCase().split("-")[0];for(const t in e)if(i===t.toLowerCase())return!0;return!1}function We(t,e){let i=[t.toLowerCase()],s="en";i=i.concat(r()),i.indexOf(s)<0&&i.push(s);for(const t of i){if(Ue(t,e)){s=t;break}if(Be(t,e)){s=t.split("-")[0];break}}return s}function Ze(t,e){let i;return function(){const s=this,o=arguments;clearTimeout(i),i=setTimeout((function(){i=null,t.apply(s,o)}),e)}}function Ge(t,e){let i=!1;return function(){const s=this;i||(t.apply(s,arguments),i=!0,setTimeout((()=>{i=!1}),e))}}function qe(t,e=!1){let i=t.title?`${t.title} - `:"";return(0,s.isFormEntityWithFields)(t)?t.fields.forEach((t=>{i+=t.value?`${t.value} - `:""})):t.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,s.isReadOnlyField)(t)&&(i+=t.value?`${t.value} - `:"")}))}))})),e?ei(i):i}function Ye(t,e){if(t){const i=["headerBackground","visualizer","ratingStarFill"],s=["botText","userText"],o=Object.assign({},t);i.forEach((e=>{o[e]=t[e]||t.branding})),s.forEach((e=>{o[e]=t[e]||t.text})),Object.keys(o).forEach((t=>{const i=o[t];if(i)if("shareMenuText"===t)e.updateCSSVar("--color-popup-button-text",i);else{const s=`--color-${t.replace(/([A-Z&])/g,"-$1").toLowerCase()}`;e.updateCSSVar(s,i)}}))}}function Je(t){const e={};return t&&Object.keys(t).forEach((i=>{var s;e[i]=null===(s=document.getElementById(t[i]))||void 0===s?void 0:s.value})),e}const Ke={avatarAgent:"agentAvatar",avatarBot:"botIcon",avatarUser:"personIcon",fileAudio:"audioIcon",fileImage:"imageIcon",fileGeneric:"fileIcon",fileVideo:"videoIcon",clearHistory:"clearMessageIcon",close:void 0,collapse:"closeIcon",download:"downloadIcon",error:"errorIcon",expandImage:"expandImageIcon",keyboard:"keyboardIcon",logo:"logoIcon",launch:"botButtonIcon",mic:"micIcon",rating:void 0,send:"sendIcon",shareMenu:"attachmentIcon",shareMenuAudio:void 0,shareMenuFile:void 0,shareMenuLocation:void 0,shareMenuVisual:void 0,ttsOff:"audioResponseOffIcon",ttsOn:"audioResponseOnIcon",typingIndicator:"chatBubbleIcon"};function Xe(t){const e={},i=Object.keys(t);for(const s of i)e[s.toLowerCase()]=t[s];return e}function Qe(t,e){t=Xe(t),e=Xe(e);const i=new Set;Object.keys(t).forEach((t=>{i.add(t)})),Object.keys(e).forEach((t=>{i.add(t)}));const s={};return i.forEach((i=>{s[i]=Object.assign(Object.assign(Object.assign({},t.en),t[i]),e[i])})),s}function ti(t){const e=Object.assign(Object.assign({},Le),t);if(t.i18n&&Object.keys(t.i18n).length&&(e.i18n=Qe(Le.i18n,t.i18n)),e.colors=Object.assign(Object.assign({},Le.colors),t.colors),e.userId=t.userId||`user${Math.floor(1e4+9e4*Math.random())}${Date.now()%1e5}`,e.icons=function(t){const e=t.icons||{};for(const i in Ke){const s=i,o=Ke[s];o in t&&(e[s]=t[o])}return e}(e),e.locale=We(e.locale,e.i18n),t.typingStatusInterval&&t.typingStatusInterval<Le.typingStatusInterval&&(e.typingStatusInterval=Le.typingStatusInterval),e.enableVoiceOnlyMode&&(e.enableBotAudioResponse=!0,e.initBotAudioMuted=!1,e.enableSpeech=!0),!e.position){const t="rtl"===window.getComputedStyle(document.body).direction;e.position=t?{left:"20px",bottom:"20px"}:{right:"20px",bottom:"20px"}}return e}function ei(t){return t.length?t.slice(0,t.length-3):t}function ii(t,e){for(const[i,s]of Object.entries(e))t.setAttribute(i,s)}const si="aria-expanded",oi="aria-activedescendant",ri="expand",ni=!0;class ai{get cssPrefix(){return this.Xi}constructor(t){this.Qi={},this.ts=[],this.Xi=t.name}addCSSClass(t,...e){t.classList?e.forEach((e=>t.classList.add(`${this.Xi}-${e}`))):t.setAttribute("class",e.reduce(((t,e)=>`${t} ${this.Xi}-${e}`),""))}createAnchor(t,e,i=[],s=!1,o){const r=this.createElement("a",i,ni);r.rel="noreferrer noopener";let n=!1;return r.href=t,r.innerText=e,o&&(o.onclick&&(r.onclick=o.onclick.bind(r),n=!0),o.target&&(r.target=o.target,n=!0)),n||(s?r.addEventListener("click",(e=>(window.open(t,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),e.preventDefault(),e.stopPropagation(),!1))):r.target="_blank"),r}createButton(t=[]){const e="button",i=this.createElement(e,[...t,"flex"],ni);return i.type=e,i}createDiv(t=[]){return this.createElement("div",t)}createElement(t,e=[],i=!1){const s=document.createElement(t);return this.os(s,e),i&&(s.dir="auto"),s}createElementFromString(t,e=[]){const i=this.createDiv();i.innerHTML=t.trim();const s=i.firstElementChild;return e&&this.os(i.firstElementChild,e),s}createIconButton({css:t,icon:e,title:i,iconCss:s}){const o=this.createButton(["icon",...t]);o.innerHTML="",o.title=i;const r=this.createImageIcon({icon:e,iconCss:s});return o.appendChild(r),o}createImage(t,e=[],i=""){const s=this.createElement("img",e);return t&&(s.src=t),s.alt=i,s.setAttribute("draggable","false"),s}createImageIcon({icon:t,iconCss:e}){if((t=>{const e=t.match(/<svg\s/gi);return e&&e.length>0})(t)){const i=this.createElementFromString(t,e);return i.setAttribute("role","presentation"),i.setAttribute("focusable","false"),i}return this.createImage(t,e)}createInputElement(t,e=[]){const i=this.createElement("input",e,!0);return this.setAttributes(i,t),i}createLabel(t=[]){return this.createElement("label",t,ni)}createTextDiv(t=[]){return this.createElement("div",t,ni)}createTextSpan(t=[]){return this.createElement("span",t,ni)}setAttributes(t,e){const i=["valueOn","valueOff"];Object.keys(e).forEach((s=>{const o=e[s];o&&("errorMsg"===s?t.setAttribute("data-error",o):i.includes(s)?t.setAttribute(s,o):t[s]=o)}))}createListItem(t,e,i,s,o,r,n=!1,a=!0){const c=this.createElement("li",[o,n&&"with-sub-menu"],!0);if(c.id=t,c.tabIndex=-1,c.setAttribute("role","menuitem"),i&&c.setAttribute("data-value",i),s){const t=this.createImageIcon({icon:s,iconCss:["icon",`${o}-icon`]});c.appendChild(t)}const h=this.createTextSpan(["text",`${o}-text`,a?"ellipsis":""]);return h.innerText=e,c.appendChild(h),r&&ci(c,"click",r),c}createMedia(t,e,i=[]){const s=this.createElement(t,i,!0);return e&&(s.src=e),s.autoplay=!1,s}getMenu(t){const e=this.createElement("ul",["popup",...t.menuClassList]);e.id=t.menuId,e.tabIndex=-1,e.setAttribute("role","menu"),e.setAttribute("aria-labelledby",t.buttonId);const i=t.menuItems;if(i.forEach((t=>e.appendChild(t))),t.defaultValue){const i=e.querySelector(`[data-value="${t.defaultValue}"]`);this.addCSSClass(i,"active")}return ci(e,"click",(()=>this.rs(e,t.menuButton))),ci(e,"keydown",(s=>{let o=!1;if(!(s.ctrlKey||s.altKey||s.metaKey)){if(s.shiftKey&&s.code===a.KeyCode.Tab)this.rs(t.menuButton,e);else switch(s.code){case a.KeyCode.Return:case a.KeyCode.Space:s.target.click(),o=!0;break;case a.KeyCode.Esc:case a.KeyCode.Tab:this.rs(t.menuButton,e),s.code===a.KeyCode.Esc&&(t.menuButton.focus(),o=!0);break;case a.KeyCode.Up:this.ns(e),o=!0;break;case a.KeyCode.Down:this.cs(e),o=!0;break;case a.KeyCode.Home:case a.KeyCode.PageUp:this.hs(e,i),o=!0;break;case a.KeyCode.End:case a.KeyCode.PageDown:this.ls(e,i),o=!0}o&&(s.stopPropagation(),s.preventDefault())}})),e}getMenuButton(t){const e=t.button,i=t.menu,s=i.querySelectorAll("li"),o=e.classList.contains(`${this.Xi}-with-sub-menu`),r=t.widget;return e.setAttribute("role","button"),e.setAttribute("aria-haspopup","true"),e.setAttribute(si,"false"),e.setAttribute("aria-controls",t.menuId),ci(e,"click",(()=>{const i=document.getElementById(t.menuId);"true"===e.getAttribute(si)?this.rs(e,i):this.us(e,i,r,o)})),ci(e,"keydown",(t=>{let n=!1;switch(t.code){case a.KeyCode.Return:case a.KeyCode.Down:case a.KeyCode.Space:this.us(e,i,r,o),this.hs(i,s),n=!0;break;case a.KeyCode.Up:this.us(e,i,r,o),this.ls(i,s),n=!0}n&&(t.stopPropagation(),t.preventDefault())})),e}getMessage(t,e=!1){const i="message",s=this.createDiv([i]),o=this.createDiv([`${i}-wrapper`]),r=this.createDiv([`${i}-bubble`,e&&"error"]);return r.appendChild(t),o.appendChild(r),s.appendChild(o),s}wrapMessageBlock(t,e,i=Ot.LEFT){const s="message",o=this.createDiv([`${s}-block`,"flex",i]),r=this.createDiv([`${s}s-wrapper`]),n=this.createDiv([`${s}-list`,"flex","col"]);if(e){const t=this.createImageIcon({icon:e,iconCss:["message-icon"]}),i=this.createDiv(["icon-wrapper"]);i.appendChild(t),o.appendChild(i)}return n.appendChild(t),r.appendChild(n),o.appendChild(r),o}getMessageBlock(t,e,i,s=!1){return this.wrapMessageBlock(this.getMessage(e,s),i,t)}removeCSSClass(t,...e){var i,s;if(t.classList)e.forEach((e=>t.classList.remove(`${this.Xi}-${e}`)));else{const e="class",o=null!==(s=null===(i=t.getAttribute(e))||void 0===i?void 0:i.split(" "))&&void 0!==s?s:[];if(o.length){const i=o.filter((t=>o.indexOf(`${this.Xi}-${t}`)<0)).join(" ");t.setAttribute(e,i)}}}setChatWidgetWrapper(t){this.ps=t;for(const[t,e]of Object.entries(this.Qi))this.updateCSSVar(t,e)}updateCSSVar(t,e){this.Qi[t]=e,this.ps&&this.ps.style.setProperty(t,e)}os(t,e=[]){return e&&this.addCSSClass(t,...e),t}rs(t,e){t.getAttribute(si)&&(this.removeCSSClass(e,ri),t.setAttribute(si,"false"))}hs(t,e){this.ds(e[0],t)}ls(t,e){this.ds(e[e.length-1],t)}ns(t){const e=t.getAttribute(oi),i=t.querySelector(`#${e}`);this.ds(i.previousSibling||t.lastChild,t)}cs(t){const e=t.getAttribute(oi),i=t.querySelector(`#${e}`);this.ds(i.nextSibling||t.firstChild,t)}ds(t,e){t.focus(),e.setAttribute(oi,t.id)}us(t,e,i,s=!1){if("false"===t.getAttribute(si)){this.addCSSClass(e,ri),t.setAttribute(si,"true");const o=i.getBoundingClientRect(),r=t.getBoundingClientRect(),n="rtl"===window.getComputedStyle(e).direction;if(s){const s=48;e.style.top=`${t.offsetTop+t.offsetHeight+60}px`,n?e.style.left=`${s}px`:e.style.right=`${s}px`,e.style.maxWidth=i.offsetWidth-s+"px"}else{let t=o.right-r.right;n?(t=r.left-o.left,e.style.left=`${t}px`):e.style.right=`${t}px`,e.style.maxWidth=i.offsetWidth-t+"px"}setTimeout((()=>{const i=document.querySelectorAll(`.${this.Xi}-with-sub-menu`);document.addEventListener("click",(s=>{let o=!1;i.forEach((t=>{t.contains(s.target)&&(o=!0)})),o?this.ts.push({menu:e,menuButton:t}):(this.ts.length&&(this.ts.forEach((t=>{this.rs(t.menuButton,t.menu)})),this.ts=[]),this.rs(t,e))}),{once:!0})}))}}}function ci(t,e,i,s){t.addEventListener(e,i,s)}function hi(t,e,i,s){t.removeEventListener(e,i,s)}class li{remove(){this.element.remove()}appendToElement(t){t.appendChild(this.element)}prependToElement(t){const e=t.firstChild;e?t.insertBefore(this.element,e):t.appendChild(this.element)}appendContentChildElement(t){this.gs().appendChild(t)}appendContentChild(t){this.gs().appendChild(t.element)}gs(){return this.element}}const ui="aria",pi=`${ui}-expanded`,di=`${ui}-selected`,gi=`${ui}-activedescendant`,mi="autocomplete-active";class fi{constructor(t,e,i){this.fs=t,this.ii=i,this.bs=-1,this.vs=this.ws(e),ii(t,{"aria-autocomplete":"list","aria-controls":e,[pi]:"false",autocomplete:"off",role:"combobox"})}display(t,e){this.xs(),this.te=t.map(((i,s)=>{const o=this.ys(s,t.length);return this.ks(o,i,e),o.onclick=()=>{this.fs.value=i,this.hide()},this.vs.appendChild(o),o})),this.fs.setAttribute(pi,"true")}hide(){this.fs.setAttribute(pi,"false"),this.fs.removeAttribute(gi),this.xs()}isOpen(){return"true"===this.fs.getAttribute(pi)}handleKeyboardEvent(t){let e=!1;if(t.ctrlKey)return e;const i=this.te.length;switch(t.code){case a.KeyCode.Return:case a.KeyCode.Space:case a.KeyCode.Tab:this._s&&vi(this.fs,this._s.textContent),this.hide();break;case a.KeyCode.Down:this.bs=(this.bs+1)%i,e=!0;break;case a.KeyCode.Up:this.bs=this.bs<0?i-1:(this.bs-1+i)%i,e=!0;break;case a.KeyCode.Esc:this.hide(),this.fs.focus()}return e&&(t.stopPropagation(),t.preventDefault(),this.zs(this.te[this.bs])),e}getListbox(){return this.vs}ws(t){const e=this.ii.createElement("ul",["autocomplete-items"]);return e.id=t,ii(e,{"aria-labelledby":`${this.fs.id}-label`,"aria-live":"polite",role:"listbox"}),ci(e,"keydown",(t=>{this.fs.dispatchEvent(new KeyboardEvent(t.type,t))})),e}ys(t,e){const i=this.ii.createElement("li",["autocomplete-item"]);return i.id=`${this.vs.id}item-${t+1}`,i.tabIndex=-1,ii(i,{"aria-posinset":(t+1).toString(),"aria-setsize":e.toString(),[di]:"false",role:"option"}),i}ks(t,e,i){const s=e.toLowerCase().indexOf(i),o=this.ii.createTextSpan();if(o.setAttribute("aria-hidden","true"),s>=0){const t=bi(e.substring(0,s)),r=this.ii.createElement("strong",[],!0);r.textContent=e.substring(s,s+i.length);const n=bi(e.substring(s+i.length));o.append(t,r,n)}else o.textContent=e;t.append(o),t.setAttribute("aria-label",e)}zs(t){const e=this._s;e&&(this.ii.removeCSSClass(e,mi),e.setAttribute(di,"false")),t&&(t.scrollIntoView(!1),t.setAttribute(di,"true"),this.ii.addCSSClass(t,mi),this._s=t,this.fs.setAttribute(gi,t.id))}xs(){const t=this.vs;for(;t.firstChild;)t.removeChild(t.lastChild);this.te=[],this._s=null,this.bs=-1}}const bi=t=>document.createTextNode(t),vi=(t,e)=>{t.value=e,t.setSelectionRange(e.length,e.length)},wi={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter"},xi="keyboard",yi="voice",ki={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};ki.ALL=`${ki.AUDIO},${ki.FILE},${ki.IMAGE},${ki.VIDEO}`;const _i=window.setTimeout;class zi extends li{constructor(t,e,i,s,r,n,c,h,l,u,p){super(),this.ii=t,this.Ms=e,this.Ss=i,this.He=s,this.Cs=r,this.Ts=n,this.$s=c,this.Is=h,this.As=l,this.Os=u,this.Es=p,this.mode=void 0,this.Ls=Ht,this.Ps=[],this.js=!1,this.Fs=!1,this.Vs=!1,this.Hs=!0,this.Ds=Ge((t=>{this.As.trigger(o.TYPING,t)}),1e3),this.Rs=Ge((t=>{this.Is("RESPONDING",this.He.enableAgentSneakPreview?t:"...")}),this.He.typingStatusInterval*Dt),this.Xi=s.name,this.Ns=s.i18n,this.Us=s.icons,this.Bs=this.Ns[s.locale],this.Hs=!(0,a.isMobile)(),this.Ws=`${this.Xi}-share-button`}render(){if(this.element=this.Zs(),this.He.enableSpeech){const t=this.Gs();this.element.appendChild(t)}const t=this.qs();this.element.appendChild(t),this.setInputMode(xi),this.disable(),window.addEventListener("resize",Ze((()=>{this.Ys()}),100))}setInputMode(t){t!==this.mode&&(this.He.enableSpeech?(this.mode=t,this.mode===xi?this.Js():this.Ks()):(this.mode=xi,this.Js()))}setUserInputText(t){this.Xs&&(this.Xs.value=t,this.Xs.setSelectionRange(t.length,t.length),this.focusTextArea(),this.Qs())}getUserInputText(){return this.Xs.value}setUserInputPlaceholder(t){this.Xs&&(this.mode===xi?this.eo(t):this.io=t)}setRecognitionRequested(t){this.Vs=t}setVoiceRecording(t){this.He.enableSpeech&&(t&&this.Vs?this.setInputMode(yi):t||this.setInputMode(xi))}updateVisualizer(t,e){this.mode===yi&&(0,a.drawVisualizer)(t,this.so,e)}focusTextArea(){this.Hs&&this.Xs.focus(),this.Xs.scrollTop=this.Xs.scrollHeight}disable(t=!0){const e=this.ii,i="disabled";this.He.enableAttachment&&(this.oo.disabled=t),t?(e.addCSSClass(this.Xs,i),this.He.enableAutocomplete&&(this.ro(),this.no())):e.removeCSSClass(this.Xs,i),this.He.enableSpeech&&(this.setInputMode(xi),this.disableVoiceModeButton(t,{src:"network"})),this.ao=t,this.Qs()}isDisabled(){return this.ao}disableVoiceModeButton(t,{src:e}){if(this.He.enableSpeech){switch(e){case"lang":this.js=t;break;case"network":this.Fs=t}this.He.multiLangChat&&(this.js||this.Fs)?this.co.disabled=!0:this.co.disabled=this.Fs}}displaySuggestions(t){if(this.ho=t,this.lo=t.length>0,!this.lo||!this.Xs.value)return void this.no();const e=this.Xs.value.trim().toLowerCase();this.uo.display(t.slice(0,Math.min(t.length,jt.MAX_SUGGESTIONS_COUNT)),e)}getSuggestions(){return this.ho}getSuggestionsValid(){return this.lo}getSuggestionsList(){var t;return null===(t=this.uo)||void 0===t?void 0:t.getListbox()}setLocale(t){this.Bs=t,this.oo&&(Si(this.oo,t.upload),this.po.querySelectorAll("li").forEach((t=>{const e=t.dataset.value,i=this.Bs[`share${e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}`]||this.Bs[e]||t;t.querySelector("span").innerText=i}))),this.setUserInputPlaceholder(t.inputPlaceholder),this.do&&Si(this.do,t.send),this.co&&Si(this.co,t.speak),this.mo&&Si(this.mo,t.inputPlaceholder)}Zs(){return this.ii.createDiv(["footer"])}Js(){var t;const e=this.ii;e.removeCSSClass(this.element,"mode-voice"),e.addCSSClass(this.element,"mode-keyboard"),this.eo(this.io),this.Xs.disabled=!1,this.Qs(),this.He.enableAutocomplete&&(null===(t=this.Xs.value)||void 0===t?void 0:t.trim().length)>=3&&this.fo()}Ks(){const t=this.ii;t.removeCSSClass(this.element,"mode-keyboard"),t.addCSSClass(this.element,"mode-voice"),this.io=this.Xs.placeholder,this.eo(this.Bs.recognitionTextPlaceholder),this.Xs.disabled=!0,this.Qs(),this.no()}qs(){var t;const e=this.ii,i=e.createDiv(["footer-mode-keyboard","flex"]),s=null===(t=this.He.icons)||void 0===t?void 0:t.footerLogo;s&&i.appendChild(e.createImageIcon({icon:s,iconCss:["footer-logo"]})),this.bo(i);const o=e.createDiv(["footer-actions","flex"]),r=this.vo();if(this.do=r,this.Es("send",r),o.appendChild(r),this.He.enableSpeech&&(this.co=this.wo(),o.appendChild(this.co),this.mo=this.xo(),o.appendChild(this.mo)),this.He.enableAttachment){const t=this.yo();o.appendChild(t)}return i.appendChild(o),i}yo(){const t=this.ii,e=t.createDiv(),i=Mi(this.ii,{css:["button-upload","flex"],customIcon:this.Us.shareMenu,defaultIcon:c,title:this.Bs.upload});i.id=this.Ws;const s=t.createElement("input",["none"]);s.type="file",s.tabIndex=-1,s.setAttribute("aria-hidden","true"),this.ko=s,this.po=this._o(i);const o=t.getMenuButton({button:i,menuId:this.po.id,menu:this.po,widget:this.He.searchBarMode?this.Os.element:this.Os.chatWidgetDiv});return ci(o,"click",(()=>{this.no()})),this.oo=o,this.Es("shareMenu",o),document.addEventListener("deviceready",(()=>{const t=globalThis?globalThis.device:window?window.device:void 0;"Android"===(null==t?void 0:t.platform)&&this.ko.removeAttribute("accept")}),!1),ci(s,"click",(()=>s.value=null)),ci(s,"change",(t=>{const e=t.target;e.files&&e.files.length&&this.zo(e.files[0])})),e.appendChild(this.oo),e.appendChild(this.po),e.appendChild(s),e}_o(t){return this.ii.getMenu({menuId:`${this.He.name}-share-menu`,menuClassList:["share-popup-list"],buttonId:this.Ws,menuItems:this.Mo(),menuButton:t})}Mo(){const t=this.ii,e=this.Us,i=this.Bs,s=this.ko,o=`${this.Xi}-share-`;let r=this.He.shareMenuItems;const n=[],a=[Oe.AUDIO,Oe.FILE,Oe.LOCATION,Oe.VISUAL],c=new Set;if((null==r?void 0:r.length)&&!r.every((t=>"string"==typeof t&&a.indexOf(t.toLowerCase())<0))||(r=a),r.forEach((t=>{"string"==typeof t&&c.add(t.toLowerCase())})),c.has(Oe.VISUAL)){const r=`${o}visual`,a=e.shareMenuVisual||E,c=t.createListItem(r,i.shareVisual,"visual",a,"share-popup-item",(()=>{s.accept=`${ki.IMAGE},${ki.VIDEO}`,s.click()}));n.push(c),this.Es("shareMenuVisual",c)}if(c.has(Oe.AUDIO)){const r=`${o}audio`,a=e.shareMenuAudio||I,c=t.createListItem(r,i.shareAudio,"audio",a,"share-popup-item",(()=>{s.accept=ki.AUDIO,s.click()}));n.push(c),this.Es("shareMenuAudio",c)}if(c.has(Oe.FILE)){const r=`${o}file`,a=e.shareMenuFile||A,c=t.createListItem(r,i.shareFile,"file",a,"share-popup-item",(()=>{s.accept=ki.FILE,s.click()}));n.push(c),this.Es("shareMenuFile",c)}if(c.has(Oe.LOCATION)){const s=`${o}location`,r=e.shareMenuLocation||O,a=t.createListItem(s,i.shareLocation,"location",r,"share-popup-item",(()=>this.$s()));n.push(a),this.Es("shareMenuLocation",a)}const h=e.shareMenuFile||A;return this.He.shareMenuItems.filter((t=>"string"!=typeof t&&"string"==typeof t.type)).forEach((e=>{const o=e.type.toLowerCase(),r=`share_${o.indexOf("*")>=0?"all":o.replace(/ /g,"_")}`,a=`${this.Xi}-${r}`,c=i[r]||this.Ns.en[r];let l=e.label;c?l=c:this.Ns.en[r]=l;const u=e.icon||h,p=e.maxSize&&e.maxSize>=1?Math.min(e.maxSize*Vt,Ht):Ht;let d="";"wcfs_*"!==o&&(d=o.indexOf("*")>=0&&"wcfs_*"!==o?ki.ALL:o.split(" ").map((t=>`.${t} `)).join(",")),n.push(t.createListItem(a,l,r,u,"share-popup-item",(()=>{this.Ls=p,s.accept=d,s.click()})))})),n}bo(t){const e=this.ii;this.Xs=this.So();const i=e.createLabel(["hidden"]);i.id=`${this.Xs.id}-label`,i.htmlFor=this.Xs.id,this.Co=i,this.eo(this.io),t.append(i,this.Xs),this.He.enableAutocomplete&&(this.uo=new fi(this.Xs,`${this.Xi}-suggestions-list`,this.ii),t.append(this.uo.getListbox()))}So(){const t=["user-input"];this.He.enableSpeech&&t.push("user-input-inline-send");const e=this.ii.createElement("textarea",t,!0);return e.setAttribute("enterkeyhint","send"),e.id=`${this.Xi}-user-text-input`,this.io=this.Bs.inputPlaceholder,e.rows=1,e.onkeydown=this.To.bind(this),e.onkeyup=this.$o.bind(this),e.oninput=()=>{const t=e.value;this.Os.speechFinalResult=this.Os.speechFinalResult||{speechId:"",text:""},this.Os.speechFinalResult.text=t,this.Ys()},ci(e,"paste",(()=>{this.ao||_i(this.Qs.bind(this))})),this.Io(e),this.Es("input",e),e}eo(t){this.Xs.placeholder=t,this.Co.innerText=t}Io(t){const e=Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value");Object.defineProperty(t,"value",{set:i=>{e.set.call(t,i),this.Qs(),this.Ys()},get:e.get})}vo(){const t=Mi(this.ii,{css:["button-send"],customIcon:this.Us.send,defaultIcon:$,title:this.Bs.send});return t.disabled=!0,t.onclick=()=>{var t;this.Ao()||(this.Oo=void 0,this.Xs.value=null===(t=this.Xs)||void 0===t?void 0:t.value.trim(),this.He.enableAutocomplete&&(this.ro(),this.no()),this.Eo())},t}wo(){const t=Mi(this.ii,{css:["button-switch-voice"],customIcon:this.Us.mic,defaultIcon:S,title:this.Bs.speak});return t.onclick=()=>{this.Ts(!0),this.Vs=!0},this.Es("mic",t),t}Gs(){const t=this.ii,e=t.createDiv(["footer-mode-voice","flex"]),i=t.createDiv(["footer-visualizer-wrapper"]);return this.so=t.createElement("canvas"),this.so.width=244,this.so.height=32,i.appendChild(this.so),e.appendChild(i),e}xo(){const t=Mi(this.ii,{css:["button-switch-kbd"],customIcon:this.Us.keyboard,defaultIcon:k,title:this.Bs.inputPlaceholder});return t.onclick=()=>{this.Vs=!1,this.Ts(!1)},this.Es("keyboard",t),t}Qs(){var t,e;const i=this.do;if(!i||!i.nodeType)return;const s=this.ii,o="none",r=(null===(e=null===(t=this.Xs)||void 0===t?void 0:t.value)||void 0===e?void 0:e.trim().length)>0;this.mode===xi&&(this.He.alwaysShowSendButton||r)?s.removeCSSClass(i,o):s.addCSSClass(i,o),i.disabled=this.ao||!r}Ao(){return!this.Xs||0===this.Xs.value.trim().length}To(t){var e;this.isDisabled()||this.He.enableAutocomplete&&this.uo.isOpen()&&this.uo.handleKeyboardEvent(t)||t.key===a.KeyCode.Return&&!t.shiftKey&&(null===(e=this.Xs.value)||void 0===e?void 0:e.trim().length)>0&&(t.preventDefault(),this.do.click())}$o(t){var e;if(this.Qs(),this.isDisabled())return this.ro(),void this.no();if(t.isComposing)return;const i=null===(e=this.Xs.value)||void 0===e?void 0:e.trim();this.Ds(!0),this.He.enableSendTypingStatus&&(i?this.Rs(i):this.Is("LISTENING")),clearTimeout(this.Lo),this.Lo=_i((()=>{this.Ds(!1),this.He.enableSendTypingStatus&&this.Is("LISTENING")}),this.He.typingStatusInterval*Dt),this.He.enableAutocomplete&&(t.code===a.KeyCode.Backspace&&(this.Oo=void 0,this.ro(),this.no(),clearTimeout(this.Po)),this.jo().indexOf(t.code)<0&&(i.length>=3?this.Oo!==i&&(this.Oo=i,clearTimeout(this.Po),this.fo()):(this.Oo=void 0,this.no(),clearTimeout(this.Po))))}Ys(){if(!this.He.searchBarMode){this.Xs.style.height=null;const t=.6*this.Os.chatWidgetDiv.clientHeight,e=this.Xs.scrollHeight;this.Xs.style.height=`${e<t?e:t}px`}}Eo(){this.Ms(this.Xs.value),this.Xs.value="",this.Xs.innerText="",_i(this.Ys.bind(this))}zo(t){const e=this.Ls;this.Ls=Ht,this.Ss(t,{maxSize:e}),this.ko.value=""}Fo(){this.Cs(this.Xs.value.trim()).catch((()=>{}))}no(){this.uo&&this.uo.isOpen()&&this.uo.hide()}fo(){this.Po=_i((()=>{this.Fo()}),300)}ro(){this.ho=null,this.lo=!1}jo(){if(!this.Ps.length)for(const t of Object.keys(wi))this.Ps.push(wi[t]);return this.Ps}}function Mi(t,{css:e,customIcon:i,defaultIcon:s,title:o}){const r=i||s;return t.createIconButton({css:["footer-button","flex"].concat(e),icon:r,iconCss:[],title:o})}function Si(t,e){t.title=e}const Ci="end-conversation",Ti="collapse",$i="clear",Ii="tts",Ai="none";class Oi extends li{constructor(t,e,i,s,o,r,n,a,c){super(),this.He=t,this.ii=e,this.tt=i,this.Vo=s,this.Ho=o,this.Ro=r,this.No=n,this.Es=a,this.Os=c,this.Ri=new $t("ChatHeaderComponent"),this.Uo=[],this.Bo=[],this.Xi=t.name,this.Ns=this.He.i18n}render(){this.element=this.Zs(),this.He.showConnectionStatus&&(this.Wo=t=>this.Zo(t),this.Ro.on(s.CoreEvent.State,this.Wo)),this.disable()}addLanguageSelect(t){const e=!(!this.Bo||!this.Bo.length);this.Go=t.render(e),this.Es("language",this.Go),this.Go&&(e?this.qo.appendChild(this.Go):this.Yo.prepend(this.Go))}closeWidgetPopup(){this.tt()}clearHistory(){this.Vo()}showTTSButton(t){const e=this.Jo(Ii);e&&(e.style.display=t?"flex":Ai)}disableTTSButton(t){const e=this.Jo(Ii);if(e){const i=this.ii;if("LI"===e.tagName){const s="disable";t?(i.addCSSClass(e,s),e.ariaDisabled="true"):(i.removeCSSClass(e,s),e.ariaDisabled="false")}else e.disabled=t}}setLocale(t){var e;const i=this.ii,s=this.Go;this.Ko=t;const o=t.chatTitle;o&&(this.Ke.innerText=o);const r=t.chatSubtitle;r?(this.Xo.innerText=r,i.removeCSSClass(this.Xo,Ai),i.addCSSClass(this.Qo,Ai)):this.He.showConnectionStatus?(this.Zo(this.tr),i.removeCSSClass(this.Qo,Ai),i.addCSSClass(this.Xo,Ai)):(i.addCSSClass(this.Xo,Ai),i.addCSSClass(this.Qo,Ai)),this.er&&Ei(this.er,t.showOptions),null===(e=this.Uo)||void 0===e||e.forEach((e=>{Ei(e.element,t[e.title])})),s&&Ei(s.querySelector("button")||s,t.languageSelectDropdown)}disable(t=!0){if(this.He.enableEndConversation&&!this.He.wcfsEnableEndConversationButtonToClose)for(const e of this.Uo)e.name===Ci&&(e.element.disabled=t)}addAction(t){this.Uo.push(t)}remove(){this.Ro.off(s.CoreEvent.State,this.Wo)}Zs(){var t;const e=this.ii,i=this.He,s=i.icons,o=e.createDiv(["header","flex"]),r=e.createDiv(["header-info-wrapper"]),n=e.createDiv(["header-actions","flex"]),a=i.locale,c=this.Ns[a],h=c.chatTitle,l=c.chatSubtitle;if(!("logo"in s)||s.logo){const t=e.createImageIcon({icon:s.logo||M,iconCss:["logo"]});o.appendChild(t)}if(h){const t=e.createTextDiv(["title"]);t.id=`${i.name}-title`,t.innerText=h,r.appendChild(t),this.Ke=t}this.Xo=e.createTextDiv(["subtitle",Ai]),r.appendChild(this.Xo),this.Qo=e.createTextDiv(["connection-status",Ai]),r.appendChild(this.Qo),l?(this.Xo.innerText=l,e.removeCSSClass(this.Xo,Ai)):i.showConnectionStatus&&(this.Zo(this.Ro.getState()),e.removeCSSClass(this.Qo,Ai)),o.appendChild(r);const u=e.createDiv(["header-gap"]);if(o.appendChild(u),i.customHeaderElementId){const t=document.getElementById(i.customHeaderElementId);if(t){const i=e.createDiv(["header-custom-element"]);i.appendChild(t),o.appendChild(i)}else this.Ri.error(`Could not find element with ID '${i.customHeaderElementId}'. No custom element added to the chat header.`)}if(this.Yo=n,i.enableEndConversation){const t=s.close||m;this.Uo.push({name:Ci,title:"endConversation",icon:t,clickHandler:this.No.bind(this),order:10})}if(!i.embedded){const t=s.collapse||f;this.Uo.push({name:Ti,title:"close",icon:t,clickHandler:this.closeWidgetPopup.bind(this),order:20})}if(i.enableBotAudioResponse&&(this.ir=!i.initBotAudioMuted,this.Uo.push({name:Ii,title:this.ir?"audioResponseOn":"audioResponseOff",icon:this.ir?s.ttsOn||j:s.ttsOff||P,clickHandler:()=>{this.ir=!this.ir,this.sr(),this.Ho(this.ir)},order:30})),i.enableClearMessage){const t=s.clearHistory||g;this.Uo.push({name:$i,title:"clear",icon:t,clickHandler:this.clearHistory.bind(this),order:40})}return this.Uo.sort(((t,e)=>t.order>e.order?1:-1)),null===(t=this.Uo)||void 0===t||t.forEach(((t,i)=>{const s=this.He.multiLangChat?this.Uo.length+1:this.Uo.length;if(!this.He.enableHeaderActionCollapse||i<2&&!(s>2&&1===i)){const i=e.createIconButton({css:["header-button"],icon:t.icon,iconCss:[],title:c[t.title]});i.onclick=t.clickHandler,this.rr(t,i),t.element=i,this.Yo.prepend(i)}else this.Bo.push(t)})),this.Bo&&this.Bo.length&&this.nr(this.Bo),o.appendChild(n),o}rr(t,e){switch(e.id=`${this.Xi}-${t.name}`,t.name){case Ci:this.Es("close",e);break;case Ti:case Ii:this.Es(t.name,e);break;case $i:this.Es("clearHistory",e)}}nr(t){const e=this.ii,i=this.Ko||this.Ns[this.He.locale],s=`${this.He.name}-action-menu`,o=`${s}-button`,r=t.map((t=>{const s=e.createListItem(`action-menu-option-${t.name}`,i[t.title],t.name,t.icon,"action-item",t.clickHandler);return this.rr(t,s),t.element=s,s})),n=e.createIconButton({css:["header-button","button-show-options"],icon:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M4.99935 9.99967C4.99935 10.9201 4.25316 11.6663 3.33268 11.6663C2.41221 11.6663 1.66602 10.9201 1.66602 9.99967C1.66602 9.0792 2.41221 8.33301 3.33268 8.33301C4.25316 8.33301 4.99935 9.0792 4.99935 9.99967Z" fill="#161513"/><path d="M11.666 9.99967C11.666 10.9201 10.9198 11.6663 9.99935 11.6663C9.07887 11.6663 8.33268 10.9201 8.33268 9.99967C8.33268 9.0792 9.07887 8.33301 9.99935 8.33301C10.9198 8.33301 11.666 9.0792 11.666 9.99967Z" fill="#161513"/><path d="M18.3327 9.99967C18.3327 10.9201 17.5865 11.6663 16.666 11.6663C15.7455 11.6663 14.9993 10.9201 14.9993 9.99967C14.9993 9.0792 15.7455 8.33301 16.666 8.33301C17.5865 8.33301 18.3327 9.0792 18.3327 9.99967Z" fill="#161513"/></svg',iconCss:[],title:this.Ns[this.He.locale].showOptions}),a=e.getMenu({menuId:s,menuClassList:["action-menu"],menuItems:r,buttonId:o,menuButton:n}),c=e.getMenuButton({button:n,menuId:s,menu:a,widget:this.Os.chatWidgetDiv});this.Yo.prepend(c),this.Yo.appendChild(a),this.er=c,this.qo=a}cr(t){for(const e of this.Uo)if(e.name===t)return e;return null}Jo(t){var e;return null===(e=this.cr(t))||void 0===e?void 0:e.element}sr(){const t=this.He.icons,e=this.cr(Ii);e.title=this.ir?"audioResponseOn":"audioResponseOff",e.icon=this.ir?t.ttsOn||j:t.ttsOff||P,this.hr(Ii)}hr(t){const e=this.ii,i=this.Ko||this.Ns[this.He.locale],s=this.cr(t),o=this.Jo(t);if(o){o.innerHTML="";const t=i[s.title],r=s.icon,n="LI"===o.tagName,a=e.createImageIcon({icon:r,iconCss:[n?"icon":"","action-item-icon"]});if(n){o.appendChild(a);const i=e.createTextSpan(["text","action-item-text","ellipsis"]);i.innerText=t,o.appendChild(i)}else o.appendChild(a),o.title=t}}Zo(t){const e=this.ii,i="connecting",o="connected",r="disconnected",n=this.Qo;this.tr=t;const a=this.Ko||this.Ns[this.He.locale];switch(t){case s.ConnectionState.Open:n.innerText=a.connected,e.removeCSSClass(n,i,r),e.addCSSClass(n,o);break;case s.ConnectionState.Closed:n.innerText=a.disconnected,e.removeCSSClass(n,i,o),e.addCSSClass(n,r);break;case s.ConnectionState.Closing:n.innerText=a.closing,e.removeCSSClass(n,o,r),e.addCSSClass(n,i);break;case s.ConnectionState.Connecting:n.innerText=a.connecting,e.removeCSSClass(n,o,r),e.addCSSClass(n,i)}}}function Ei(t,e){if("LI"===t.tagName){const i=t.querySelector("span");i&&(i.innerText=e)}else t.title=e}class Li extends li{constructor(t){super(),this.element=t.createDiv(["conversation"])}render(){}}class Pi{constructor(t){this.util=t}render(){const t=this.util.createDiv(["spinner"]);return t.innerHTML='<svg viewBox="0 0 64 64"><circle transform="translate(32,32)" r="26"></circle></svg>',t}}class ji{constructor(t,e,i,s){this.zi=t,this.lr=e,this.He=i,this.ii=s}render(){const t=this.ii,e=this.He,i=e.icons,s=t.createDiv(["attachment"]),o=this.lr===Ot.LEFT?i.avatarBot:i.avatarUser,r=t.createDiv(["attachment-footer","flex"]),n=t.createTextDiv(["attachment-title"]);n.innerText=this.zi,r.appendChild(n);const a=t.createDiv(["attachment-placeholder","flex"]);return a.appendChild(new Pi(t).render()),s.appendChild(a),s.appendChild(r),this.ur=e.searchBarMode?t.getMessage(s):t.getMessageBlock(this.lr,s,o),this.ur}remove(){this.ur.remove()}}class Fi{constructor(t,e,i,s,o,r=!0){this.Ke=t,this.zi=e,this.lr=i,this.He=s,this.ii=o,this.pr=r}render(t){const e=this.ii,i=this.He,s=i.icons,o="message",r=e.createDiv([`${o}-content`]),n=this.lr===Ot.LEFT?s.avatarBot:s.avatarUser;if(t){e.addCSSClass(r,`${o}-with-icon`);const i=e.createImageIcon({icon:t}),s=e.createDiv([`${o}-icon`]);s.appendChild(i),r.appendChild(s)}const a=e.createDiv([`${o}-text`]),c=e.createTextDiv([`${o}-title`]),h=e.createTextDiv([`${o}-description`]);return c.innerText=this.Ke,h.innerText=this.zi,a.appendChild(c),a.appendChild(h),r.appendChild(a),i.searchBarMode?e.getMessage(r,this.pr):e.getMessageBlock(this.lr,r,n,this.pr)}}class Vi{constructor(t,e,i){this.lr=t,this.He=e,this.ii=i,this.ur=this.render(),this.dr=!1,this.gr=!0}append(t){!this.isVisible()&&t&&(t.appendChild(this.ur),this.dr=!0,this.mr&&clearTimeout(this.mr),this.gr&&(this.mr=window.setTimeout((()=>{this.remove()}),1e3*this.He.typingIndicatorTimeout)))}remove(){this.isVisible()&&(this.ur.remove(),this.dr=!1)}isVisible(){return this.dr}render(){const t=this.ii,e=this.He,i=t.createDiv(["typing-cue-wrapper"]),s=e.icons.avatarBot;if(e.icons.typingIndicator){const s=e.icons.typingIndicator,o=t.createImageIcon({icon:s});o.style.height=e.chatBubbleIconHeight||o.style.height,o.style.width=e.chatBubbleIconWidth||o.style.width,i.appendChild(o)}else{const e=t.createDiv(["typing-cue"]);i.appendChild(e)}return i.setAttribute("aria-live","polite"),this.fi=i,this.updateTypingCueLocale(e.i18n[e.locale].typingIndicator),e.searchBarMode?t.getMessage(i):t.getMessageBlock(this.lr,i,s)}updateTypingCueLocale(t){this.fi.setAttribute("aria-label",t)}resetTypingCueIcon(){this.ur.remove(),this.ur=this.render()}updateTypingCueIcon(t){t.style.marginTop="0px",this.ur.firstChild.replaceWith(t)}setAutoTimeout(t){this.gr=t}}const Hi=["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"],Di=["allow-downloads-without-user-activation","allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-storage-access-by-user-activation","allow-top-navigation","allow-top-navigation-by-user-activation"],Ri="none",Ni="webview-container",Ui=`${Ni}-open`,Bi=`${Ni}-close`;class Wi{constructor(t,e,i){this.ii=e,this.He=i,this.br=.8,this.vr={closeButtonIcon:m,closeButtonType:"icon",errorInfoBar:!0,referrerPolicy:"no-referrer-when-downgrade",sandbox:[],size:"tall"},this.wr=!1,this.yr=!1,this.setProps(t||{}),this.Xi=i.name}setProps(t){Array.isArray(t.sandbox)&&t.sandbox.length&&(t.sandbox=t.sandbox.map((t=>t.toLowerCase())).filter((t=>Di.indexOf(t)>=0)));const e=Object.assign(Object.assign({},this.vr),t);var i;e.closeButtonIcon||(e.closeButtonIcon=this.vr.closeButtonIcon),e.closeButtonType||(e.closeButtonType="icon"),e.size||(e.size="tall"),i=e.referrerPolicy,Hi.indexOf(null==i?void 0:i.toLowerCase())>=0||(e.referrerPolicy="no-referrer-when-downgrade"),"full"===e.size&&(this.br=1),this.vr=e,this.wr=!1,this.yr=!1}open(t){if(this.kr){const e=this.ii,i=100;this.kr.style.height=i*this.br+"%",e.removeCSSClass(this.kr,Bi,Ri),e.addCSSClass(this.kr,Ui),this.kr.insertBefore(this._r,this.zr),this.zr.onload=()=>{this._r.remove(),e.removeCSSClass(this.zr,Ri)},this.vr.title||(this.Ke.textContent=t),this.vr.errorInfoBar&&setTimeout((()=>{this.wr&&!this.yr&&(this.Mr=this.Sr(),t&&(this.Cr.href=t),e.removeCSSClass(this.Mr,Ri),this.kr.appendChild(this.Mr),this.yr=!0)}),1e3),this.wr=!0}}close(){const t=this.ii;this.wr=!1,t.removeCSSClass(this.kr,Ui),t.addCSSClass(this.kr,Bi),this.Tr(),this.zr.setAttribute("src",""),setTimeout((()=>{t.addCSSClass(this.kr,Ri),t.removeCSSClass(this.zr,Ri)}),400)}render(){const t=this.ii,e=this.vr;return this.kr=t.createDiv(["webview-container"]),this.$r=t.createDiv(["header","webview-header","flex"]),this.Ke=t.createTextDiv(["title","webview-title","ellipsis"]),this.Ir=t.createIconButton({css:["header-button","webview-button-close"],icon:e.closeButtonIcon,iconCss:[],title:e.closeButtonLabel}),this.Ir.id=`${this.Xi}-webview-button-close`,this._r=this.Ar(),this.zr=t.createElement("iframe",["webview"]),this.zr.name=`${this.He.name}-webview`,this.zr.title=e.accessibilityTitle,e.title&&(this.Ke.textContent=e.title),"label"===e.closeButtonType?(this.Ir.classList.add(`${this.Xi}-label-only`),this.Ir.appendChild(document.createTextNode(e.closeButtonLabel))):"iconWithLabel"===e.closeButtonType&&(this.Ir.classList.add(`${this.Xi}-with-label`),this.Ir.appendChild(document.createTextNode(e.closeButtonLabel))),this.zr.setAttribute("referrerpolicy",e.referrerPolicy),this.vr.sandbox.length&&this.vr.sandbox.forEach((t=>{this.zr.sandbox.add(t)})),t.addCSSClass(this.kr,Ri),this.Ir.onclick=()=>{this.close()},this.$r.appendChild(this.Ke),this.$r.appendChild(this.Ir),this.kr.appendChild(this.$r),this.kr.appendChild(this.zr),this.kr}Ar(){return new Pi(this.ii).render()}Sr(){const t=this.ii,e=t.createDiv(["webview-error","flex"]);this.Or=t.createDiv(["webview-error-text"]),e.appendChild(this.Or),this.Er(this.vr.errorInfoText);const i=t.createIconButton({css:["webview-error-button-close"],icon:this.vr.closeButtonIcon,iconCss:[],title:this.vr.errorInfoDismissLabel});return i.onclick=this.Tr.bind(this),e.appendChild(i),e}Er(t){var e;const i=this.ii,s=(o=t,He.forEach((t=>{o=o.replace((0,a.resetRegex)(t.match),t.replace)})),o);var o;let r;const n=/\{0\}(.*)\{\/0\}/g,c=null===(e=n.exec(s))||void 0===e?void 0:e[1];if(c){const t=i.createAnchor("",c,["webview-alt-link"]);r=s.replace((0,a.resetRegex)(n),t.outerHTML)}else r=i.createAnchor("",s,["webview-alt-link"]).outerHTML;this.Or.innerHTML=r,this.Cr=this.Or.querySelector("a")}Tr(){const t=this.ii;this.yr&&(t.addCSSClass(this.Mr,Ri),setTimeout((()=>{this.kr.removeChild(this.Mr),this.yr=!1}),600))}}const Zi=window.setTimeout,Gi=window.setInterval,qi=36e5,Yi=864e5,Ji="relTimeNow",Ki="relTimeMoment";class Xi{constructor(t,e){this.ii=e,this.Ns=t.i18n[t.locale];const i=t.icons,s=t.name,o="-has-message-icon";this.Xi=s,this.Lr=`${s}-left ${i.avatarBot?`${s}${o}`:""}`,this.Pr=`${s}-right ${i.avatarUser?`${s}${o}`:""}`}render(){const t=this.ii;let e=this.ur;return e?(e.setAttribute("aria-live","off"),e.setAttribute("aria-hidden","true")):e=t.createTextDiv(),e.className=`${this.Xi}-relative-timestamp ${this.jr}`,this.ur=e,e}setLocale(t){if(this.Ns=t,this.Fr)switch(this.Fr){case Ji:case Ki:this.Vr(t[this.Fr]);break;default:this.Vr(t[this.Fr].replace("{0}",`${this.Hr}`))}}setRelativeTime(t){const e=(new Date).getTime()-t.getTime(),i=Math.floor(e/1e3),s=Math.floor(i/60),o=Math.floor(s/60),r=Math.floor(o/24),n=Math.floor(r/30),a=Math.floor(n/12);a>0?this.Dr(a):n>0?this.Rr(n):r>0?this.Nr(r):o>0?this.Ur(o):s>0?this.Br(s):this.Wr(i)}refresh(t){this.jr=t===s.SenderType.Skill?this.Lr:this.Pr,this.ur.className=`${this.Xi}-relative-timestamp ${this.jr}`,this.Zr()}remove(){var t;(null===(t=this.ur)||void 0===t?void 0:t.parentElement)&&this.ur.remove()}Zr(){this.Gr(Ji,1e4,this.Wr.bind(this))}Wr(t=10){t*=1e3,this.Gr(Ki,6e4-t,this.Br.bind(this))}Br(t=1){this.qr("relTimeMin",6e4,60,this.Ur.bind(this),t)}Ur(t=1){this.qr("relTimeHr",qi,24,this.Nr.bind(this),t)}Nr(t=1){this.qr("relTimeDay",Yi,30,this.Rr.bind(this),t)}Rr(t=1){this.qr("relTimeMon",2592e6,12,this.Dr.bind(this),t)}Dr(t=1){this.qr("relTimeYr",31536e6,60,(()=>{}),t)}Gr(t,e,i){this.Yr(),this.Vr(this.Ns[t]),this.Fr=t,this.Jr=Zi((()=>{i()}),e)}qr(t,e,i,s,o=1){this.Yr(),this.Vr(this.Ns[t].replace("{0}",`${o}`)),this.Fr=t,this.Hr=o,this.Jr=Gi((()=>{o++,this.Hr=o,o>i?(clearInterval(this.Jr),s()):this.Vr(this.Ns[t].replace("{0}",`${o}`))}),e)}Vr(t){this.ur||this.render(),this.ur.innerText=t}Yr(){clearTimeout(this.Jr),clearInterval(this.Jr)}}class Qi{constructor(t,e,i){let o,r;if(this.U=e,this.Os=i,this.Ri=new $t("MultiLangChatComponent"),this.Kr=!0,this.Xr=!0,this.Qr=!1,this.tn={},this.sn={},this.rn=[],this.Ro=e.webCore,this.He=e.settings,this.nn=this.He.i18n[this.He.locale],this.Xi=e.settings.name,t&&(this.an=Object.assign(Object.assign({},t),{supportedLangs:t.supportedLangs?[...t.supportedLangs]:[]}),o=this.an.supportedLangs,r=this.an.primary,"string"==typeof r&&(this.an.primary=r.toLowerCase())),o&&o.length)if(o.forEach((t=>{t.lang=t.lang.toLowerCase()})),o.length>1?(o.unshift({lang:"und",label:this.nn.language_detect}),this.an.primary||(this.an.primary=null)):this.an.primary=o[0].lang,this.rn=o.map((t=>t.lang)),this.He.enableBotAudioResponse){const t=e.synthesisVoices;if(t&&t.length){const e={};o.filter((t=>t.lang&&"und"!==t.lang)).forEach((i=>{const s=t.filter((t=>t.lang.indexOf(i.lang)>=0));s.push({lang:i.lang}),e[i.lang]=s})),this.sn=e}else new Set(this.rn.filter((t=>"und"!==t))).forEach((t=>{this.sn[t]=[{lang:t,name:t}]}))}else this.cn=()=>{};if(this.He.enableSpeech){const t={};Object.values(s.RecognitionLocale).forEach((e=>{t[e.substring(0,2)]=e,t[e]=e})),es(s.RecognitionLocale.EN_GB,t),es(s.RecognitionLocale.EN_AU,t),es(s.RecognitionLocale.EN_IN,t),this.tn=t}else this.hn=()=>{}}render(t){const e=this.U.util,i=this.Xi,s="language-selection",o=`${i}-${s}-button`,r=`${i}-${s}-menu`,n=this.an;let a;if(this.Qr=t,!(n&&n.supportedLangs&&n.supportedLangs.length>=2))return null;if(!this.kr){const i=this.He.icons.language||_,c=e.createIconButton({css:["header-button","button-lang"],icon:i,iconCss:[],title:this.nn.languageSelectDropdown}),h=e.createListItem("action-menu-option-lang",this.nn.languageSelectDropdown,"lang",i,"action-item",null,!0),l=n.supportedLangs.map((t=>{var i;const{lang:o,label:r}=t,a="und"===o&&n.primary?n.primary:o,c=`language_${"und"===o?"detect":o}`,h=(null===(i=this.He.i18n[a])||void 0===i?void 0:i[c])||r||o;return e.createListItem(`${s}-option-${o}`,h,o,"",`${s}-option`,(t=>{let e=t.target;"LI"!==e.tagName&&(e=e.parentElement);const i=e.dataset.value;this.ln(i)}))})),u=e.getMenu({menuId:r,menuClassList:[`${s}-menu`],menuItems:l,buttonId:o,menuButton:t?h:c});if(t){a=e.getMenuButton({button:h,menuId:r,menu:u,widget:this.Os.chatWidgetDiv});const t=e.createDiv(["arrow-icon"]),i=e.createImageIcon({icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>'});t.appendChild(i),a.appendChild(t),this.U.chatWidget.chatWidgetDiv.appendChild(u)}else{a=e.createDiv();const t=e.getMenuButton({button:c,menuId:r,menu:u,widget:this.Os.chatWidgetDiv});a.appendChild(t),a.appendChild(u),c.id=o}this.disableComponent(!1)}return this.kr=a,a}setLocale(t){this.kr&&this.an.supportedLangs.forEach((e=>{const{lang:i,label:s}=e,o=`language_${"und"===i?"detect":i}`,r=document.getElementById(`language-selection-option-${i}`);if(!r)return;const n=t[o]||s||i;r.title=n}))}setTag(t,e=!0){let i="";null!==t&&(i=t.toLowerCase()),this.rn.length&&(i=this.rn.indexOf(i)>=0?i:null),this.ln(i,e)}disableComponent(t){if(this.kr){const e=this.U.util,i=this.kr;if(this.Qr){const s="disable";t?e.addCSSClass(i,s):e.removeCSSClass(i,s)}else i.querySelector("button").disabled=t}}ln(t,e=!0){let i=t;this.nn=this.He.i18n[i],this.un!==i&&(this.un=i,this.U.eventDispatcher.trigger(o.CHAT_LANG,i)),this.kr&&this.pn(i),"und"===i&&(i=null),e&&(this.dn(i),this.U.storageService.setItem(ts(this.He),i)),this.cn(i),this.hn(i),this.U.chatWidget.onLanguageUpdate(i,e)}dn(t){if(this.Ro.isConnected()){const e={profile:{languageTag:t}};t||(e.profile.locale=t);const i=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft};this.Ro.updateUser(e,{sdkMetadata:i}).catch((t=>this.Ri.warn("[updateProfile] Failed to update user profile:",t)))}}cn(t){const e=this.U.chatWidget;if(t){if(this.Kr||(e.enableSpeechSynthesisService(!0),this.Kr=!0),this.He.enableBotAudioResponse){const e=this.sn[t];this.Ro.setTTSVoice(e).catch((t=>{this.Ri.info(`Failed to set TTS voice for '${e[0].lang}'. ${t}`),this.cn(null)}))}}else this.Kr=!1,this.He.enableBotAudioResponse&&this.Ro.cancelTTS(),e.enableSpeechSynthesisService(!1)}hn(t){const e=this.U,i=this.tn[t],s=e.chatWidget;i?(this.Xr||(s.setVoiceRecognitionService(!0),this.Xr=!0),this.Ro.setRecognitionLocale(i)):(this.Xr=!1,this.Ro.stopRecognition(),this.Ro.setRecognitionLocale(null),s.setVoiceRecognitionService(!1))}pn(t){const e=this.U.util,i=t||"und",s=document.getElementById(`${this.Xi}-language-selection-menu`),o="active";if(s){const t=s.querySelector(`li.${this.Xi}-${o}`);t&&e.removeCSSClass(t,o);const r=s.querySelector(`[data-value="${i}"]`);r&&e.addCSSClass(r,o)}}initLanguage(){const{primary:t}=this.an||{},e=this.U.storageService.getItem(ts(this.He));let i=t;e&&(i="null"===e?null:e),void 0!==i&&this.setTag(i)}}function ts(t){return`${t.name}-${t.channelId}-${t.userId}`}function es(t,e){navigator.language.toLowerCase()===t&&(e[t.substring(0,2)]=t)}class is{constructor(t){this.getItem=t=>(!this.gn[t]&&this.mn&&(this.gn[t]=this.fn.getItem(t)),this.gn[t]),this.setItem=(t,e)=>{this.mn?(this.fn.setItem(t,e),delete this.gn[t]):this.gn[t]=e},this.removeItem=t=>{this.mn&&this.fn.removeItem(t),delete this.gn[t]},this.gn={},n(t)?(this.mn=!0,this.fn=window[t]):this.mn=!1}}const ss="keydown";class os{constructor(t){var e;this.bn=new Map,this.vn=!0,this.wn=t=>{if(rs(t)&&this.xn(t.code)){const t=document.querySelector(this.yn);if(t){const e=t.value.length;setTimeout((()=>{t.value.length>e&&(t.value=t.value.slice(0,e))}))}}};const i=null!==(e=t.name)&&void 0!==e?e:"oda-chat";this.yn=`.${i}-user-input`}add(t,e,i=!0){this.vn&&(this.kn(),this.vn=!1);const s=t.toUpperCase(),o=isNaN(s)?`Key${s}`:`Digit${s}`;this.bn.set(o,{check:i,elem:e}),e.setAttribute("aria-keyshortcuts",`Alt+${s}`)}setWidget(t){this.Os=t}remove(){document.removeEventListener(ss,this.wn)}kn(){document.addEventListener(ss,this.wn)}xn(t){let e=!1;const i=this.bn.get(t),s=i&&i.elem;return s&&ns(i.check?this.Os:s)&&!s.disabled&&(s.focus(),s.click(),e=!0),e}}const rs=t=>t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.repeat,ns=t=>null!==t.offsetParent,as="resize",cs=[`nw-${as}`,`se-${as}`,`nwse-${as}`,`w-${as}`,`e-${as}`],hs=[`ne-${as}`,`sw-${as}`,`nesw-${as}`,`e-${as}`,`w-${as}`];class ls{constructor(t,e,i){this.ur=t,this._n=e,this.zn=i,this.Mn=200,this.Sn=375,this.Cn=!1,this.Tn=!1}makeWidgetResizable(){const t=this.ur,e=this.zn,i=e.createDiv(["resizable",`top-${as}`]);i.addEventListener("mousedown",this.$n()),t.appendChild(i);const s=e.createDiv(["resizable",`left-${as}`]);s.addEventListener("mousedown",this.In()),t.appendChild(s);const o=e.createDiv(["resizable",`right-${as}`]);o.addEventListener("mousedown",this.In(!1)),t.appendChild(o);const r=e.createDiv(["resizable",`left-${as}`,"corner"]);r.addEventListener("mousedown",this.In(!0,!0)),r.addEventListener("mousedown",this.$n(!0)),t.appendChild(r);const n=e.createDiv(["resizable",`right-${as}`,"corner"]);n.addEventListener("mousedown",this.In(!1,!0)),n.addEventListener("mousedown",this.$n(!0)),t.appendChild(n)}In(t=!0,e=!1){const i=this.ur,s=t?cs:hs;let o;const r=r=>{const n=parseInt(getComputedStyle(i).maxWidth),a=i.offsetWidth;let c=o-r.x;t||(c=-c);const h=a+c;if(a<this.Sn&&(this.Sn=a),o=r.x,h<=this.Sn?document.body.style.cursor=e?this.Cn?s[0]:s[2]:s[3]:document.body.style.cursor=h>=n?e?this.Tn?s[1]:s[2]:s[4]:e?s[2]:`col-${as}`,h>=this.Sn&&h<=n){const t=`${h}px`;i.style.width=t,this._n(t)}r.preventDefault()},n=()=>{document.removeEventListener("mouseup",n,!1),document.removeEventListener("mousemove",r,!1),document.body.style.removeProperty("cursor")};return t=>{t.preventDefault(),o=t.x,document.addEventListener("mouseup",n,!1),document.addEventListener("mousemove",r,!1)}}$n(t=!1){const e=this.ur;let i;const s=s=>{const o=i-s.y,r=parseInt(getComputedStyle(e).maxHeight),n=e.offsetHeight,a=n+o;n<this.Mn&&(this.Mn=n),i=s.y,a<=this.Mn?(this.Cn=!0,t||(document.body.style.cursor=`n-${as}`)):a>=r?(this.Tn=!0,t||(document.body.style.cursor=`s-${as}`)):(this.Cn=!1,this.Tn=!1,t||(document.body.style.cursor=`row-${as}`)),a>=this.Mn&&a<=r&&(e.style.height=`${a}px`),s.preventDefault()},o=()=>{document.removeEventListener("mouseup",o,!1),document.removeEventListener("mousemove",s,!1),document.body.style.removeProperty("cursor")};return t=>{t.preventDefault(),i=t.y,document.addEventListener("mouseup",o,!1),document.addEventListener("mousemove",s,!1)}}}class us{constructor(t){this.vr=t,this.An=!1,this.On=t=>{bs(t)||t.code===a.KeyCode.Esc&&(this.close(),t.stopPropagation())},this.En=t=>{bs(t)||t.code===a.KeyCode.Tab&&(t.target!==this.Ln||t.shiftKey?t.target===this.Pn&&t.shiftKey&&(t.preventDefault(),this.Ln.focus()):(t.preventDefault(),this.Pn.focus()))}}open(){if(this.An)return;const{parent:t,autoDismiss:e}=this.vr;if(this.jn=document.activeElement,this.An=!0,t.append(this.render()),this.Fn(),this.Vn(),e){setTimeout((()=>{this.close()}),1e4)}}close(){if(!this.An)return;const{domUtil:t,fallbackFocus:e}=this.vr,i="dialog-out";t.addCSSClass(this.Hn,i),setTimeout((()=>{this.Dn(),t.removeCSSClass(this.Hn,i),this.Rn.remove(),this.jn&&this.jn.offsetParent?this.jn.focus():e(),this.An=!1}),200)}render(){const{title:t,description:e,domUtil:i,icon:s,actions:o,showDismiss:r,dismissLabel:n}=this.vr,a="dialog",c=i.createDiv.bind(i),h=i.cssPrefix,l=c([`${a}-wrapper`]),u=c([`${a}-backdrop`]),p=c([`${a}-icon-content-wrapper`,"flex"]),d=c([`${a}-content`]),g=c([a]);if(s){const t=i.createImageIcon({icon:s}),e=c([`${a}-icon`]);fs(e,t),fs(p,e)}const f=`${a}-title`,b=i.createElement("h2",[f],!0);if(b.id=`${h}-${f}`,b.textContent=t,fs(d,b),e){const t=`${a}-description`,s=i.createTextDiv([t]);s.id=`${h}-${t}`,s.textContent=e,fs(d,s),g.setAttribute("aria-describedby",s.id)}if(fs(p,d),fs(g,p),r){const t=`${a}-close-button`,e=i.createIconButton({css:[t],icon:m,title:n,iconCss:[`${t}-icon`]});ci(e,ms,this.close.bind(this)),fs(g,e)}if(o&&o.length){const t=c(["action-wrapper","flex"]);o.forEach((e=>{const s=["popup-action"];e.type===ps&&s.push(ps);const o=i.createButton(s);o.innerHTML=e.label,ci(o,ms,(t=>{e.handler(t)})),t.appendChild(o)})),fs(g,t)}return fs(l,u,g),ii(g,{role:"alertDialog","aria-modal":"true","aria-labelledby":b.id}),this.Hn=g,this.Rn=l,this.Nn(g),l}Nn(t){const e=t.querySelectorAll("[tabIndex]:not([tabIndex^='-']), button");this.Pn=e[0],this.Ln=e[e.length-1]}Fn(){this.Pn.focus()}Vn(){const t=this.Hn;ci(t,ds,this.En),ci(t,gs,this.On)}Dn(){const t=this.Hn;hi(t,ds,this.En,!0),hi(t,gs,this.On,!0)}}const ps="filled",ds="keydown",gs="keyup",ms="click",fs=(t,...e)=>{t.append(...e)},bs=t=>t.ctrlKey||t.metaKey||t.altKey,vs="none";class ws extends li{constructor(t,e,i,s,o,r){super(),this.He=t,this.ii=e,this.Ro=i,this.Un=s,this.Ct=o,this.As=r,this.Ri=new $t("SearchBarWidgetComponent");const{getSuggestions:n,sendMessage:a,uploadFile:c,Ts:h,Bn:l,Is:u,Es:p}=this.Un;this.Wn=new zi(this.ii,a.bind(s),c.bind(s),this.He,n.bind(s),h.bind(s),l.bind(s),u.bind(s),this.As,s,p.bind(s)),this.He.showTypingIndicator&&(this.Zn=new Vi(Ot.LEFT,this.He,this.ii))}get footer(){return this.Wn}get typingIndicator(){return this.Zn}render(){return this.Gn()}appendMessageToConversation(t){const e=this.qn;e.textContent="",e.appendChild(t),this.ii.removeCSSClass(e,vs)}renderMessage(t,e){const i=this.qn,s=this.ii;if(i){Se(t)||(i.textContent="");const o=this.Yn(t,e,i);o&&(Se(t)||s.addCSSClass(o,"user-message"),i.appendChild(o))}}showMessage(t,e){const i=this.ii.getMessage(e.render());i.id=t,this.qn.appendChild(i)}Gn(){const t=this.He,e=document.getElementById(t.targetElement);let i;if(e){const t=this.ii,s=t.createDiv(["search-bar-widget-wrapper","wrapper"]),o=t.createDiv(["search-bar-widget"]),r=t.createDiv(["search-bar-widget-content"]);i=t.createDiv(["search-bar-popup",vs]),this.element=e,this.Un.element=e,this.Wn.render();const n=this.Wn.element.querySelector("textarea"),a=this.Wn.getSuggestionsList(),c=e=>{const o=e.target;o.isConnected&&!s.contains(o)&&("true"===n.getAttribute("aria-expanded")?t.addCSSClass(a,vs):t.addCSSClass(i,vs),document.removeEventListener("click",c))},h=()=>{(null==a?void 0:a.hasChildNodes())?t.removeCSSClass(a,vs):i.hasChildNodes()&&t.removeCSSClass(i,vs),document.addEventListener("click",c)};this.Ro.isConnected()||this.Ct(),t.setChatWidgetWrapper(s),r.appendChild(i),o.appendChild(r),s.appendChild(this.Wn.element),s.appendChild(o),e.appendChild(s),this.qn=i,n.addEventListener("input",(()=>{n.value&&(null==a?void 0:a.hasChildNodes())?t.addCSSClass(i,vs):t.removeCSSClass(i,vs)})),document.addEventListener("click",c),this.Wn.element.addEventListener("click",(()=>document.addEventListener("click",c))),n.addEventListener("focus",h),n.addEventListener("click",h),null==a||a.addEventListener("click",(()=>{setTimeout((()=>{a.childElementCount&&document.removeEventListener("click",c)}))}))}else this.Ri.error(`Cannot fetch search bar using the passed target element: ${t.targetElement}`);return i}Yn(t,e,i){const s=this.He.delegate;if(s&&s.render){const e=this.ii.createDiv(["message"]);e.id=t.msgId,e.lang=this.He.locale,i.appendChild(e);if(s.render(t))return null;e.remove()}return e.render()}}const xs=window.BroadcastChannel,ys="collapsed",ks="expanded",_s="none",zs=window.setTimeout,Ms=[s.MessageType.Suggest,s.MessageType.SessionClosed,s.MessageType.CloseSession,s.MessageType.Status],Ss=[s.MessageType.Text,s.MessageType.Attachment,s.MessageType.Location,s.MessageType.FormSubmission];class Cs extends li{constructor(t,e,i){var r,n,c;super(),this.skillMessages=[],this.contextWidgetMap={},this.Jn=[],this.Ri=new $t("ChatComponent"),this.Kn=[],this.Xn=0,this.Qn=[],this.ta=!0,this.ea=!0,this.ia=!1,this.sa=!1,this.oa=!1,this.ra=!0,this.na=!1,this.aa=[],this.ca=1e4,this.ha=new Map,this.la=t=>{this.Ri.warn("[sendMessage] Failed to send message",t)},this.Ro=t,this.He=e,this.Ct=i&&(0,a.isFunction)(i.connect)?i.connect:()=>{this.Ro.connect().catch((t=>this.Ri.error("Failed to connect to backend:",t)))},this.ua=i&&(0,a.isFunction)(i.openChat)?i.openChat:()=>{},this.pa=i&&(0,a.isFunction)(i.closeChat)?i.closeChat:()=>{},this.As=(null==i?void 0:i.eventDispatcher)||(0,a.generateEventDispatcher)(),this.da=i&&(0,a.isFunction)(i.handleSessionEnd)?i.handleSessionEnd:()=>{},this.ga=i&&(0,a.isFunction)(i.receivedMessage)?i.receivedMessage:t=>{this.As.trigger(o.MESSAGE_RECEIVED,t),this.As.trigger(o.MESSAGE,t)},this.ma=i&&(0,a.isFunction)(i.sentMessage)?i.sentMessage:t=>{this.As.trigger(o.MESSAGE_SENT,t),this.As.trigger(o.MESSAGE,t)},this.fa=i&&(0,a.isFunction)(i.onConnectionStatusChange)?i.onConnectionStatusChange:()=>{},this.ba=i&&(0,a.isFunction)(i.getUnreadMessagesCount)?i.getUnreadMessagesCount:()=>this.getUnreadMsgsCount(),this.ii=(null==i?void 0:i.util)||new ai(this.He),this.Xi=this.He.name,this.va=this.He.locale,this.wa=this.He.i18n[this.He.locale],this.isOpen=!1,this.sa="init"===(null===(r=this.He.initMessageOptions)||void 0===r?void 0:r.sendAt)||this.He.openChatOnLoad||this.He.embedded,this.ia=this.He.enableHeadless,this.xa=!this.He.embedded&&!this.He.sidepanel&&this.He.enableResizableWidget,this.ya=this.He.enableDefaultClientResponse,this.ka=this.He.enableLocalConversationHistory&&this.He.storageType!==Ie.CUSTOM,this.configureStorage(),this._a=!1;const h=this.za.getItem(this.Ma);h&&(this.He.icons.avatarUser=h),this.He.enableTabsSync||(this.Sa=()=>{}),this.He.threadId&&(this.ke=this.He.threadId,this.Ro.setCurrentThreadId(this.He.threadId)),this.Ca=()=>this.Ta(),this.Wo=t=>this.$a(t),this.Ia=t=>{const e=t,{endOfTurn:i,messagePayload:o,threadId:r}=e,n=Boolean(null==r?void 0:r.startsWith(`${s.ContextSource.UIWidget}:`));let a;if(n&&(a=this.contextWidgetMap[r]),o){if(o.type===s.MessageType.ExecuteApplicationActionCommand){const t=o;return n?a.showFullSizeWidget():this.Aa(Boolean(i)),void this.As.trigger(t.actionType,t)}if(n)a.onMessageReceived(e);else{const t=o.type===s.MessageType.Command&&"noReply"===o.command;r!==this.ke?this.Oa(r).then((()=>{t||this.Ea(e)})):t||this.Ea(e)}}else console.warn("Message Payload Not available")},this.Ro.on(s.CoreEvent.Open,this.Ca),this.Ro.on(s.CoreEvent.State,this.Wo),this.Ro.on(s.CoreEvent.MessageReceived,this.Ia),this.He.enableVoiceOnlyMode&&(this.La=()=>this.Ts(!0,this.He.enableVoiceOnlyMode),this.Ro.on(s.CoreEvent.TTSStop,this.La)),this.He.enableBotAudioResponse&&(this.ea=this.He.initBotAudioMuted),this.He.searchBarMode?(this.Pa=new ws(this.He,this.ii,this.Ro,this,this.Ct,this.As),this.Wn=this.Pa.footer,this.Zn=this.Pa.typingIndicator,this.ja=()=>{},this.updateNotificationBadge=()=>{},this.Fa=()=>{},this.Va=()=>{}):(this.$r=new Oi(this.He,this.ii,null===(n=this.pa)||void 0===n?void 0:n.bind(this),this.clearConversationHistory.bind(this),this.onToggleNarration.bind(this),this.Ro,this.Ha.bind(this),this.Es.bind(this),this),this.Wn=new zi(this.ii,this.sendMessage.bind(this),this.uploadFile.bind(this),this.He,this.getSuggestions.bind(this),this.Ts.bind(this),this.Bn.bind(this),this.Is.bind(this),this.As,this,this.Es.bind(this)),this.He.showTypingIndicator&&(this.Zn=new Vi(Ot.LEFT,this.He,this.ii)),!this.He.enableTimestamp||"relative"!==this.He.timestampMode&&"default"!==this.He.timestampMode?(this.Va=()=>{},this.Fa=()=>{}):this.Da=new Xi(this.He,this.ii)),"action"!==(null===(c=this.He.focusOnNewMessage)||void 0===c?void 0:c.toLowerCase())&&(this.Ra=()=>{});const l=this.za.getItem(this.Na);l&&(this.Ua=JSON.parse(l),this.Ba()),this.Ro.isConnected()&&this.Ta()}render(){const t=this.He,e=this.ii;var i,s;"undefined"!=typeof window&&(this.Wa(),i=t.position,(s=e).updateCSSVar("--position-top",i.top||"unset"),s.updateCSSVar("--position-left",i.left||"unset"),s.updateCSSVar("--position-right",i.right||"unset"),s.updateCSSVar("--position-bottom",i.bottom||"unset"),i.bottom&&s.updateCSSVar("--widget-max-height",`calc(100vh - 60px - ${i.bottom})`),t.font&&e.updateCSSVar("font",t.font),t.fontFamily&&e.updateCSSVar("font-family",t.fontFamily),t.fontSize&&e.updateCSSVar("font-size",t.fontSize)),t.searchBarMode?this.qn=this.Pa.render():(this.element=this.Zs(),this.Za(),t.multiLangChat&&this.Ga()),this.qa(t),this.Ya(),this.$a(this.Ro.getState())}embedInElement(t){const e=document.getElementById(t);if(!e)throw new Error("Can not embed chat widget.");this.ii.addCSSClass(e,"wrapper",this.He.theme,"embedded"),this.appendToElement(e)}showChat(){if(!this.isOpen){const t=this.ii;t.removeCSSClass(this.element,ys),t.addCSSClass(this.element,ks),t.removeCSSClass(this.chatWidgetDiv,_s),this.He.embedded||zs((()=>{t.addCSSClass(this.Ja,_s)}),250),this.isOpen=!0,this.sa=!0,this.updateNotificationBadge(0),this.ja(),this.Wn.focusTextArea(),this.Ta()}}onClose(){if(this.isOpen){const t=this.ii;this.Ka(),t.removeCSSClass(this.element,ks),t.addCSSClass(this.element,ys),this.He.embedded||(t.removeCSSClass(this.Ja,_s),zs((()=>{t.addCSSClass(this.chatWidgetDiv,_s),this.Ja.focus()}),250),this.updateNotificationBadge(this.ba())),this.isOpen=!1}}sendExitEvent(){const t={messagePayload:{type:s.MessageType.CloseSession},userId:this.He.userId};if(this.He.delegate&&this.He.delegate.beforeEndConversation&&(0,a.isFunction)(this.He.delegate.beforeEndConversation))try{this.He.delegate.beforeEndConversation(t).then((t=>{t&&this.sendMessage(t,{hidden:!0,delegate:!1}).catch(this.la)}))}catch(t){this.Ri.error(t)}else this.sendMessage(t,{hidden:!0,delegate:!1}).catch(this.la);this.ia=!1}updateNotificationBadge(t){var e;this.Xn=t,t>0?this.Xa&&(this.Xa.innerText=`${t}`,this.Ja.appendChild(this.Xa)):(null===(e=this.Xa)||void 0===e?void 0:e.parentElement)&&this.Xa.remove()}onToggleNarration(t){this.Qa(t),this.As.trigger(o.CLICK_AUDIO_RESPONSE_TOGGLE,t)}remove(){var t;super.remove(),null===(t=this.$r)||void 0===t||t.remove(),this.Ro.off(s.CoreEvent.Open,this.Ca),this.Ro.off(s.CoreEvent.State,this.Wo),this.Ro.off(s.CoreEvent.MessageReceived,this.Ia),this.La&&this.Ro.off(s.CoreEvent.TTSStop,this.La),this.He.embedded&&window.removeEventListener("resize",this.tc);const e=this.ec;e&&e.remove()}clearConversationHistory(t=!1){t?this.ic(t):(this.clearMessages(this.He.userId),this.ic(),this.sc({type:"actionClearHistory"})),this.oc=null,this.aa=[],this.skillMessages=[],this.Aa(),this.updateNotificationBadge(0)}clearMessages(t,e){const i=this.He;if(i.storageType===Ie.CUSTOM){const t=i.conversationHistoryProvider;(0,a.isFunction)(null==t?void 0:t.deleteMessages)?t.deleteMessages({threadId:i.threadId}):this.Ri.warn("Can not clear conversation history. Pass conversationHistoryProvider object with deleteMessages function when custom storage is enabled.")}else{const s=`${i.name}-${t}-messages`;(e?window[e]:this.za).getItem(s)&&this.za.removeItem(s)}}clearAllMessage(){const t=null===window||void 0===window?void 0:window.localStorage,e=(null==t?void 0:t.length)||0;if(e){const i=/oda-chat-.*-messages/g;for(let s=0;s<e;s++){const e=t.key(s);(null==e?void 0:e.match(i))&&t.removeItem(e)}}}setUserInputMessage(t){this.Wn.setUserInputText(t)}setUserInputPlaceholder(t){this.Wn.setUserInputPlaceholder(t)}getWebViewComponent(){return this.rc}refreshWebView(t){this.rc.setProps(t),this.nc.remove(),this.nc=this.rc.render(),this.chatWidgetDiv.appendChild(this.nc)}orientWidgetAnimation(){const t=this.element,e=Math.floor(window.innerWidth/2),i=t.offsetLeft;i<0?t.style.left="10px":i>window.innerWidth&&(t.style.right="10px"),i<e&&this.ii.addCSSClass(t,"pos-left")}updateFullScreenWidth(t){const e=this.He.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv,i=this.ii;if(i.updateCSSVar("--width-full-screen",t),e){const s=parseInt(t);s>=1024?(i.addCSSClass(e,"large-size"),i.removeCSSClass(e,"medium-size")):s>=900?(i.addCSSClass(e,"medium-size"),i.removeCSSClass(e,"large-size")):(i.removeCSSClass(e,"medium-size"),i.removeCSSClass(e,"large-size"))}}setHeight(t){const e=this.chatWidgetDiv;e&&!this.He.sidepanel&&(e.style.height=t,this.He.height=t)}setWidth(t){const e=this.He.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv;e&&(e.style.width=t,this.He.width=t,this.updateFullScreenWidth(t))}setSize(t,e){this.setHeight(e),this.setWidth(t)}setMessagePadding(t){this.ac("message-bubble",{padding:t}),this.He.messagePadding=t}setChatBubbleIconHeight(t){this.ac("typing-cue-wrapper",{height:t}),this.He.height=t}setChatBubbleIconWidth(t){this.ac("typing-cue-wrapper",{width:t}),this.He.width=t}setChatBubbleIconSize(t,e){this.ac("typing-cue-wrapper",{height:e,width:t}),this.He.width=t,this.He.height=e}onMessageActionClicked(t){const e=this.ii,i=this.wa;switch(this.Ts(!1),t.type){case s.ActionType.Postback:this.cc(this.Qn),this.ja(),t.getPayload().then((i=>{const{label:o,imageUrl:r}=t;this.sendMessage((0,s.buildUserMessage)({postback:i,text:r?e.createImage(r,[],o||"").outerHTML:o,type:s.MessageType.Postback})).catch((()=>{this.hc(this.Qn)}))}));break;case s.ActionType.Location:this.Bn();break;case s.ActionType.Share:navigator.share?t.getPayload().then((e=>navigator.share({text:e,title:t.label}))):this.lc(i.shareFailureMessage,V);break;case s.ActionType.SubmitForm:const o=t.messageComponent;if(!o.validateForm())break;const r=o.getSubmittedFields();if(this.ka){const t=this.getMessages();for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.msgId===o.msgId&&i.messagePayload.type===s.MessageType.EditForm){const t=i.messagePayload;(0,s.isEditFormPayloadWithFields)(t)?t.fields.forEach((t=>{(0,s.isReadOnlyField)(t)||(t.defaultValue=r[t.id])})):t.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,s.isReadOnlyField)(t)||(t.defaultValue=r[t.id])}))}))}));break}}this.za.setItem(this.uc,JSON.stringify(t))}this.ja(),t.getPayload().then((t=>{const e={postback:t,submittedFields:r,type:s.MessageType.FormSubmission};t||delete e.postback,this.sendMessage((0,s.buildUserMessage)(e),{hidden:!0}).catch(this.la)}));break;case s.ActionType.Call:t.getPayload().then((t=>{e.createAnchor(`tel:${t}`,"").click()}));break;case s.ActionType.Client:t.getPayload().then((t=>{"string"==typeof t?navigator.clipboard?navigator.clipboard.writeText(t).then((()=>{this.lc(i.copySuccessMessage,L)})):this.lc(i.copyFailureMessage,V):this.As.trigger(t.actionType,t)}));break;default:t.getPayload().then((i=>{e.createAnchor(i,"",[],this.He.openLinksInNewWindow,t.type===s.ActionType.Url?this.He.linkHandler:this.dc).click()}))}}applyDelegates(t){var e;let i;i="string"==typeof t?(0,s.buildUserTextMessage)(t,null===(e=this.speechFinalResult)||void 0===e?void 0:e.speechId):(0,s.isPostbackPayload)(t)?(0,s.buildPostbackMessage)(t):(0,s.isMessagePayload)(t)?(0,s.buildUserMessage)(t):t;const o=i.messagePayload.type,r=this.He.delegate,n=r.beforePostbackSend,c=r.beforeSend;return o===s.MessageType.Postback&&(0,a.isFunction)(n)?i=this.gc(i,n):Ss.includes(o)&&(0,a.isFunction)(c)&&(i=this.gc(i,c)),i}sendMessage(t,e){if(this.mc)return $s();this.Aa(),!this.He.enableSpeechAutoSend&&this.speechFinalResult&&"string"==typeof t&&t.toLowerCase().indexOf(this.speechFinalResult.text.toLowerCase())>=0&&(t=(0,s.buildUserTextMessage)(t,this.speechFinalResult.speechId)),this.Wn.focusTextArea(),this.Ka(),void 0===(e=e||{}).delegate&&(e.delegate=!0),e.delegate&&this.He.delegate&&(t=this.applyDelegates(t));const i=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft};return t&&this.Ro.sendMessage(t,{sdkMetadata:i}).then((i=>{this.Ri.debug("onMessageSent",t),(0,s.isEventPayload)(i.messagePayload)||(this.ma&&this.ma(i),this.fc(),this.na=!1,this.ya&&this.bc(),this.speechFinalResult=null,(null==e?void 0:e.hidden)?this.oc=s.SenderType.User:this.vc(i),this.getAgentDetails()||this.showTypingIndicator())}))}uploadFile(t,e){if(this.mc)return $s();const i=this.wa;this.Ka(),this.fc();const o=new Promise(((o,r)=>{var n,a;if(this.He.enableHeadless){const e=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft};this.Ro.uploadAttachment(t,{sdkMetadata:e}).then((t=>this.Ro.sendMessage(this.He.delegate?this.applyDelegates(t):t,{sdkMetadata:e}))).then(o).catch(r)}else{this.ja();const c=`${null===(n=t.name)||void 0===n?void 0:n.replace(/[\s:'"\\/[\]~,.;^`()@#%*+=$&!{}?<>|]/g,"")}${Math.floor(1e4+9e4*Math.random())}${Date.now()%1e5}`,h=this.ii.createDiv();if(h.id=c,this.Kn.push({divId:c,fileName:t.name}),this.Va(new Date),this.wc(h),this.xc=this.customFileMaxSize?this.customFileMaxSize:e?e.maxSize:Ht,t.size>this.xc){this.ja();const e=this.xc/1048576;let o=e.toString();"number"==typeof(a=e)&&isFinite(a)&&Math.floor(a)===a||(o=e.toFixed(3));const n=`${t.name} - ${i.uploadFailed}`,h=i.uploadFileSizeLimitExceeded.replace("{0}",o);this.yc(n,h,c),this.Fa(s.SenderType.User),r(new Error(h))}else if(0===t.size){this.ja();const e=`${t.name} - ${i.uploadFailed}`,o=i.uploadFileSizeZeroByte;this.yc(e,o,c),this.Fa(s.SenderType.User),r(new Error(o))}else{const e=new ji(t.name,Ot.RIGHT,this.He,this.ii),i=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft};this.Fa(s.SenderType.User),h.appendChild(e.render()),this.ja(),this.Ro.uploadAttachment(t,{sdkMetadata:i}).then((t=>this.Ro.sendMessage(this.He.delegate?this.applyDelegates(t):t,{sdkMetadata:i}))).then((e=>{e.messagePayload.attachment.title=t.name,h.remove(),this.Kn=this.Kn.filter((t=>t.divId!==c)),this.ra=!1,this.ma&&this.ma(e),this.vc(e),o(e)})).catch((e=>{this.kc(t.name,e.message,c),r(e)}))}}}));return o.catch((t=>{this.Ri.error(t)})),o}refreshTTS(){this.$r.showTTSButton(!!this.He.ttsService)}getSuggestions(t){if(this.mc)return $s();if(!this.He.enableAutocompleteClientCache||this.He.enableAutocompleteClientCache&&!this.Wn.getSuggestionsValid())return this.Ro.getSuggestions(t).then((t=>(this.Wn.displaySuggestions(t),t))).catch((t=>(this.Ri.debug("[getSuggestions] Failed to receive suggestions, reset list:",t),[])));const e=this._c(this.Wn.getSuggestions(),t);return null!==this.Wn&&this.Wn.displaySuggestions(e),Promise.resolve(e)}getUnreadMsgsCount(){return this.Xn}getMessages(){const t=this.za.getItem(this.uc);let e=[];if(t)try{e=JSON.parse(t).map((t=>Object.assign({},t)))}catch(t){this.Ri.error("Failed to parse saved chat.")}return e}getAgentDetails(){return this.Ua}setAgentDetails(t){this.Ua=Object.assign(Object.assign({},this.Ua),t),this.Ba(),this.za.setItem(this.Na,JSON.stringify(this.Ua))}setUserAvatar(t){this.He.icons.avatarUser=t,this.za.setItem(this.Ma,t);document.querySelectorAll(`.${this.Xi}-right .${this.Xi}-message-icon`).forEach((e=>{e.parentElement.replaceWith(this.zc(t,this.wa.avatarUser))}))}Mc(t){const e=Object.assign({date:Date.now()},t);if(this.Jn.push(e),this.He.storageType===Ie.CUSTOM){const t=this.He.conversationHistoryProvider;(0,a.isFunction)(null==t?void 0:t.saveMessage)?t.saveMessage(e):this.Ri.warn("Can not save conversation history. Pass conversationHistoryProvider object with saveMessage function when custom storage is enabled.")}else if(this.ka){const t=this.getMessages();t.length>=this.He.messageCacheSizeLimit&&t.splice(0,t.length-(this.He.messageCacheSizeLimit-1)),t.push(e),this.za.setItem(this.uc,JSON.stringify(t))}}configureStorage(){const t=this.He;this.ka&&(t.userId?t.storageType!==Ie.LOCAL&&t.storageType!==Ie.SESSION&&(t.storageType=Ie.LOCAL):t.storageType=Ie.SESSION),this.uc=`${t.name}-${t.userId}-messages`,this.Na=`${t.name}-${t.userId}-agent-details`,this.Ma=`${t.name}-${t.userId}-user-avatar`,this.za=new is(t.storageType)}setVoiceRecognitionService(t){this.Wn.disableVoiceModeButton(!t,{src:"lang"})}enableSpeechSynthesisService(t){this.$r.disableTTSButton(!t)}onShareLocation(){this.Bn()}setPrimaryChatLanguage(t){this.Sc.setTag(t)}onLanguageUpdate(t,e=!0){const i=this.He.i18n,s=Object.assign(Object.assign(Object.assign({},i.en),i[this.He.locale]),i[t]);e&&this.sc({type:"actionLanguage",tag:t}),this.va=t,this.Ja.title=s.chatButtonTitle||s.chatTitle,this.$r.setLocale(s),this.Wn.setLocale(s),this.He.showTypingIndicator&&this.Zn.updateTypingCueLocale(s.typingIndicator);document.querySelectorAll(`.${this.Xi}-message-icon`).forEach((t=>{const e=t.parentElement.parentElement.className.indexOf(`${this.Xi}-left`)<0?s.avatarUser:s.avatarBot;"img"===t.localName?t.alt=e:t.setAttribute("aria-label",e)})),this.refreshWebView({accessibilityTitle:s.webViewAccessibilityTitle,closeButtonLabel:s.webViewClose,errorInfoDismissLabel:s.webViewErrorInfoDismiss,errorInfoText:s.webViewErrorInfoText}),this.Sc&&this.Sc.setLocale(s),this.Cc&&(this.Cc.textContent=(0,a.formatDate)(this.Tc,{pattern:this.He.timestampFormat,locale:t})),this.Da&&this.Da.setLocale(s),this.$c&&(this.$c.innerText=s.previousChats),this.wa=s}showTypingIndicator(){const t=document.getElementById(`${this.Xi}-connection-error`);t&&t.remove(),this.He.showTypingIndicator&&(this.He.searchBarMode?this.Zn.append(this.qn):(this.Zn.append(this.Ic),this.ja()))}hideTypingIndicator(){this.He.showTypingIndicator&&this.Zn.remove()}showConnectionError(){const t={messagePayload:{type:s.MessageType.Text,text:(0,a.safeHTML)(this.wa.connectionFailureMessage),globalActions:[{type:s.ActionType.Postback,label:this.wa.connectionRetryLabel}]},source:s.SkillMessageSource.Bot},e=$e.fromMessage(this.He,this.ii,t);e.onActionClick=()=>{this.Ct()},this.showMessage(`${this.Xi}-connection-error`,e)}showMessage(t,e){var i;if(this.He.searchBarMode)this.Pa.showMessage(t,e);else{const i=this.ii.wrapMessageBlock(e.render(),this.He.icons.avatarBot,Ot.LEFT);i.id=t,this.Ic.appendChild(i)}(null===(i=this.Zn)||void 0===i?void 0:i.isVisible())&&this.hideTypingIndicator(),this.ja()}showWidget(){this.Ac(!0)}hideWidget(){this.Ac(!1)}Ac(t){const e=this.He;if(e.embedded||e.enableHeadless)return;const i=this.chatWidgetWrapper,s=`${this.ii.cssPrefix}-none`;i&&i.classList.contains(s)===t&&(i.classList.toggle(s),this.As.trigger(t?o.WIDGET_SHOW:o.WIDGET_HIDE))}Oc(t){if(this.ra=!1,!this.na){const e={source:s.SkillMessageSource.Bot,messagePayload:{type:s.MessageType.Text,text:t},userId:this.He.userId,msgId:`${Date.now()}`};this.Mc(e),this.Ec(t),this.Lc([e])}}bc(){const t=this.wa;this.Pc=zs((()=>{this.ra&&this.Oc(t.defaultGreetingMessage),this.jc=window.setInterval((()=>{this.Oc(t.defaultWaitMessage)}),this.He.defaultWaitMessageInterval*Dt),this.Fc=zs((()=>{window.clearInterval(this.jc)}),(this.He.typingIndicatorTimeout-1)*Dt),this.Pc=zs((()=>{this.hideTypingIndicator(),this.Oc(t.defaultSorryMessage)}),this.He.typingIndicatorTimeout*Dt)}),this.He.defaultGreetingTimeout*Dt)}$a(t){var e,i;if(Number.isInteger(t)&&t!==s.ConnectionState.Open){this.Vc(),this.Wn.isDisabled()||(this.Wn.disable(),null===(e=this.$r)||void 0===e||e.disable(),this.Ri.debug("WebSocket not open, send message button disabled")),this.Hc(),t===s.ConnectionState.Connecting?this.showTypingIndicator():this.hideTypingIndicator();for(const t of this.Kn)this.kc(t.fileName,s.CoreError.UploadNetworkFail,t.divId);this.Sc&&this.Sc.disableComponent(!0)}else this.Dc=void 0,this.hideTypingIndicator(),this.Sa(),this.Wn.isDisabled()&&(this.Wn.disable(!1),null===(i=this.$r)||void 0===i||i.disable(!1),this.Ri.debug("Connection established, send message button enabled")),this.Rc();this.fa(t)}Ga(){const t=this.He;this.Sc=new Qi(t.multiLangChat,{webCore:this.Ro,chatWidget:this,eventDispatcher:this.As,settings:t,synthesisVoices:t.ttsVoice,storageService:new is(t.storageType),util:this.ii},this),this.$r.addLanguageSelect(this.Sc)}Bn(){const t=this.wa;if(navigator&&navigator.geolocation){const e=new ji(t.requestLocation,Ot.RIGHT,this.He,this.ii);this.wc(e.render()),this.ja(),(0,s.getCurrentPosition)().then((t=>{const i=(0,s.buildUserMessage)({location:{latitude:t.latitude,longitude:t.longitude,title:void 0},type:s.MessageType.Location});e.remove(),this.sendMessage(i).catch(this.la)}),(i=>{let s;switch(i.code){case i.PERMISSION_DENIED:s=t.requestLocationDeniedPermission;break;case i.POSITION_UNAVAILABLE:s=t.requestLocationDeniedUnavailable;break;case i.TIMEOUT:s=t.requestLocationDeniedTimeout;break;default:s=t.requestLocationDeniedPermission}this.lc(s,V),e.remove()}))}else this.lc(t.requestLocationDeniedUnavailable,V)}_c(t,e){const i=[];for(const s of t)s.search(new RegExp(e,"i"))>=0&&i.push(s);return i}kc(t,e,i){const o=this.wa,r=`${t} - ${o.uploadFailed}`;let n="";switch(e){case s.CoreError.UploadMaxSize:n=o.uploadFileSizeLimitExceeded.replace("{0}",this.xc.toString());break;case s.CoreError.UploadZeroSize:n=o.uploadFileSizeZeroByte;break;case s.CoreError.UploadBadFile:n=o.uploadUnsupportedFileType;break;case s.CoreError.UploadNetworkFail:n=o.uploadFileNetworkFailure;break;case s.CoreError.UploadUnauthorized:n=o.uploadUnauthorized}this.yc(r,n,i)}gc(t,e){var i;const o=JSON.parse(JSON.stringify(t));let r,n=JSON.parse(JSON.stringify(t));t.messagePayload.type===s.MessageType.Text&&(null===(i=t.sdkMetadata)||void 0===i?void 0:i.speechId)&&(r=(t.messagePayload.text||"").toLowerCase());try{n=e(o)}catch(t){this.Ri.error(t)}if(n&&n.messagePayload||(n=null),n&&!(0,s.isValidMessage)(n)&&(this.Ri.error("The generated delegate message is invalid. Sending original message instead."),n=t),r&&n)if(n.messagePayload)if(n.messagePayload.type===s.MessageType.Text){const t=n.messagePayload.text;(null==t?void 0:t.toLowerCase().indexOf(r))<0&&delete n.sdkMetadata}else delete n.sdkMetadata;else delete n.sdkMetadata;return n}yc(t,e,i){const s=document.getElementById(i);if(s){s.firstElementChild&&s.removeChild(s.firstElementChild),this.Kn=this.Kn.filter((t=>t.divId!==i));const o=new Fi(t,e,Ot.RIGHT,this.He,this.ii,!0),r=this.He.icons.error||v;s.appendChild(o.render(r))}}Nc(t,e){const i=this.ii;let s,o,r=!1,n=!1,a=0,c=0,h=0,l=0,u=0,p=0;const d=t=>{let e,i;const s=t.target.classList;for(let o=0;o<s.length;o++){s[o].indexOf("button-drag-handle")&&("touchstart"===t.type?(e=t.touches[0].clientX,i=t.touches[0].clientY):(e=t.clientX,i=t.clientY),a=e-h,c=i-l,u=e,p=i,r=!0)}},g=d=>{let g,m;if(r){"touchmove"===d.type?(g=d.touches[0].clientX,m=d.touches[0].clientY):(g=d.clientX,m=d.clientY);const r=g-u,f=m-p;s=g-a,o=m-c,h=s,l=o,(r>=5||f>=5||r<=-5||f<=-5)&&(i.addCSSClass(t,"drag"),e.style.transform=`translate3d(${s}px, ${o}px, 0)`,e.onclick=null,n=!0)}},m=()=>{if(n){zs((()=>{var t;e.onclick=null===(t=this.ua)||void 0===t?void 0:t.bind(this)}),10),e.focus(),n=!1}r=!1},f=i.createDiv(["button-drag-handle"]);e.appendChild(f),e.addEventListener("touchstart",d),document.addEventListener("touchmove",g),e.addEventListener("touchend",m),e.addEventListener("mousedown",d),document.addEventListener("mousemove",g),e.addEventListener("mouseup",m)}addHeaderAction(t){this.$r.addAction(t)}updateHeaderAction(t){this.$r.hr(t)}on(t,e){switch(t){case s.SpeechSynthesisServiceEvent.TTSStart:case s.SpeechSynthesisServiceEvent.TTSStop:this.Ro.on(t,e);break;default:this.As.bind(t,e)}}off(t,e){switch(t){case s.SpeechSynthesisServiceEvent.TTSStart:case s.SpeechSynthesisServiceEvent.TTSStop:this.Ro.off(t,e);break;default:this.As.unbind(t,e)}}Zs(){var t,e,i,s,o,r;const n=this.He,a=this.ii,c=this.wa,h=a.createDiv(n.embedded?[]:["wrapper",n.theme,n.enableHeadless?"none":""]);this.chatWidgetDiv=a.createDiv(["widget","flex","col"]),this.chatWidgetDiv.setAttribute("role","region"),this.chatWidgetDiv.setAttribute("aria-labelledby",`${this.Xi}-title`),this.ii.setChatWidgetWrapper(h),this.$r.render(),this.chatWidgetDiv.appendChild(this.$r.element),n.embedTopStickyId&&this.Uc(n.embedTopStickyId,this.chatWidgetDiv,["embed-sticky-top"]),this.Bc=new Li(a),this.Wc=a.createDiv(["conversation-pane",n.icons.avatarBot?"bot-icon":"",n.icons.avatarUser?"user-icon":""]),"bottom"===n.conversationBeginPosition&&(this.Wc.style.marginTop="auto"),n.embedTopScrollId&&this.Uc(n.embedTopScrollId,this.Wc,["embed-scroll-top"]),this.Ic=a.createDiv(["conversation-container"]),this.Ic.setAttribute("role","log"),this.Ic.setAttribute("aria-live","polite"),this.Ic.setAttribute("aria-atomic","false"),this.Wc.appendChild(this.Ic),this.Bc.element.appendChild(this.Wc),n.embedBottomScrollId&&this.Uc(n.embedBottomScrollId,this.Bc.element,["embed-scroll-bottom"]),this.chatWidgetDiv.appendChild(this.Bc.element),n.embedBottomStickyId&&this.Uc(n.embedBottomStickyId,this.chatWidgetDiv,["embed-sticky-bottom"]),this.Wn.render(),this.chatWidgetDiv.appendChild(this.Wn.element),(e=n.webViewConfig).accessibilityTitle||(e.accessibilityTitle=c.webViewAccessibilityTitle),(i=n.webViewConfig).closeButtonLabel||(i.closeButtonLabel=c.webViewClose),(s=n.webViewConfig).errorInfoDismissLabel||(s.errorInfoDismissLabel=c.webViewErrorInfoDismiss),(o=n.webViewConfig).errorInfoText||(o.errorInfoText=c.webViewErrorInfoText),(r=n.webViewConfig).closeButtonIcon||(r.closeButtonIcon=n.icons.close),this.rc=new Wi(n.webViewConfig,a,n),this.nc=this.rc.render(),this.chatWidgetDiv.appendChild(this.nc);const l=this.rc,u=`${this.Xi}-webview`;if(this.dc={target:u,onclick:function(){l.open(this.href)}},n.linkHandler&&n.linkHandler.target===u&&(n.linkHandler=this.dc),h.appendChild(this.chatWidgetDiv),n.embedded)this.isOpen=!0,a.addCSSClass(h,"open");else{const e=n.icons.launch||(n.colors&&n.colors.branding?z.replace("#025e7e",n.colors.branding):z),i="button",s=a.createIconButton({css:[i],icon:e,iconCss:[`${i}-icon`],title:c.chatButtonTitle||c.chatTitle});s.classList.remove(`${this.Xi}-icon`),this.Ja=s,this.Ja.onclick=null===(t=this.ua)||void 0===t?void 0:t.bind(this),this.Xa=a.createTextDiv(["notification-badge"]),h.appendChild(s),this.ha.set("launch",s),n.enableDraggableButton&&this.Nc(h,s),n.openChatOnLoad||a.addCSSClass(h,ys),a.addCSSClass(this.chatWidgetDiv,_s)}if(this.chatWidgetWrapper=h,n.sidepanel){const t=t=>{const e=window.screen.width-t.x;if(a.addCSSClass(this.chatWidgetWrapper,"drag"),document.body.style.cursor=e<=375?"w-resize":e>=800?"e-resize":"col-resize",e>=375&&e<=800){const t=`${e}px`;this.chatWidgetWrapper.style.width=t,this.updateFullScreenWidth(t)}t.preventDefault()};h.addEventListener("mousedown",(e=>{e.offsetX<4&&document.addEventListener("mousemove",t,!1)}),!1),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",t,!1),a.removeCSSClass(this.chatWidgetWrapper,"drag"),this.chatWidgetWrapper.style.removeProperty("cursor"),document.body.style.removeProperty("cursor")}),!1)}else if(this.xa){new ls(this.chatWidgetDiv,this.updateFullScreenWidth.bind(this),a).makeWidgetResizable()}return this.chatWidgetWrapper}Wa(){const t=this.He;if(!t.disableInlineCSS){let t=!1;const e=document.head.children,i=document.createElement("style");i.appendChild(document.createTextNode('@keyframes scale-in-center{0%{opacity:1;transform:scale(0)}100%{opacity:1;transform:scale(1)}}@keyframes scale-out-center{0%{display:flex;opacity:1;transform:scale(1)}100%{display:none;opacity:1;transform:scale(0)}}@keyframes scale-in-br{0%{opacity:1;transform:scale(0);transform-origin:100% 100%}100%{opacity:1;transform:scale(1);transform-origin:100% 100%}}@keyframes scale-in-bl{0%{opacity:1;transform:scale(0);transform-origin:0 100%}100%{opacity:1;transform:scale(1);transform-origin:0 100%}}@keyframes scale-in-tl{0%{opacity:1;transform:scale(0);transform-origin:0 0}100%{opacity:1;transform:scale(1);transform-origin:0 0}}@keyframes scale-in-tr{0%{opacity:1;transform:scale(0);transform-origin:100% 0}100%{opacity:1;transform:scale(1);transform-origin:100% 0}}@keyframes scale-out-br{0%{opacity:1;transform:scale(1);transform-origin:100% 100%}99%{opacity:1;transform:scale(0.01);transform-origin:100% 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:100% 100%}}@keyframes scale-out-bl{0%{opacity:1;transform:scale(1);transform-origin:0 100%}99%{opacity:1;transform:scale(0.01);transform-origin:0 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:0 100%}}@keyframes popup-suggestion{0%{box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0);transform:scaleY(0.4);transform-origin:0 100%}100%{box-shadow:0 -12px 15px -12px rgba(0,0,0,.35);transform:scaleY(1);transform-origin:0 100%}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes dialog-in{0%{transform:translateY(-20px);opacity:0}100%{transform:translateY(0);opacity:1}}@keyframes dialog-out{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-20px);opacity:0}}@keyframes typing-cue{0%{opacity:1}30%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@keyframes oda-chat-webview-slide-out-bottom{0%{transform:translateY(0);opacity:1}95%{opacity:1}100%{transform:translateY(100%);opacity:0}}@keyframes oda-chat-webview-slide-in-bottom{0%{transform:translateY(100%);opacity:0}1%{opacity:1}100%{transform:translateY(0%);opacity:1}}.flex{display:flex;justify-content:space-between;align-items:center}.col{flex-direction:column}.none{display:none !important}.wrapper{--color-branding: #c0533f;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #161513;--color-header-background: #F1EFED;--color-header-button-fill: #161513;--color-header-text: #161513;--color-header-button-background-hover: rgba(22, 21, 19, 0.04);--color-header-button-fill-hover: #161513;--color-conversation-background: #F5F4F2;--color-timestamp: rgba(22, 21, 19, 0.65);--color-typing-indicator: #161513;--color-agent-initials: #FFFFFF;--color-agent-avatar-background: #A890B6;--color-agent-name: rgba(22, 21, 19, 0.65);--color-bot-message-background: #FFFFFF;--color-bot-text: #161513;--color-user-message-background: #E4E1DD;--color-user-text: #161513;--color-error-message-background: #FFF8F7;--color-error-border: #DC5C5E;--color-error-title: #D63B25;--color-error-text: #161513;--color-card-background: #FFFFFF;--color-card-nav-button: #FFF;--color-card-nav-button-focus: #FBF9F8;--color-card-nav-button-hover: #FBF9F8;--color-actions-background: #fff;--color-actions-background-focus: rgba(22, 21, 19, 0.04);--color-actions-background-hover: rgba(22, 21, 19, 0.04);--color-actions-border: rgba(22, 21, 19, 0.5);--color-actions-text: #161513;--color-actions-text-focus: #161513;--color-actions-text-hover: #161513;--color-global-actions-background: transparent;--color-global-actions-background-focus: rgba(22, 21, 19, 0.04);--color-global-actions-background-hover: rgba(22, 21, 19, 0.04);--color-global-actions-border: rgba(22, 21, 19, 0.5);--color-global-actions-text: #161513;--color-global-actions-text-focus: #161513;--color-global-actions-text-hover: #161513;--color-primary-actions-background: rgb(49, 45, 42);--color-primary-actions-background-focus: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-border: transparent;--color-primary-actions-text: #fff;--color-primary-actions-text-focus: #fff;--color-primary-actions-text-hover: #fff;--color-danger-actions-background: rgb(214, 59, 37);--color-danger-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-border: transparent;--color-danger-actions-text: #fff;--color-danger-actions-text-focus: #fff;--color-danger-actions-text-hover: #fff;--color-links: #c0533f;--color-user-links: #c0533f;--color-rating-star: #ececec;--color-rating-star-fill: #f0cc71;--color-horizontal-rule-background: #cbc5bf;--color-attachment-placeholder: #e3e1dc;--color-attachment-footer: #fff;--color-attachment-text: #161513;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-background-hover: rgba(22, 21, 19, 0.04);--color-footer-button-fill-hover: #161513;--color-input-background: #fff;--color-input-border: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer: #161513;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-background: #fff;--color-popup-text: #161513;--color-popup-button-background: #fff;--color-popup-button-text: #161513;--color-popup-horizontal-rule: #cbc5bf;--color-popup-item-background-hover: rgba(22, 21, 19, 0.04);--color-table-header-background: #f1efec;--color-table-header-text: #161513;--color-table-background: #fff;--color-table-text: #161513;--color-table-separator: rgba(22, 21, 19, 0.1);--color-table-row-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-background: transparent;--color-table-actions-background-focus: rgba(22, 21, 19, 0.04);--color-table-actions-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-border: rgba(22, 21, 19, 0.5);--color-table-actions-text: #161513;--color-table-actions-text-focus: #161513;--color-table-actions-text-hover: #161513;--color-form-header-background: #f1efec;--color-form-header-text: #161513;--color-form-background: #fff;--color-form-text: #161513;--color-form-input-background: #fff;--color-form-input-border: rgba(22, 21, 19, 0.5);--color-form-input-border-focus: rgb(14, 114, 151);--color-form-input-text: #161513;--color-form-label: rgba(22, 21, 19, 0.65);--color-form-error: rgba(179,49,31);--color-form-error-text: rgba(22, 21, 19, 0.65);--color-form-actions-background: transparent;--color-form-actions-background-focus: rgba(22, 21, 19, 0.04);--color-form-actions-background-hover: rgba(22, 21, 19, 0.04);--color-form-actions-border: rgba(22, 21, 19, 0.5);--color-form-actions-text: #161513;--color-form-actions-text-focus: #161513;--color-form-actions-text-hover: #161513;--color-primary-form-actions-background: rgb(49, 45, 42);--color-primary-form-actions-background-focus: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-border: transparent;--color-primary-form-actions-text: #fff;--color-primary-form-actions-text-focus: #fff;--color-primary-form-actions-text-hover: #fff;--color-danger-form-actions-background: rgb(214, 59, 37);--color-danger-form-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-border: transparent;--color-danger-form-actions-text: #fff;--color-danger-form-actions-text-focus: #fff;--color-danger-form-actions-text-hover: #fff;--width-full-screen: 375px;--widget-max-height: calc(100vh - 60px);--position-top: 0;--position-left: 0;--position-right: 20px;--position-bottom: 20px;--font-family: "Oracle Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;position:fixed;box-sizing:border-box;text-transform:none;z-index:10000;color:var(--color-text);font-size:16px;font-family:var(--font-family);-webkit-font-smoothing:antialiased}.wrapper.classic{--color-branding: #025e7e;--color-launch-icon-background: #025e7e;--color-text: #161513;--color-text-light: #3a3631;--color-header-background: #025e7e;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-text: #fff;--color-conversation-background: #fff;--color-timestamp: #5b5652;--color-typing-indicator: #227e9e;--color-bot-message-background: #e5f1ff;--color-user-message-background: #ececec;--color-card-background: #e5f1ff;--color-card-nav-button: #4190ac;--color-card-nav-button-focus: #5fa2ba;--color-card-nav-button-hover: #0e7295;--color-actions-background: transparent;--color-actions-background-focus: rgba(14, 114, 149, 0.04);--color-actions-background-hover: rgba(14, 114, 149, 0.04);--color-actions-border: rgb(14, 114, 149);--color-actions-text: rgb(14, 114, 149);--color-actions-text-focus: rgb(14, 114, 149);--color-actions-text-hover: rgb(14, 114, 149);--color-global-actions-background: #fff;--color-global-actions-background-focus: rgba(14, 114, 149, 0.04);--color-global-actions-background-hover: rgba(14, 114, 149, 0.04);--color-global-actions-border: rgb(14, 114, 149);--color-global-actions-text: rgb(14, 114, 149);--color-global-actions-text-focus: rgb(14, 114, 149);--color-global-actions-text-hover: rgb(14, 114, 149);--color-primary-actions-background: rgb(14, 114, 149);--color-primary-actions-background-focus: rgba(14, 114, 149, 0.95);--color-primary-actions-background-hover: rgba(14, 114, 149, 0.95);--color-links: #0e7295;--color-user-links: #0e7295;--color-agent-name: #5b5652;--color-attachment-footer: #e5f1ff;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-fill-hover: #025e7e;--color-visualizer: #025e7e;--color-primary-form-actions-background: rgb(14, 114, 149);--color-primary-form-actions-background-focus: rgba(14, 114, 149, 0.95);--color-primary-form-actions-background-hover: rgba(14, 114, 149, 0.95);--color-notification-badge-background: #9a0007;--color-notification-badge-text: #fff;--color-popup-button-text: #025e7e}.wrapper.redwood-dark{--color-branding: #c0533f;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #fcfbfa;--color-header-background: #201e1c;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-button-background-hover: rgba(255, 255, 255, 0.04);--color-header-text: #fff;--color-conversation-background: #3a3631;--color-timestamp: #fcfbfa;--color-typing-indicator: #fff;--color-bot-message-background: #655f5c;--color-bot-text: #fff;--color-user-message-background: #fff;--color-user-text: #161513;--color-card-background: #655f5c;--color-card-nav-button: #d5b364;--color-card-nav-button-focus: #f7e0a1;--color-card-nav-button-hover: #b39554;--color-actions-background: #655f5c;--color-actions-background-focus: rgba(22, 21, 19, 0.5);--color-actions-background-hover: rgba(22, 21, 19, 0.3);--color-actions-border: #fff;--color-actions-text: #fff;--color-actions-text-focus: #fff;--color-actions-text-hover: #fff;--color-global-actions-background: #3a3631;--color-global-actions-background-focus: rgba(22, 21, 19, 0.3);--color-global-actions-background-hover: rgba(22, 21, 19, 0.3);--color-global-actions-border: #fff;--color-global-actions-text: #fff;--color-global-actions-text-focus: #fff;--color-global-actions-text-hover: #fff;--color-primary-actions-background: #fff;--color-primary-actions-background-focus: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-background-hover: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-text: #161513;--color-primary-actions-text-focus: #161513;--color-primary-actions-text-hover: #161513;--color-danger-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));--color-links: #f7e0a1;--color-user-links: #c0533f;--color-agent-name: #fcfbfa;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-input-background: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-button-text: #201e1c}.wrapper:not(.embedded):not(.contextual-widget):not(.search-bar-widget-wrapper){bottom:var(--position-bottom);left:var(--position-left);top:var(--position-top);right:var(--position-right)}.wrapper *{box-sizing:border-box}.wrapper b{font-weight:700}.wrapper button{position:relative;max-width:100%;padding:9px 16px;margin:0 0 8px;min-height:36px;line-height:16px;font-size:13.75px;font-weight:600;font-family:inherit;border-radius:4px;border-width:thin;border-style:solid;cursor:pointer;overflow:hidden;word-break:break-word;flex-shrink:0}.wrapper button:disabled{opacity:.5;cursor:not-allowed}.wrapper button.icon{width:36px;height:36px;padding:8px;margin:0;margin-inline-start:4px;border:none;border-radius:4px;color:var(--color-text);background-color:rgba(0,0,0,0);justify-content:center}.wrapper button.icon.with-label{width:auto;max-width:200px}.wrapper button.icon.with-label svg,.wrapper button.icon.with-label img{margin-right:4px}.wrapper button.icon.label-only{width:auto;max-width:200px}.wrapper button.icon.label-only svg,.wrapper button.icon.label-only img{display:none}.wrapper button svg,.wrapper button img{width:20px;height:20px;flex-shrink:0}.wrapper .button{position:absolute;right:0;bottom:0;height:48px;width:48px;max-width:unset;padding:0;margin:0;border:none;background-position:center center;background-repeat:no-repeat;cursor:pointer;justify-content:center;align-items:center;z-index:10000;color:var(--color-text);background-color:var(--color-launch-icon-background);border-radius:0;overflow:visible}.wrapper .button svg,.wrapper .button img{height:unset;width:unset;max-width:100%;max-height:100%}.wrapper .button:not(:disabled):hover,.wrapper .button:not(:disabled):focus,.wrapper .button:not(:disabled):active{background-color:var(--color-launch-icon-background)}@media screen and (min-width: 769px){.wrapper .button{height:64px;width:64px}}.wrapper .dialog-wrapper{position:absolute;top:0;left:0;right:0;width:100%;height:100%}.wrapper .dialog-wrapper .dialog-backdrop{position:absolute;background:rgba(0,0,0,.2);height:100%;width:100%;z-index:5}.wrapper .dialog-wrapper .dialog{box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;border-radius:6px;display:flex;position:absolute;max-width:450px;min-height:48px;max-height:60%;top:30%;left:0;right:0;padding:8px 16px;margin:8px auto;width:calc(100% - 16px);z-index:5;animation:dialog-in .2s cubic-bezier(0.22, 0.45, 0.42, 0.92) both;background-color:var(--color-popup-background);flex-direction:column;align-items:flex-start;overflow-y:auto}.wrapper .dialog-wrapper .dialog.dialog-out{animation:dialog-out .2s cubic-bezier(0.5, 0.07, 0.68, 0.48) both}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper{margin:16px 0;align-items:flex-start}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon{margin:4px 16px 0 0}[dir=rtl] .wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon{margin:4px 0 0 16px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-title{margin:0 28px 0 0;font-family:var(--font-family);font-size:18px;font-weight:bold;color:var(--color-popup-text)}[dir=rtl] .wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-title{margin:0 0 0 28px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-description{color:var(--color-popup-text);opacity:.6;font-size:13px;margin:8px 28px 0 0}[dir=rtl] .wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-description{margin:8px 0 0 28px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-label{color:var(--color-popup-text);font-size:large}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input{font-size:medium;min-height:36px;width:100%;margin:0 0 10px 0;padding:10px;color:var(--color-form-input-text);background-color:var(--color-form-actions-background);border:1px solid var(--color-form-input-border);border-radius:4px}.wrapper .dialog-wrapper .dialog .dialog-close-button{position:absolute;border:none;right:16px}[dir=rtl] .wrapper .dialog-wrapper .dialog .dialog-close-button{right:unset;left:16px}.wrapper .dialog-wrapper .dialog .action-wrapper{width:100%;margin:16px 0 6px}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action{background-color:var(--color-popup-button-background);border-color:var(--color-popup-button-text);color:var(--color-popup-button-text);border-style:solid;margin:0;height:34px;justify-content:center;width:49%}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:hover{background-color:var(--color-footer-button-background-hover)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:last-child{margin:0}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled{background-color:var(--color-popup-button-text);color:var(--color-popup-button-background)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled:hover{opacity:.9}.wrapper .header{height:56px;padding:0 8px;background-color:var(--color-header-background);color:var(--color-header-text)}.wrapper .header .logo{flex:0 0 auto;max-width:100px;height:36px;max-height:36px;overflow:hidden;padding:0}.wrapper .header .header-info-wrapper{flex-direction:column;flex-wrap:nowrap;width:100%;min-width:0;padding:0;margin:0 8px}.wrapper .header .header-info-wrapper .title{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.125em;font-weight:700}.wrapper .header .header-info-wrapper .subtitle{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .header .header-info-wrapper .connection-status{font-weight:bold;font-size:10px;justify-content:center;padding:0;margin:0;text-transform:uppercase;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.wrapper .header .header-gap{flex:auto}.wrapper .header-actions{flex:1 0 auto;justify-content:flex-end;flex-direction:inherit}.wrapper .header-button svg>path{fill:var(--color-header-button-fill)}.wrapper .header-button:not(:disabled):hover,.wrapper .header-button:not(:disabled):focus{background-color:var(--color-header-button-background-hover)}.wrapper .header-button:not(:disabled):hover svg>path,.wrapper .header-button:not(:disabled):focus svg>path{fill:var(--color-header-button-fill-hover)}.wrapper .conversation{display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-x:hidden;overflow-y:auto;scroll-behavior:smooth;width:100%;padding:16px}.wrapper .conversation .conversation-pane .message-date,.wrapper .conversation .conversation-pane .relative-timestamp{font-size:12px;margin:8px 0 8px;color:var(--color-timestamp);text-align:start}.wrapper .conversation .conversation-pane .message-date.right,.wrapper .conversation .conversation-pane .relative-timestamp.right{text-align:end}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-56px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:56px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:56px}.wrapper .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:40px}.wrapper .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:40px}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 40px))}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 72px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 80px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 112px))}.wrapper .timestamp-header{text-align:center;font-size:12px;font-weight:700;color:var(--color-timestamp);margin:16px 0}.wrapper .hr{margin:24px 0;font-size:12px;color:var(--color-horizontal-rule-background)}.wrapper .hr:before{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-end:10px}.wrapper .hr:after{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-start:10px}.wrapper .card-actions,.wrapper .form-actions,.wrapper .message-actions,.wrapper .message-global-actions{margin-top:6px;display:flex;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap}.wrapper .card-actions .action-postback.display-link:first-child,.wrapper .form-actions .action-postback.display-link:first-child,.wrapper .message-actions .action-postback.display-link:first-child,.wrapper .message-global-actions .action-postback.display-link:first-child{padding-left:0}.wrapper .card-actions.form-message-actions-col,.wrapper .form-actions.form-message-actions-col,.wrapper .message-actions.form-message-actions-col,.wrapper .message-global-actions.form-message-actions-col{flex-basis:100%;max-width:100%}.wrapper .card-actions:not(.col) .action-postback,.wrapper .form-actions:not(.col) .action-postback,.wrapper .message-actions:not(.col) .action-postback,.wrapper .message-global-actions:not(.col) .action-postback{margin-inline-end:8px}.wrapper .card-actions:not(.col) .action-postback:last-child,.wrapper .form-actions:not(.col) .action-postback:last-child,.wrapper .message-actions:not(.col) .action-postback:last-child,.wrapper .message-global-actions:not(.col) .action-postback:last-child{margin-inline-end:0}.wrapper .action-postback{background:var(--color-actions-background);border-color:var(--color-actions-border);color:var(--color-actions-text);display:flex;flex-direction:row;gap:10px;text-align:start}.wrapper .action-postback:not(:disabled):hover{color:var(--color-actions-text-hover);background-color:var(--color-actions-background-hover)}.wrapper .action-postback:not(:disabled):hover svg>path{fill:var(--color-actions-text-hover)}.wrapper .action-postback:not(:disabled):focus,.wrapper .action-postback:not(:disabled):active{background-color:var(--color-actions-background-focus);color:var(--color-actions-text-focus)}.wrapper .action-postback:not(:disabled):focus svg>path,.wrapper .action-postback:not(:disabled):active svg>path{fill:var(--color-actions-text-focus)}.wrapper .action-postback.primary{background:var(--color-primary-actions-background);color:var(--color-primary-actions-text);border:var(--color-primary-actions-border)}.wrapper .action-postback.primary:not(:disabled):hover{background:var(--color-primary-actions-background-hover);color:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):focus,.wrapper .action-postback.primary:not(:disabled):active{background:var(--color-primary-actions-background-focus);color:var(--color-primary-actions-text-focus)}.wrapper .action-postback.primary:not(:disabled):focus svg>path,.wrapper .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-actions-text-focus)}.wrapper .action-postback.danger{background:var(--color-danger-actions-background);color:var(--color-danger-actions-text);border:var(--color-danger-actions-border)}.wrapper .action-postback.danger:not(:disabled):hover{background:var(--color-danger-actions-background-hover);color:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):focus,.wrapper .action-postback.danger:not(:disabled):active{background:var(--color-danger-actions-background-focus);color:var(--color-danger-actions-text-focus)}.wrapper .action-postback.danger:not(:disabled):focus svg>path,.wrapper .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-actions-text-focus)}.wrapper .action-postback.display-link{outline:1px solid rgba(0,0,0,0);border:none;min-height:unset;background:rgba(0,0,0,0) !important}.wrapper .action-postback.display-link:hover{text-decoration:underline}.wrapper .action-postback.c2k-action{border-radius:0;color:#227e9e !important;border:none;padding:0;min-height:unset;font-size:16px;background:rgba(0,0,0,0) !important;margin-bottom:0}.wrapper .message-global-actions{margin-top:8px}.wrapper .message-global-actions.stars{display:block}.wrapper .message-global-actions button{background:var(--color-global-actions-background);color:var(--color-global-actions-text);border-color:var(--color-global-actions-border)}.wrapper .message-global-actions button:not(:disabled):hover{background-color:var(--color-global-actions-background-hover);color:var(--color-global-actions-text-hover)}.wrapper .message-global-actions button:not(:disabled):hover svg>path{fill:var(--color-global-actions-text-hover)}.wrapper .message-global-actions button:not(:disabled):focus,.wrapper .message-global-actions button:not(:disabled):active{background-color:var(--color-global-actions-background-focus);color:var(--color-global-actions-text-focus)}.wrapper .message-global-actions button:not(:disabled):focus svg>path,.wrapper .message-global-actions button:not(:disabled):active svg>path{fill:var(--color-global-actions-text-focus)}.wrapper .message-bubble{position:relative;display:flex;flex-direction:column;align-items:flex-start;margin:0;padding:6px 16px;color:var(--color-bot-text);background:var(--color-bot-message-background);min-height:32px;line-height:20px;overflow-wrap:break-word;max-width:100%;border-radius:2px 10px 10px 2px;margin-top:2px}.wrapper .message-bubble>*{width:100%}.wrapper .message-bubble.before-card{border-radius:2px 10px 10px 10px}.wrapper .message-bubble .video-wrapper{max-width:100%}.wrapper .message-bubble.error{background-color:var(--color-error-message-background);color:var(--color-error-text);border:1px dashed var(--color-error-border)}.wrapper .message-bubble.error .message-icon path{fill:var(--color-error-title)}.wrapper .message-bubble.error .message-title{color:var(--color-error-title)}.wrapper .message-bubble span.highlight{background-color:rgba(143,191,208,.4)}.wrapper .message-bubble .message-with-icon{display:flex;align-items:flex-start;justify-content:space-between}.wrapper .message-bubble .message-with-icon .message-icon{width:24px;height:24px;align-items:center;margin-inline-end:16px}.wrapper .message-bubble .message-with-icon .message-text{word-break:break-word}.wrapper .message-bubble.message-header{margin-bottom:2px}.wrapper .message-bubble.message-footer{margin-top:2px}.wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.wrapper .messages-wrapper{max-width:90%;align-items:flex-start}.wrapper .messages-wrapper .agent-name{position:relative;bottom:3px;max-width:111.1111111111%;height:16px;font-size:12px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--color-agent-name)}.wrapper .messages-wrapper .screen-reader-only{height:1px;left:-20000px;overflow:hidden;position:absolute;top:auto;width:1px}.wrapper .messages-wrapper .message-list{width:100%;align-items:flex-start}.wrapper .message{width:100%;white-space:pre-wrap}.wrapper .message .embeddedAction{padding:2px 6px;border-radius:4px;cursor:pointer;display:inline-block;font-size:12px;font-weight:600;height:20px;line-height:16px;border:1px solid rgba(122,115,110,.2509803922)}.wrapper .message .embeddedAction.display-link{color:var(--color-links);padding:2px 0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .message .embeddedAction.display-link:hover{text-decoration:underline}.wrapper .message .embeddedAction.display-icon{padding:0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .message .action-wrapper{display:flex;flex-direction:column;position:relative}.wrapper .message .action-wrapper button:not(:disabled):hover+div>.tooltip{display:block;position:absolute;background-color:var(--color-bot-message-background);max-width:296px;border-radius:2px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);padding:8px;z-index:3;font-size:13px;font-weight:400;inset-inline-start:-16px;line-height:20px;margin-top:-4px;overflow-wrap:break-word}.wrapper .message a{color:var(--color-links)}.wrapper .message button.anchor-btn{padding:0}.wrapper .message button.anchor-btn a{display:block;text-decoration:inherit;color:inherit;padding:10px 20px}.wrapper .message button:last-child{margin-bottom:0}.wrapper .message .message-wrapper{display:flex;align-items:flex-start;flex-direction:column;width:100%;max-width:100%}.wrapper .message:first-child .message-bubble:not(.message-footer){margin-top:0}.wrapper .message:first-child .card-message-content:first-child .card-message-cards{margin-top:0}.wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-header{border-radius:1px 9px 0 0}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-item{border-radius:1px 9px 9px 9px}.wrapper .message:last-child .card-message-content:last-child .card-message-cards{margin-bottom:-8px}.wrapper .message.card-message-horizontal{margin-inline-start:-16px;width:100vw}.wrapper .message.card-message-horizontal .message-header,.wrapper .message.card-message-horizontal .message-footer,.wrapper .message.card-message-horizontal .message-global-actions{margin-inline-start:16px;max-width:calc(.9*(100% - 32px))}.wrapper .message.card-message-horizontal .message-header{border-radius:2px 10px 10px 10px}.wrapper .message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto;padding:0 56px 0 16px}.wrapper .message.card-message-horizontal .card{border:1px solid rgba(22,21,19,.12);box-shadow:0px 1px 4px 0px rgba(0,0,0,.12);margin-inline-end:8px}.wrapper .message.card-message-horizontal .next-wrapper,.wrapper .message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.wrapper .message.card-message-horizontal .next-wrapper{inset-inline-end:0;background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}.wrapper .message.card-message-horizontal .prev-wrapper{inset-inline-start:0;background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}[dir=rtl] .wrapper .message.card-message-horizontal .next,[dir=rtl] .wrapper .message.card-message-horizontal .previous{transform:rotate(180deg)}.wrapper .message.card-message-horizontal .next,.wrapper .message.card-message-horizontal .previous{position:absolute;z-index:10;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--color-card-nav-button);border:none;box-shadow:0px 2px 4px rgba(0,0,0,.1);top:calc(50% - 18px);justify-content:center}.wrapper .message.card-message-horizontal .next:hover,.wrapper .message.card-message-horizontal .previous:hover{background-color:var(--color-card-nav-button-hover)}.wrapper .message.card-message-horizontal .next:focus,.wrapper .message.card-message-horizontal .next:active,.wrapper .message.card-message-horizontal .previous:focus,.wrapper .message.card-message-horizontal .previous:active{background-color:var(--color-card-nav-button-focus)}.wrapper .message-block{justify-content:flex-start;align-items:flex-start;margin-bottom:8px}.wrapper .message-block.right{flex-direction:row-reverse}.wrapper .message-block.right .icon-wrapper{margin:unset;margin-inline-start:8px}.wrapper .message-block.right .messages-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message a{color:var(--color-user-links)}.wrapper .message-block.right .messages-wrapper .message .message-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:10px 2px 2px 10px}.wrapper .message-block.right .messages-wrapper .message .message-bubble:not(.error){color:var(--color-user-text);background:var(--color-user-message-background)}.wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}.wrapper .message-block.right .message-date{text-align:right}.wrapper .icon-wrapper{margin-inline-end:8px;width:32px;min-width:32px;height:32px;border-radius:4px;overflow:hidden;z-index:1}.wrapper .icon-wrapper.agent-avatar{background:var(--color-agent-avatar-background);margin-top:16px}.wrapper .icon-wrapper .message-icon{height:32px;max-height:32px;max-width:32px;width:32px;color:var(--color-timestamp);overflow:hidden;text-overflow:ellipsis}.wrapper .icon-wrapper .agent-icon{position:relative;width:20px;height:20px;left:6px;top:6px;font-weight:700;font-size:16px;line-height:20px;text-align:center;color:var(--color-agent-initials)}.wrapper .attachment{width:100%}.wrapper .attachment .attachment-placeholder{background-color:var(--color-attachment-placeholder);max-width:calc(100% + 32px);min-width:228px;min-height:88px;max-height:230px;margin:-6px -16px 0;justify-content:center;overflow:hidden}.wrapper .attachment .attachment-placeholder>*{max-width:100%}.wrapper .attachment .attachment-placeholder .attachment-icon{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon svg{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon img{width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio{height:50px;width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio::-webkit-media-controls-enclosure{background-color:rgba(0,0,0,0)}.wrapper .attachment .attachment-footer{background-color:var(--color-attachment-footer);color:var(--color-attachment-text);margin:0 -16px -6px;height:50px;padding:16px}.wrapper .attachment .attachment-footer.with-actions{border-bottom:thin solid rgba(22,21,19,.1);margin-bottom:6px}.wrapper .attachment .attachment-footer .attachment-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .card{width:252px;border-radius:6px;padding:16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--color-bot-text);background:var(--color-card-background);overflow:hidden}.wrapper .card .card-image{display:block;width:calc(100% + 32px);margin:-16px -16px 10px;min-height:88px;background-color:var(--color-attachment-placeholder)}.wrapper .card .card-title{line-height:20px;margin:0 0 4px;font-weight:700;word-break:break-word}.wrapper .card .card-description{margin-bottom:16px;color:var(--color-text-light)}.wrapper .card-message-content{width:100%;position:relative}.wrapper .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.wrapper .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.wrapper .message-bubble-tabular-message,.wrapper .message-bubble-form-message{width:111%;max-width:unset;border-radius:0 8px 8px 8px;padding:0;background-color:var(--color-table-background);color:var(--color-table-text);border:1px solid var(--color-table-header-background)}.wrapper .message-bubble-tabular-message .popupContent,.wrapper .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0px 4px 4px 0px rgba(0,0,0,.1019607843);border:1px solid rgba(22,21,19,.1215686275);background:var(--color-bot-message-background);display:none;inset-inline-start:-4px}.wrapper .message-bubble-tabular-message .results-page-status,.wrapper .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--color-table-background);color:var(--color-table-text);display:flex;flex-direction:row;font-size:13.75px;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--color-table-separator)}.wrapper .message-bubble-tabular-message~.message-footer,.wrapper .message-bubble-form-message~.message-footer{margin-top:8px}.wrapper .message-bubble-tabular-message .message-actions .action-postback,.wrapper .message-bubble-tabular-message .table-message-item .action-postback{background:var(--color-table-actions-background);color:var(--color-table-actions-text);border-color:var(--color-table-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--color-table-actions-text-hover);background:var(--color-table-actions-background-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--color-table-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--color-table-actions-background-focus);color:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions,.wrapper .message-bubble-form-message .message-actions{border-top:1px solid var(--color-table-separator);padding:12px 16px;margin-top:auto}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary,.wrapper .message-bubble-form-message .message-actions .action-postback.primary,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary,.wrapper .message-bubble-form-message .form-actions .action-postback.primary,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--color-primary-form-actions-background);color:var(--color-primary-form-actions-text);border:var(--color-primary-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--color-primary-form-actions-background-hover);color:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--color-primary-form-actions-background-focus);color:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger,.wrapper .message-bubble-form-message .message-actions .action-postback.danger,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger,.wrapper .message-bubble-form-message .form-actions .action-postback.danger,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--color-danger-form-actions-background);color:var(--color-danger-form-actions-text);border:var(--color-danger-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--color-danger-form-actions-background-hover);color:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--color-danger-form-actions-background-focus);color:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-form-message{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message.edit-form-message{overflow:visible}.wrapper .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.wrapper .message-bubble-form-message.edit-form-message .form-message-header{border-radius:0 7px 0 0}.wrapper .message-bubble-form-message.edit-form-message .form-message-item{border-radius:0 7px 7px 7px}.wrapper .message-bubble-form-message .results-page-status{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message .message-actions .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .form-message-field,.wrapper .table-message-heading,.wrapper .table-message-item{overflow-wrap:break-word;word-break:break-word}.wrapper .form-message-field:hover .popupContent,.wrapper .table-message-heading:hover .popupContent,.wrapper .table-message-item:hover .popupContent{display:flex}.wrapper .table-message-wrapper{overflow:auto}.wrapper .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.wrapper .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--color-table-header-text);background-color:var(--color-table-header-background);display:flex}.wrapper .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:12px;font-weight:600;line-height:16px;padding:16px;min-width:120px}.wrapper .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--color-table-separator);display:flex;align-items:center}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--color-table-text);font-size:16px;line-height:20px;min-width:120px;padding:10px 16px}.wrapper .form-message-header{align-items:center;background-color:var(--color-form-header-background);color:var(--color-form-header-text);display:flex;font-weight:700;line-height:20px;padding:16px;text-align:start}.wrapper .form-message-item{color:var(--color-form-text);background-color:var(--color-form-background);display:flex;flex-flow:row wrap;justify-content:space-between;padding:16px}.wrapper .form-message-item .form-row{display:flex;flex-basis:100%;flex-wrap:nowrap;width:100%}.wrapper .form-message-item .form-row.separator{border-top:1px solid var(--color-table-separator);margin-top:8px}.wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.wrapper .form-message-item .form-row .form-row-column:not(:last-child){margin-inline-end:16px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{min-width:100%;inset-inline-start:0;max-width:unset}.wrapper .form-message-item.c2k-reference{justify-content:flex-start}.wrapper .form-message-item.c2k-reference .form-row{margin-inline-end:8px;flex-basis:auto;width:auto;line-height:16px;color:rgba(22,21,19,.6509803922)}.wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child){margin-inline-end:6px}.wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.wrapper .form-message-item.with-border{border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-key{color:var(--color-form-label);line-height:16px}.wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px;line-height:18px}.wrapper .form-message-item .form-message-key.font-size-md{font-size:12px;line-height:15.5px}.wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px;line-height:13px}.wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.wrapper .form-message-item .form-message-key.font-weight-md{font-weight:600}.wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.wrapper .form-message-item>.form-message-field{margin-bottom:16px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:600}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:400}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(even) .popupContent{inset-inline-start:calc(50% - 7px)}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(even) .listbox{inset-inline:auto 16px}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;width:100%}.wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--color-form-input-background);color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);font-size:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field input:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field input:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field.error>input:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>textarea:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--color-form-error)}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:42px;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focused{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper input{width:calc(100% - 36px);border:none;box-shadow:none !important;outline:1px solid rgba(0,0,0,0);height:40px;margin-inline-start:1px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{margin-inline-start:0;color:var(--color-form-input-text)}.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin-inline-end:8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--color-form-input-background);border-radius:4px;border:1px solid var(--color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{padding:0 12px 5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{float:left;line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--color-form-input-border);color:var(--color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;inset-inline-start:16px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--color-form-label);font-size:13.75px;height:42px;padding:12px 0;border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px 0;overflow-y:auto;padding:8px 0;z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li{height:auto;margin:0;padding:12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected{border-top:1px solid #227e9e;background-color:#e4f1f7}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected:last-child,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected:last-child{box-shadow:inset 0 -1px 0 0 #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected+li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected+li{border-top:1px solid #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),right .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid rgba(0,0,0,0);border-radius:4px;height:20px;width:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--color-form-background);transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),left .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item span.field-error{display:flex;margin-top:2px;line-height:16px}.wrapper .form-message-item span.field-error .error-text{color:var(--color-form-error-text);font-size:12px;margin-inline-start:4px}.wrapper .form-message-item span.field-error svg.form-error-icon{position:relative;height:16px;width:16px;fill:var(--color-form-error);flex-shrink:0}.wrapper .form-message-item span.field-error.form-error{padding:8px;background:var(--color-error-message-background);border-radius:4px;margin:10px 0;border:thin dashed var(--color-error-border);width:100%}.wrapper .form-message-item span.field-error.form-error.disabled{display:none}.wrapper .form-message-item span.field-error.form-error svg.form-error-icon{top:0}.wrapper .form-message-item span.field-error.form-error .error-text{font-weight:600;color:var(--color-error-title);margin-inline-start:8px;font-size:14px}.wrapper .form-message-item .form-actions .action-postback,.wrapper .form-message-item .form-message-value .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .tableform-message .table-message-row{cursor:pointer}.wrapper .tableform-message .table-message-row:hover{background-color:var(--color-table-row-background-hover)}.wrapper .tableform-message .table-message-row button:hover,.wrapper .tableform-message .table-message-row button:active,.wrapper .tableform-message .table-message-row button:focus{background-color:unset}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child,.wrapper .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child button,.wrapper .tableform-message .table-message-row .table-message-item:last-child button{margin:0 2px;transition:transform .25s ease-in-out}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child button.rotate-180,.wrapper .tableform-message .table-message-row .table-message-item:last-child button.rotate-180{transform:rotate3d(0, 0, 1, 180deg)}.wrapper .tableform-message .form-message-item{margin:0;padding:16px;transition:all .25s ease-in-out;border-bottom:none}.wrapper .tableform-message .form-message-item:last-child{border-top:1px solid var(--color-table-bottom)}.wrapper .footer-form{width:100%}.wrapper .footer-form .message-bubble-form-message{background:rgba(0,0,0,0);border:none;width:100%}.wrapper .footer-form .message-bubble-form-message .form-message-item{background:rgba(0,0,0,0);padding:0}.wrapper .footer{max-width:100%;padding:0;background-color:var(--color-footer-background);z-index:3;box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);border-top:1px solid rgba(22,21,19,.1)}.wrapper .footer .footer-mode-keyboard{min-height:44px;margin:5px;background-color:var(--color-input-background);color:var(--color-input-text);border:1px solid var(--color-input-border);border-radius:6px}.wrapper .footer .footer-mode-voice{height:60px;padding:14px 0;background:var(--color-visualizer-container-background);justify-content:center}.wrapper .footer .footer-mode-voice .footer-visualizer-wrapper{max-width:296px;height:32px}.wrapper .footer .footer-logo{flex:0 0 auto;max-width:100px;max-height:36px;overflow:hidden;padding:0}.wrapper .footer.mode-keyboard .button-switch-kbd{display:none}.wrapper .footer.mode-keyboard .footer-mode-voice{display:none}.wrapper .footer.mode-voice .button-switch-voice{display:none}.wrapper .user-input{flex-grow:1;min-height:44px;padding:10px;margin:0;font-size:1em;font-family:inherit;line-height:24px;outline:1px solid rgba(0,0,0,0);resize:none;border:none;border-radius:6px;background-color:rgba(0,0,0,0);color:var(--color-input-text)}.wrapper .user-input:focus,.wrapper .user-input:focus-visible{outline:1px solid rgba(22,21,19,0)}.wrapper .footer-actions{padding-inline-end:4px}.wrapper .footer-button.button-send{background-color:var(--color-footer-button-fill);border-radius:50%}.wrapper .footer-button.button-send svg>path{fill:var(--color-input-background)}.wrapper .footer-button.button-send:not(:disabled):hover{background-color:var(--color-footer-button-fill-hover)}.wrapper .footer-button.button-send:not(:disabled):hover svg>path{fill:var(--color-input-background)}.wrapper .footer-button svg>path{fill:var(--color-footer-button-fill)}.wrapper .footer-button:not(:disabled):hover,.wrapper .footer-button:not(:disabled):focus{background-color:var(--color-footer-button-background-hover)}.wrapper .footer-button:not(:disabled):hover svg>path,.wrapper .footer-button:not(:disabled):focus svg>path{fill:var(--color-footer-button-fill-hover)}.wrapper .autocomplete-items{position:absolute;bottom:56px;width:100%;max-height:calc(100% - 56px);overflow-y:auto;background-color:var(--color-input-background);box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);margin:0 -5px}.wrapper .autocomplete-items .autocomplete-item{min-height:40px;padding:8px 16px;cursor:pointer}.wrapper .autocomplete-items .autocomplete-item:hover,.wrapper .autocomplete-items .autocomplete-item.autocomplete-active{background-color:var(--color-card-nav-button-hover)}.wrapper .autocomplete-items .autocomplete-item:first-of-type{margin-top:8px}.wrapper .autocomplete-items .autocomplete-item:last-of-type{margin-bottom:8px}.wrapper .autocomplete-items .autocomplete-item strong{font-weight:700}.wrapper.embedded .open{width:100%;height:100%}.wrapper.embedded .open .widget{border-radius:0;width:100%;min-width:100%;max-width:100%;height:100%;position:inherit;box-shadow:none;max-height:unset}.wrapper.popup-content-wrapper{background:rgba(22,21,19,.4);width:100vw;height:100vh;position:fixed;z-index:10000;top:0 !important;left:0 !important;display:flex;align-items:center;justify-content:center}.wrapper.popup-content-wrapper .popup-dialog{overflow:hidden;width:600px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2)}.wrapper.popup-content-wrapper .popup-dialog .message-bubble{width:auto;padding:32px;margin-top:0;border-radius:6px;overflow:auto;max-height:calc(100vh - 16px)}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message{padding:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-header{padding:32px 32px 12px}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-item{padding:0 32px 32px}.wrapper .full-screen-modal{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:1000000;background-color:rgba(0,0,0,.8)}.wrapper .modal-header{background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.wrapper .modal-header .close-btn{border:none;background:rgba(0,0,0,0);cursor:pointer}.wrapper .full-screen-image{position:absolute;max-width:100vw;max-height:100vh;margin:auto;top:0;bottom:0;left:0;right:0}.wrapper .typing-cue-wrapper{width:32px;margin:auto;display:flex}.wrapper .typing-cue-wrapper .typing-cue{position:relative;left:0;right:0;margin:auto;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;animation-delay:250ms;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before,.wrapper .typing-cue-wrapper .typing-cue::after{content:"";display:inline-block;position:absolute;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before{left:-12px;animation-delay:0s}.wrapper .typing-cue-wrapper .typing-cue::after{left:12px;animation-delay:500ms}.wrapper .hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .rating-root{display:flex}.wrapper [dir=rtl] .rating-root{flex-direction:row-reverse}.wrapper .rating-wrapper{display:flex;margin-top:8px}.wrapper [dir=rtl] .rating-wrapper{flex-direction:row-reverse}.wrapper .rating-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .star-label{background-color:rgba(0,0,0,0);border:0;cursor:pointer;padding:0}.wrapper .star-label>svg>path{fill:var(--color-rating-star)}.wrapper .star-input.active+label>svg>path{fill:var(--color-rating-star-fill)}.wrapper .star-input:disabled+.star-label{cursor:not-allowed;filter:brightness(0.8)}.wrapper .rating-star-icon{height:32px;width:32px}.wrapper.expanded .widget{animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.expanded .widget.sidepanel{animation:unset}.wrapper.expanded .widget .resizable{width:4px;height:100%;top:0;left:0;background-color:rgba(0,0,0,0);position:absolute;z-index:10000;cursor:col-resize}.wrapper.expanded .widget .resizable.right-resize{right:0;left:unset}.wrapper.expanded .widget .resizable.top-resize{width:100%;height:4px;cursor:row-resize}.wrapper.expanded .widget .resizable.corner{height:8px;width:8px;cursor:nwse-resize}.wrapper.expanded .widget .resizable.corner.right-resize{cursor:nesw-resize}.wrapper.expanded:not(.pos-left) .right-resize{display:none}.wrapper.expanded:not(.drag) .button{animation:scale-out-center .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget{animation:scale-out-br .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget.sidepanel{animation:unset}.wrapper.collapsed .notification-badge{background-color:var(--color-notification-badge-background);color:var(--color-notification-badge-text);right:-5px;top:-5px;align-items:center;border-radius:24px;display:flex;font-size:14px;height:24px;justify-content:center;position:absolute;text-align:center;width:32px}.wrapper.collapsed:not(.drag) .button{animation:scale-in-center .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left .widget{right:unset;left:calc(var(--position-left)*-1);max-width:100vw}.wrapper.pos-left.expanded .widget{animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left.expanded .widget .left-resize{display:none}.wrapper.pos-left.collapsed .widget{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper .ellipsis{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.wrapper .popup{position:absolute;background-color:var(--color-popup-background);color:var(--color-popup-text);min-width:140px;max-height:calc(100% - 128px);display:none;padding:4px 0;border-radius:6px;box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;overflow-y:auto;z-index:5}.wrapper .popup li{display:flex;align-items:center;height:48px;margin:4px 0;cursor:pointer;overflow:hidden;color:var(--color-popup-button-text)}.wrapper .popup li svg>path{fill:var(--color-popup-text)}.wrapper .popup li#action-menu-option-lang{border-top:1px solid var(--color-popup-horizontal-rule)}.wrapper .popup li.disable{pointer-events:none;cursor:not-allowed;opacity:.5}.wrapper .popup li:hover,.wrapper .popup li:focus,.wrapper .popup li.active{background-color:var(--color-popup-item-background-hover)}.wrapper .popup li .icon{margin-inline-start:16px;height:20px;width:20px}.wrapper .popup li .text{padding:0 16px 0 16px}.wrapper .popup.expand{display:block;-webkit-animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.action-menu,.wrapper .popup.language-selection-menu{top:50px;bottom:unset}.wrapper .popup.action-menu.expand,.wrapper .popup.language-selection-menu.expand{display:block;-webkit-animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.language-selection-menu{max-height:calc(100% - 280px)}.wrapper .popup.share-popup-list{bottom:50px;left:unset}.wrapper .spinner{height:48px;width:48px}.wrapper .spinner svg{animation-duration:750ms;-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.wrapper .spinner svg circle{fill:rgba(0,0,0,0);stroke:var(--color-user-text);stroke-width:2px;stroke-dasharray:128px;stroke-dashoffset:82px}.wrapper .webview-container{position:absolute;width:100%;height:80%;bottom:0;box-shadow:0px -4px 32px rgba(0,0,0,.1);z-index:10}.wrapper .webview-container .webview-header svg{fill:var(--color-actions-text)}.wrapper .webview-container .webview-header button{color:var(--color-actions-text)}.wrapper .webview-container .spinner{position:absolute;margin:auto;left:0;right:0;top:40%}.wrapper .webview-container iframe{width:100%;height:100%;background:var(--color-conversation-background);border:none}.wrapper .webview-container .webview-error{position:absolute;bottom:0;background:var(--color-popup-background);width:calc(100% - 32px);margin:10px 16px;padding:6px 16px;border-radius:6px;display:flex;align-items:center;box-shadow:0px -4px 32px rgba(0,0,0,.1)}.wrapper .webview-container .webview-error .webview-error-button-close{border:none}.wrapper .webview-container.webview-container-close{animation:oda-chat-webview-slide-out-bottom .4s cubic-bezier(0.55, 0.085, 0.68, 0.53) both}.wrapper .webview-container.webview-container-open{animation:oda-chat-webview-slide-in-bottom .4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both}.widget{position:absolute;bottom:calc(var(--position-bottom)*-1);border-radius:6px 6px 0 0;box-shadow:0px -4px 32px rgba(0,0,0,.1);right:calc(var(--position-right)*-1);width:100vw;min-width:100vw;max-width:100vw;max-height:var(--widget-max-height);margin:0;overflow:hidden;text-decoration:none;text-transform:none;z-index:10000;align-items:stretch;background:var(--color-conversation-background)}.widget.large-size .conversation .conversation-pane .message-bubble{padding:16px 24px}.widget.large-size .conversation .conversation-pane .message-bubble .attachment .attachment-placeholder{margin:-16px -24px 0;max-width:calc(100% + 48px)}.widget.large-size .conversation .conversation-pane .message-bubble .attachment .attachment-footer{margin:0 -24px -16px}.widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:780px}.widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message-header,.widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message-footer,.widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message-header,.widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message-footer{max-width:780px}.widget.large-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper,.widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:780px}.widget.large-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.large-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:780px}.widget.large-size button:not(.icon){height:44px}.widget.medium-size .conversation .conversation-pane .message-bubble{padding:8px 16px}.widget.medium-size .conversation .conversation-pane .message-bubble .attachment .attachment-placeholder{margin:-8px -16px 0}.widget.medium-size .conversation .conversation-pane .message-bubble .attachment .attachment-footer{margin:0 -16px -8px}.widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:680px}.widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:680px}.widget.medium-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper,.widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:680px}.widget.medium-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-bubble,.widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-bubble{padding:16px 24px}.widget.medium-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.medium-size .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:680px}.widget.medium-size button:not(.icon){height:44px}.widget .alert-wrapper{position:absolute;top:48px;width:100%}.widget .alert-wrapper .alert-prompt{position:relative;left:0;right:0;width:auto;margin:6px;padding:10px;border-radius:10px;z-index:11}.widget .msg-icon{padding:5px 10px 0 0}.widget .msg{flex-grow:1}.sidepanel-content-wrapper{display:flex;width:100vw}.sidepanel-content-wrapper>*{flex-grow:1}.sidepanel-content-wrapper .wrapper:not(.contextual-widget){position:absolute;bottom:0;right:0;height:100vh;flex-grow:unset;width:0;min-width:0;max-width:0;flex-shrink:0;--width-full-screen: 375px}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded{min-width:100vw;max-width:100vw}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded::after{content:"";background-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:4px;height:100%;cursor:col-resize;z-index:10000}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag{transition:unset}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag::after{background-color:#ccc}.sidepanel-content-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;min-width:unset;max-width:unset;height:100%;max-height:100%;box-shadow:none;border-radius:0}.contextual-widget-wrapper{position:relative}.contextual-widget-wrapper .widget-wrapper{position:sticky;height:0;z-index:1;top:8px;max-width:100%}.contextual-widget-wrapper .widget-wrapper .container{position:absolute;right:-44px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget{position:relative;width:272px;border-radius:6px;background-color:#f5f4f2;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size{width:36px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);border-radius:4px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:first-child{border-bottom:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:not(:first-child){display:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size>:not(:last-child){border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size button{background:#f5f4f2;margin-inline-start:0;border-radius:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size{width:416px;display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .conversation .message-wrapper{border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .footer.enabled{display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:only-child,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:nth-child(2){border:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header{height:44px;background:#f5f4f2;padding:8px 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .logo{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .title{height:16px;font-weight:400;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message{display:flex;height:76px;border-radius:6px;border:1px solid rgba(22,21,19,.1215686275);margin:0 12px 12px;background:#fef9f2;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-icon{height:18px;margin:8px;padding-top:2px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info{margin:8px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .error-text{color:#8f520a;line-height:20px;font-weight:700}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .reset-button{cursor:pointer;line-height:16px;font-size:13.75px;font-weight:600;margin-top:8px;color:#161513}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions{margin-top:0px;padding:12px 12px 4px;background:#fff}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions button.action-postback{height:auto}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper{padding:0 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions{margin-top:0;margin-bottom:4px;padding:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions .action-postback{background:rgba(0,0,0,0)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble{font-size:13.75px;line-height:16px;margin-top:0;margin-bottom:0;background:rgba(0,0,0,0);border-radius:0;min-height:unset;padding:0 !important}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble .message-text{margin-bottom:12px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer-form{display:none}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner{background-color:#f5f4f2;box-sizing:border-box;width:154px;height:52px;padding:8px 12px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2);position:sticky;top:8px;bottom:8px;z-index:1;display:flex;align-items:center}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon.spin{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-text{width:70px;height:16px;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .close-button{border:rgba(0,0,0,0);cursor:pointer;background:#f5f4f2;width:36px;height:36px;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner>:not(:last-child){margin-inline-end:4px}.contextual-widget-wrapper .widget-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;height:100%;border-radius:6px}.search-bar-widget-wrapper{position:relative;height:100%;min-height:40px}.search-bar-widget-wrapper .dialog-wrapper{position:relative}.search-bar-widget-wrapper .dialog-wrapper .dialog{position:relative}.search-bar-widget-wrapper .footer{border:none;box-shadow:none;background:rgba(0,0,0,0);height:100%}.search-bar-widget-wrapper .footer.mode-voice+.search-bar-widget .search-bar-popup{display:none}.search-bar-widget-wrapper .footer .footer-mode-keyboard{min-height:unset;margin:0;border:0;background:rgba(0,0,0,0);height:100%;top:0;position:absolute;width:100%}.search-bar-widget-wrapper .footer .footer-mode-voice{position:absolute;left:0;right:0;top:calc(100% + 2px);border:1px solid rgba(22,21,19,.12)}.search-bar-widget-wrapper .footer .user-input{height:100%;min-height:unset;padding:4px;line-height:unset}.search-bar-widget-wrapper .footer .footer-actions{height:100%}.search-bar-widget-wrapper .footer .footer-actions .share-popup-list{max-height:unset;bottom:unset;animation:none}.search-bar-widget-wrapper .autocomplete-items{max-height:unset;top:56px;bottom:unset}.search-bar-widget-wrapper .search-bar-widget{position:absolute;bottom:0;height:0;width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content{position:relative;top:4px;background:#fff;height:0}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup{position:absolute;min-width:100%;width:100%;max-width:100%;border-radius:6.06px;border:2px solid #000;background:#fff;padding:8px;display:flex;flex-direction:column;box-shadow:0 12px 20px rgba(0,0,0,.2784313725);max-height:400px;overflow:auto;--color-conversation-background: #fff}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup:empty{display:none !important}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .user-message{font-weight:bold}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message{max-width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message.card-message-horizontal{margin-inline:0;width:100vw}.button-drag-handle{position:absolute;width:100%;height:100%}.image-preview-wrapper{background:rgba(0,0,0,.8);height:100%;position:fixed;top:0;left:0;width:100%;z-index:10000}.image-preview-wrapper .image-preview-header{align-items:center;background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.image-preview-wrapper .image-preview-header .image-preview-close{background:rgba(0,0,0,0);border:none;cursor:pointer;height:36px;width:36px}.image-preview-wrapper .image-preview-header .image-preview-close .image-preview-close-icon{fill:#fff;height:100%;width:100%}.image-preview-wrapper .image-preview{bottom:0;left:0;margin:auto;max-height:100vh;max-width:100vw;position:absolute;right:0;top:0}.arrow-icon{margin-inline-end:2px;width:32px;height:32px;display:flex;align-items:center;flex-shrink:0}@media screen and (min-width: 426px){.wrapper.pos-left .widget{left:0}.wrapper:not(.embedded) .widget:not(.sidepanel){max-width:calc(100vw - var(--position-right))}.wrapper:not(.embedded).pos-left .widget:not(.sidepanel){max-width:calc(100vw - var(--position-left))}.wrapper .messages-wrapper .message-list .message.card-message-horizontal{width:var(--width-full-screen)}.widget:not(.sidepanel){width:var(--width-full-screen);min-width:unset;max-height:var(--widget-max-height);bottom:0;right:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget){position:sticky;top:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget).expanded{min-width:375px;max-width:800px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget) .widget{border-left:thin solid #ccc}}@media(prefers-reduced-motion){.open{animation:none}.close{animation:none}}[dir=rtl] .wrapper *{direction:rtl}[dir=rtl] .multi-select-option{float:right !important}[dir=rtl] .wrapper{text-align:right}[dir=rtl] .wrapper .widget.open{animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .widget.close{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}[dir=rtl] .wrapper .message-bubble{border-radius:10px 2px 2px 10px}[dir=rtl] .wrapper .message-block .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:2px 10px 10px 2px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}[dir=rtl] .wrapper .button{left:0;right:unset}[dir=rtl] .wrapper .popup.expand{-webkit-animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .popup.action-menu.expand,[dir=rtl] .wrapper .popup.language-selection-menu.expand{-webkit-animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}'.replace(/(\.)([a-zA-Z_-]+)(?=[^}]+{)/gi,`$1${this.Xi}-$2`)));for(let s=0;s<e.length;s++){const o=e.item(s);if("style"===o.nodeName.toLowerCase()){document.head.insertBefore(i,o),t=!0;break}}t||document.head.appendChild(i),this.styleSheet=i}Ye(t.colors,this.ii)}Za(){var t;const e=this.He,i=this.ii;if(e.embedded)try{const t=document.getElementById(e.targetElement);this.embedInElement(e.targetElement),this.updateFullScreenWidth(`${t.clientWidth}px`),window.addEventListener("resize",Ze((()=>{this.updateFullScreenWidth(`${t.clientWidth}px`)}),500))}catch(t){this.Ri.error("Target Element not specified",t)}else if(e.sidepanel)try{const t=document.getElementById(e.targetElement),s=t.parentNode,o=i.createDiv(["sidepanel-content-wrapper"]);s.replaceChild(o,t),i.addCSSClass(this.chatWidgetDiv,"sidepanel"),o.appendChild(t),o.appendChild(this.chatWidgetWrapper)}catch(t){this.Ri.error("Target Element not specified",t)}else{try{this.appendToElement(document.body)}catch(t){return void this.Ri.error("Initialisation failed as page is not completely loaded. Make sure to initialise the SDK after document.body is available.")}zs((()=>{this.orientWidgetAnimation()}),0),window.addEventListener("resize",Ze((()=>{this.orientWidgetAnimation()}),500));const i=e.width,s=e.height;i&&this.setWidth(i),s&&this.setHeight(s),e.openChatOnLoad&&zs(null===(t=this.ua)||void 0===t?void 0:t.bind(this),0)}}wc(t){var e;this.He.searchBarMode?this.Pa.appendMessageToConversation(t):this.Ic.appendChild(t),(null===(e=this.Zn)||void 0===e?void 0:e.isVisible())&&(this.hideTypingIndicator(),this.showTypingIndicator())}ja(){const t=this.Bc.element;zs((()=>{t&&(t.scrollTop=t.scrollHeight)}),jt.CHAT_SCROLL_DELAY)}Lc(t,e=!0){if(!t||!t.length)return Promise.resolve();const i=this.He.threadId,s=t.filter((t=>!t.threadId||!i||t.threadId===i));return s.length?new Promise((t=>{const i={isFresh:e};this.He.clientAuthEnabled&&this.He.enableAttachmentSecurity?this.Ro.getAuthToken().then((e=>{i.authToken=e.token,this.Zc(s,i),t(),this.ja()})).catch((()=>{this.Zc(s,i),t(),this.ja()})):(this.Zc(s,i),t(),this.ja())})):Promise.resolve()}Gc(t,e){var i,o,r,n;let a;if(Se(t)){let c="";if(t.source===s.SkillMessageSource.Agent){const s=this.He.icons;(null===(i=t.messagePayload.channelExtensions)||void 0===i?void 0:i.agentSession)||(t.messagePayload.channelExtensions?t.messagePayload.channelExtensions.agentSession=this.Ua:t.messagePayload.channelExtensions={agentSession:this.Ua}),!this.Ua.avatarImage&&s.avatarBot&&e.appendChild(this.qc()),c=this.Ua.name}else if(t.source===s.SkillMessageSource.Bot&&(null===(o=t.messagePayload.channelExtensions)||void 0===o?void 0:o.agentSession)){c=(null===(r=t.messagePayload.channelExtensions)||void 0===r?void 0:r.agentSession).name}c&&(a=this.ii.createTextDiv(["agent-name"]),a.title=c,a.innerHTML=c,a.setAttribute("aria-hidden","true"),(null===(n=this.Ua)||void 0===n?void 0:n.nameTextColor)&&(a.style.color=this.Ua.nameTextColor))}return a}qc(){const t=this.Ua||{},e=t.name.split(" ").filter((t=>t));let i=e[0][0];return e.length>1&&(i+=e[e.length-1][0]),this.zc(i.toUpperCase(),t.name,!0)}Ba(){if(this.He.showTypingIndicator){const t=this.Ua||{},e=this.He.icons,i=this.wa;e.avatarBot&&(!t.avatarImage&&t.name?this.Zn.updateTypingCueIcon(this.qc()):this.Zn.updateTypingCueIcon(this.zc(t.avatarImage||e.avatarBot,i.avatarAgent||i.avatarBot)))}}zc(t,e,i=!1){const s=this.ii,o=s.createDiv(["icon-wrapper",i?"agent-avatar":""]),r=this.Ua||{};let n;return i?(n=s.createTextDiv(["agent-icon"]),n.innerText=t,r.avatarTextColor&&(n.style.color=r.avatarTextColor),r.avatarBackgroundColor&&(o.style.background=r.avatarBackgroundColor)):n=s.createImageIcon({icon:t,iconCss:["message-icon"]}),o.appendChild(n),o.setAttribute("aria-label",e),o}Yc(t){const e=t?new Date(t):new Date,i=(0,a.formatDate)(e,{pattern:this.He.timestampFormat,locale:this.va}),s=this.ii.createTextDiv(["message-date"]);return s.setAttribute("aria-live","off"),s.setAttribute("aria-hidden","true"),s.innerText=`${i}`,s}Zc(t,e){const{isFresh:i,authToken:o}=e,r=this.He,n=this.ii,a={locale:this.va,webviewLinkHandler:this.dc,webCore:this.Ro,onMessageActionClicked:this.onMessageActionClicked.bind(this),isFresh:i};(null==o?void 0:o.length)&&(a.authToken=o,a.uri=r.URI),t.forEach((t=>{var e,i,o,c,h;if(t.messagePayload.type===s.MessageType.Error)return;if(Se(t)){const e=Ce(t);if(this.aa.indexOf(e)>=0)return;this.aa.push(e)}const l=$e.fromMessage(r,n,t,a);if(!l)return;if(l instanceof ie){const e=t.messagePayload;switch(e.streamState){case"start":this.Wn.disable(),this.mc=l;break;case"running":if(this.mc)return this.mc.update(e),clearTimeout(this.Jc),void(this.Jc=zs((()=>{this.Wn.disable(!1),this.mc=null}),this.ca));this.Wn.disable(),this.mc=l;break;case"end":if(clearTimeout(this.Jc),this.Wn.disable(!1),this.mc)return this.mc.update(e),void(this.mc=null)}}else this.mc=null,clearTimeout(this.Jc);if(l.onActionClick=this.onMessageActionClicked.bind(this),r.searchBarMode)return void this.Pa.renderMessage(t,l);const u=Se(t)?s.SenderType.Skill:s.SenderType.User,p=this.Kc(t.messagePayload,u),d=p||this.Xc(t,u);let g;if(l.msgId=t.msgId,this.oc=u,this.Dc=Date.now(),this._a=t.messagePayload.globalActions&&0!==t.messagePayload.globalActions.length,this.Qc=(null===(i=null===(e=t.messagePayload.channelExtensions)||void 0===e?void 0:e.agentSession)||void 0===i?void 0:i.name)||"",Se(t)&&(this.th=t.source),d||(g=n.createDiv(["message-block","flex"]),this.eh=g),void 0!==l.ratingId&&(this.ih=l),Se(t))this.ta?this.sh(l):this.skillMessages.push(l),t.source===s.SkillMessageSource.Agent?((null===(o=t.messagePayload.channelExtensions)||void 0===o?void 0:o.agentName)&&this.setAgentDetails({name:t.messagePayload.channelExtensions.agentName,avatarImage:r.icons.avatarAgent,nameTextColor:null,avatarTextColor:null,avatarBackgroundColor:null}),(null===(c=t.messagePayload.channelExtensions)||void 0===c?void 0:c.agentSession)&&this.setAgentDetails(t.messagePayload.channelExtensions.agentSession)):(this.za.removeItem(this.Na),this.Ua=null),this.Ra(l);else if(this.ih){const e=t;if(e.messagePayload.type===s.MessageType.Text||e.messagePayload.type===s.MessageType.Postback){const t=e.messagePayload;this.ih.highlightRating(t.text)}this.ih=null}const m=t.date?new Date(t.date):new Date;this.Va(m),g&&(this.oh(t,g),this.wc(g));const f=this.eh.querySelector('[class*="message-list"]'),b=this.Yn(t,l,f);if(b){if(t.messagePayload.type===s.MessageType.Card){const t=f.querySelectorAll('[class*="message-bubble"]');if(t.length){t[t.length-1].classList.add(`${this.Xi}-before-card`)}}p&&f.lastElementChild?null===(h=f.lastElementChild)||void 0===h||h.replaceWith(b):f.appendChild(b),l instanceof qt&&l.setCardsScrollDirection()}this.Fa(u)}))}Kc(t,e){var i,o;if(e===s.SenderType.Skill&&(null===(i=this.eh)||void 0===i?void 0:i.className.includes(`${this.Xi}-left`))){const e=null===(o=t.channelExtensions)||void 0===o?void 0:o.replaceMessage;return!0===e||e&&"true"===(null==e?void 0:e.toLowerCase())}return!1}Xc(t,e){var i,o;if(!(Date.now()-this.Dc<1e4))return!1;if(Se(t)&&t.source===s.SkillMessageSource.Agent&&(null===(i=t.messagePayload.channelExtensions)||void 0===i?void 0:i.agentSession)){const e=null===(o=t.messagePayload.channelExtensions)||void 0===o?void 0:o.agentSession;return this.Qc===e.name}return!(this.oc!==e||Se(t)&&t.source!==this.th||this._a)}oh(t,e){const i=this.He.icons,o=this.wa,r=this.ii,n=this.Ua||{};let a,c,h;if(Se(t)){if(a=this.Gc(t,e),t.source===s.SkillMessageSource.Agent?(c=i.avatarBot&&(n.avatarImage||!n.name)&&(n.avatarImage||i.avatarAgent||i.avatarBot),h=o.agentMessage.replace("{0}",`${n.name||o.agent}`)):(this.th===s.SkillMessageSource.Agent&&this.He.showTypingIndicator&&this.Zn.resetTypingCueIcon(),c=i.avatarBot,h=o.skillMessage),r.addCSSClass(e,"left"),c){const i=this.zc(c,t.source===s.SkillMessageSource.Agent&&o.avatarAgent||o.avatarBot);i.style.marginTop=a&&"16px",e.appendChild(i)}}else r.addCSSClass(e,"right"),h=o.userMessage,i.avatarUser&&e.appendChild(this.zc(i.avatarUser,o.avatarUser));const l=r.createDiv(["messages-wrapper","flex","col"]);a&&l.appendChild(a);const u=this.ii.createTextSpan(["screen-reader-only"]);u.innerText=h,l.appendChild(u);const p=r.createDiv(["message-list","flex","col"]);if(l.appendChild(p),this.He.enableTimestamp&&"absolute"===this.He.timestampMode){const e=this.Yc(t.date);l.appendChild(e)}e.appendChild(l)}Yn(t,e,i){const s=this.He.delegate;if(s&&s.render){const e=this.ii.createDiv(["message"]);e.id=t.msgId,e.lang=this.He.locale,i.appendChild(e);if(s.render(t))return null;e.remove()}return e.render()}Va(t){(0,a.isSameDay)(this.Tc,t)||(this.Tc=new Date(t),this.wc(this.rh(this.Tc)))}rh(t){const e=this.ii.createTextDiv(["timestamp-header"]);return e.textContent=(0,a.formatDate)(t,{pattern:this.He.timestampFormat,locale:this.va}),this.Cc=e,e}Fa(t){this.nh||(this.nh=this.Da.render()),this.nh.remove(),this.Da.refresh(t),this.wc(this.nh)}Ra(t){t.hasActions()&&zs((()=>{t.focusFirstAction()}),290)}Uc(t,e,i){const s=document.querySelector(`#${t}`);if(s){const t=this.ii.createDiv(i);t.appendChild(s),e.appendChild(t)}else this.Ri.error(`Could not find element with ID '${t}'. No element embedded to the chat conversation pane.`)}Ts(t,e=!1){const i=function(t,e){const i=document.querySelector(`.${e}-wrapper`);return getComputedStyle(i).getPropertyValue(t)}("--color-visualizer",this.He.name),r=this.wa;e||(this.Ka(),this.As.trigger(o.CLICK_VOICE_TOGGLE,t)),this.He.enableSpeech&&(t?(this.ah(),this.He.speechLocale&&!(0,s.isValidLocale)(this.He.speechLocale)?this.lc(r.errorSpeechUnsupportedLocale,V):this.Ro.startRecognition({onRecognitionText:this.lh.bind(this),onVisualData:t=>{this.Wn.updateVisualizer(t,i)}}).then((()=>{e&&this.Wn.setRecognitionRequested(e),this.Wn.setVoiceRecording(!0),this.ja()})).catch((t=>{this.Wn.setVoiceRecording(!1);let e="";switch(t.message){case s.CoreError.RecognitionMultipleConnection:e=r.errorSpeechMultipleConnection;break;case s.CoreError.RecognitionNotReady:e=r.errorSpeechInvalidUrl;break;case s.CoreError.RecognitionProcessingFailure:e=r.errorSpeechTooMuchTimeout;break;default:e=r.errorSpeechUnavailable}this.lc(e,V)}))):(this.Ro.stopRecognition(),this.Wn.setVoiceRecording(!1)))}lh(t){if(t)switch(t.type){case"error":this.Ri.error("Failed to recognize voice",t.text),t.text===s.CoreError.RecognitionTooMuchSpeechTimeout&&this.lc(this.wa.errorSpeechTooMuchTimeout,V),this.Wn.setVoiceRecording(!1);break;case"final":let e=t.text;e.length>0?(this.speechFinalResult&&(e=`${this.speechFinalResult.text} ${e}`),this.Wn.setUserInputText(e),this.He.enableSpeechAutoSend?zs((()=>{const i=(0,s.buildUserTextMessage)(e,t.requestId);this.sendMessage(i).then((()=>{this.Wn.setUserInputText("")})).catch(this.la)}),200):this.speechFinalResult={speechId:t.requestId,text:e},this.Wn.setVoiceRecording(!1)):this.Wn.setUserInputText(this.speechFinalResult.text);break;case"partial":let i=t.text;i.length>0&&(this.speechFinalResult&&(i=`${this.speechFinalResult.text} ${i}`),this.Wn.setUserInputText(i))}}cc(t){switch(this.He.disablePastActions){case"all":t.forEach((t=>{t.disableActions()}));break;case"postback":t.forEach((t=>{t.disablePostbacks()}))}}hc(t){switch(this.He.disablePastActions){case"all":t.forEach((t=>{t.enableActions()}));break;case"postback":t.forEach((t=>{t.enablePostbacks()}))}}uh(){this.cc(this.skillMessages)}sh(t){("none"===this.He.disablePastActions?this.skillMessages:this.Qn).push(t)}fc(){this.cc(this.Qn),this.Qn=[]}Rc(){("none"===this.He.disablePastActions?this.skillMessages:this.Qn).forEach((t=>{t.enablePostbacks()}))}Hc(){("none"===this.He.disablePastActions?this.skillMessages:this.Qn).forEach((t=>{t.disablePostbacks()}))}ic(t=!1){var e;const i=this.He.searchBarMode?this.qn:this.Ic;let s=!1;for((null===(e=this.Zn)||void 0===e?void 0:e.isVisible())&&(s=!0,this.hideTypingIndicator());i.firstChild;)i.removeChild(i.lastChild);s&&this.showTypingIndicator(),this.ra=!0,this.Tc=null,this.Ka(),t?this.oa=!0:this.As.trigger(o.CLICK_ERASE)}Sa(){const{userId:t,channelId:e}=this.He;xs&&(this.Vc(),this.ph=new xs(`${t}-${e}`),this.ph.onmessage=this.dh.bind(this))}Vc(){this.ph&&(this.ph.close(),this.ph=null)}gh(t){if(this.ph){const e={type:"message",message:t};if(Se(t)){const i=Ce(t);if(this.aa.indexOf(i)>=0)return;e.digest=i}this.ph.postMessage(e)}}sc(t){this.ph&&this.ph.postMessage(t)}dh(t){var e;const i=t.data;switch(i.type){case"message":const t=i.message.messagePayload;if(t.type===s.MessageType.Status){const e=t;return void("RESPONDING"===e.status?this.showTypingIndicator():"LISTENING"===e.status&&this.hideTypingIndicator())}if(t.type===s.MessageType.SessionClosed)return void(this.da&&this.da());if(i.digest){if(this.aa.indexOf(i.digest)>=0)return;this.ga&&this.ga(i.message)}else this.ma&&this.ma(i.message),this.fc(),this.showTypingIndicator();this.hideTypingIndicator(),this.Lc([i.message]);break;case"actionClearHistory":this.ic();break;case"actionLanguage":null===(e=this.Sc)||void 0===e||e.setTag(i.tag,!1)}}Ha(){if(this.He.wcfsEnableEndConversationButtonToClose&&this.Ro.getState()===s.ConnectionState.Closed)this.da();else{const t=this.wa;this.ah();const e=new us({title:t.endConversationConfirmMessage||"",description:t.endConversationDescription||"",parent:this.chatWidgetDiv,domUtil:this.ii,actions:[{label:t.noText,handler:this.ah.bind(this)},{label:t.yesText,handler:this.mh.bind(this),type:"filled"}]});e.open(),this.fh=e}}mh(){this.sendExitEvent(),this.ah()}lc(t,e){this.ah();const i=new us({title:t,icon:e,parent:this.He.searchBarMode?this.qn:this.chatWidgetDiv,domUtil:this.ii,fallbackFocus:()=>{this.Wn.focusTextArea()},showDismiss:!0,autoDismiss:!0,dismissLabel:this.wa.webViewErrorInfoDismiss});i.open(),this.fh=i}ah(){this.fh&&(this.fh.close(),this.fh=void 0)}Aa(t=!0){window.clearTimeout(this.Pc),window.clearInterval(this.jc),window.clearTimeout(this.Fc),this.He.showTypingIndicator&&(t?(this.hideTypingIndicator(),this.Zn.setAutoTimeout(!0)):(this.Zn.setAutoTimeout(!1),this.showTypingIndicator()))}Ea(t){const e=this.He.delegate;if(this.Ri.debug("onMessageReceived",t),this.ja(),this.na=!0,this.ra=!1,this.He.enableDefaultClientResponse&&(t.source===s.SkillMessageSource.Agent?this.ya=!1:this.ya||(this.ya=!0)),t){if(e&&e.beforeDisplay&&(0,a.isFunction)(e.beforeDisplay)&&Ts(t)){let i=JSON.parse(JSON.stringify(t));try{i=e.beforeDisplay(i)}catch(t){this.Ri.error(t)}if(!i)return;(0,s.isValidMessage)(i)?t=i:this.Ri.error("The generated delegate message is invalid. Displaying original message instead.")}switch(this.ga&&this.ga(t),this.gh(t),t.messagePayload.type){case s.MessageType.Status:{const e=t.messagePayload;"RESPONDING"===e.status?this.showTypingIndicator():"LISTENING"===e.status&&this.hideTypingIndicator();break}case s.MessageType.SessionClosed:this.da&&this.da();break;case s.MessageType.TextStream:{this.Lc([t]);const e=t.messagePayload;if("end"!==e.streamState)this.Ec(t),this.bh=e.text;else{if(!this.ea){const i=this.bh;if(i.length){const s=e.text.lastIndexOf(i);if(s>=0){const o=e.text.substring(s+i.length);e.text=o,this.Ec(t)}}}this.Mc(t)}this.isOpen||this.updateNotificationBadge(++this.Xn);break}default:this.Lc([t]),this.Ec(t),this.Mc(t),this.isOpen||this.updateNotificationBadge(++this.Xn)}this.Aa(Boolean(t.endOfTurn))}}vc(t){this.Mc(t),this.ja(),t&&(this.gh(t),t.messagePayload&&Ms.indexOf(t.messagePayload.type)<0&&(this.isOpen||this.updateNotificationBadge(++this.Xn),this.Lc([t])))}Qa(t){t||this.Ka(),this.ea=!t}Oa(t){const e=this.Jn.filter((e=>e.threadId===t));return this.ke=t,this.Ro.setCurrentThreadId(t),this.clearConversationHistory(!0),this.wh(e,!1)}xh(t){const e=this.He.threadId;this.Jn=t.slice(),e?this.wh(t.filter((t=>t.threadId===e))):this.wh(t)}Ya(){const t=this.He;if(t.storageType===Ie.CUSTOM){const e=t.conversationHistoryProvider;(0,a.isFunction)(null==e?void 0:e.getMessages)?e.getMessages({threadId:t.threadId}).then((t=>this.xh(t.messages))).catch((t=>this.Ri.error("Failed to fetch conversation history with provider.",t))):this.Ri.warn("Can not load conversation history. Pass conversationHistoryProvider object with getMessages function when custom storage is enabled.")}else t.enableLocalConversationHistory&&this.xh(this.getMessages())}wh(t,e=!0){return t.length?(this.ta=!1,this.Lc(t.slice(),!1).then((()=>{this.ta=!0,e||this.oc!==s.SenderType.Skill?this.uh():this.cc(this.skillMessages.slice(0,this.skillMessages.length-1)),this.He.searchBarMode||!e&&!this.oa||(this.Da&&(this.Da.setRelativeTime(new Date(t[t.length-1].date)),this.nh=this.Da.render(),this.wc(this.nh)),this.He.showPrevConvStatus&&(this.$c=this.ii.createTextDiv(["hr","flex"]),this.$c.innerText=this.wa.previousChats,this.wc(this.$c)),this.oa&&(this.oa=!1))}))):Promise.resolve()}Ta(){var t;if(this.Ro.isConnected()&&this.sa&&(this.Sc&&(this.Sc.disableComponent(!1),this.Sc.initLanguage()),!this.ia)){const e=this.He.initUserProfile;if(e){const t=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft};this.Ro.updateUser(e,{sdkMetadata:t}).then((()=>{this.ia=!0})).catch((t=>{this.Ri.error("[sendInitMessages] Failed to update user profile:",t)}))}if(this.He.initUserHiddenMessage){const t=this.He.initUserHiddenMessage;this.sendMessage(t,{hidden:!0,delegate:!1}).then((()=>{this.ia=!0})).catch(this.la)}if(null===(t=this.He.deviceToken)||void 0===t?void 0:t.length){const t=(0,a.getDeviceType)();this.Ro.sendDeviceToken(this.He.deviceToken,this.He.deviceType||t).then((()=>{this.ia=!0})).catch((t=>{this.Ri.error("[sendInitMessages] Failed to send device token:",t)}))}}}Ec(t){this.ea||this.Ro.speakTTS(t,this.wa)}Ka(){this.Ro.cancelTTS()}Is(t,e){this.getAgentDetails()&&this.Ro.sendUserTypingStatus(t,e).catch((t=>{this.Ri.error("[sendUserTypingStatusMessage] Failed to send user typing status:",t)}))}qa(t){if(t.hotkeys){const e=new os(t);e.setWidget(this.chatWidgetDiv);const i=t.hotkeys;Object.keys(i).forEach((t=>{const s=this.ha.get(t);s&&e.add(i[t],s,"launch"!==t)})),this.ec=e}}ac(t,e){const i=document.getElementsByClassName(`${this.Xi}-${t}`);for(const t of Array.from(i))for(const[i,s]of Object.entries(e))t.style[i]=s}Es(t,e){this.ha.set(t,e)}}const Ts=t=>{let e=!0;const i=t.messagePayload;if(i){i.type===s.MessageType.TextStream&&(e=!1)}return e},$s=()=>Promise.reject(Error("TextStreamProgress"));var Is=i(168);const As="none",Os="full-size";class Es extends li{constructor(t,e,i,o,r,n,a,c,h){super(),this.He=t,this.zn=e,this.yh=i,this.kh=o,this._h=r,this.zh=n,this.Ro=a,this.Un=c,this.As=h,this.Ri=new $t("ContextualWidgetComponent"),this.Mh=!1,this.Xi=t.name,this.qe={type:s.MessageType.Text,text:"",globalActions:[{type:s.ActionType.Postback,label:"Global1",postback:{}},{type:s.ActionType.Postback,label:"Global2",postback:{}},{type:s.ActionType.Postback,label:"Global3",postback:{}},{type:s.ActionType.Postback,label:"Global4",postback:{}}]},this.threadId=`${s.ContextSource.UIWidget}:${this.kh||""}-${this.yh||""}`,this.Sh=this.He.sdkMetadata?Object.assign({version:Ft},this.He.sdkMetadata):{version:Ft},this.He.icons=Object.assign(Object.assign({},this.He.icons),{logo:W});const{uploadFile:l,getSuggestions:u,Ts:p,Bn:d,Is:g,Es:m}=this.Un;this.Wn=new zi(e,this.sendMessage.bind(this),l.bind(c),Object.assign(Object.assign({},this.He),{enableAttachment:!1}),u.bind(c),p.bind(c),d.bind(c),g.bind(c),this.As,c,m.bind(c)),this.contextualElem=document.getElementById(this.yh),this.Ch=this.contextualElem.querySelector("input, textarea"),this.Th=[{type:s.ActionType.Postback,label:"Show more",postback:{showMore:!0}}],this.$h=!1,this.Ih=!1,this.Ah=!1,this.Oh=!0,this.Eh={webCore:a,onMessageActionClicked:this.De.bind(this)}}render(){const t=this.zn,e=t.createDiv(["widget-wrapper"]);this.element=t.createDiv(["contextual-widget"]),this.element.id=this.threadId;const i=t.createDiv(["container","none"]);this.appendToElement(i),e.appendChild(i),this.Lh=i;const s=this.contextualElem.parentNode,o=t.createDiv(["contextual-widget-wrapper"]);s.replaceChild(o,this.contextualElem),o.appendChild(this.contextualElem),document.body.appendChild(e),this.contextualElem.parentElement.insertBefore(e,this.contextualElem);const r=t.createDiv([]);this.Ph=t.createDiv(["widget","flex","col"]),this.Ph.setAttribute("role","region"),this.Ph.setAttribute("aria-labelledby",`${this.Xi}-title`);const n=t.createDiv(["header","flex"]),a=t.createDiv(["header-info-wrapper"]),c=this.He.i18n[this.He.locale].chatTitle,h=this.He.icons;if(!("logo"in h)||h.logo){const e=t.createImageIcon({icon:h.logo||M,iconCss:["logo"]});n.appendChild(e)}if(c){const e=t.createTextDiv(["title"]);e.id=`${this.Xi}-contextual-title`,e.innerText=c,e.title=c,a.appendChild(e)}n.appendChild(a);const l=t.createIconButton({css:["start-over-button",As],icon:G,iconCss:[],title:"Start Again"});l.onclick=()=>{this.Ch?this.Ch.value="":this.Ri.error("The input element is not found for clearing the filled-in text."),this.Oh=!0,this.Mh=!0,t.addCSSClass(l,As),this.jh()},n.appendChild(l),this.Fh=l;const u=t.createIconButton({css:["close-button"],icon:h.close||m,iconCss:[],title:"close"});u.onclick=this.Vh.bind(this),n.appendChild(u),this.Ph.appendChild(n),this.Hh=t.createDiv(["widget-content"]),this.Ph.appendChild(this.Hh),this.Wn.render(),this.Wn.disable(!1),this.Ph.appendChild(this.Wn.element),t.addCSSClass(r,"open"),r.appendChild(this.Ph),t.addCSSClass(this.element,"wrapper",this.He.theme),this.element.appendChild(r),this.qe.globalActions&&(this.Dh=this.qe.globalActions),this.Rh(!0)}sendMessage(t,e=!0){return this.mc?$s():("string"==typeof t&&(t=(0,s.buildUserTextMessage)(t)),this.Wn.focusTextArea(),t&&this.Ro.sendMessage(t,{sdkMetadata:this.Sh,threadId:this.threadId}).then((()=>{this.Ah=!1,this.zn.removeCSSClass(this.Fh,As),e&&this.Nh()})).catch((t=>this.Ri.error("[sendMessage] Failed to send message:",t))))}onMessageReceived(t){var e,i;const o=this.He,r=this.Ch,n=this.zn;if(this.Ih=!1,this.$h||(n.addCSSClass(this.Wn.element,"enabled"),this.$h=!0),t.messagePayload.llmGenerated){const e=$e.fromMessage(o,n,t,this.Eh);if(!e)return;if(this.Ah=!0,e instanceof ie){const i=t.messagePayload;switch(i.streamState){case"start":return this.Wn.disable(),e.isCoPilot=!0,e.showDone=this.Uh.bind(this),void(this.Bh?this.Bh(i):r?(e.textElement=r,e.update(i),this.mc=e):this.Ri.error("The input element is not found for filling in the generated text."));case"running":return void(this.Bh?this.Bh(i):this.mc.update(i));case"end":this.Wn.disable(!1),this.Bh?(this.Bh(i),this.Uh()):(this.mc.update(i),this.mc=null),this.Oh=!1,i.text="",this.Yn(t)}}else if(this.mc=null,this.Oh=!1,e instanceof Kt){const e=t.messagePayload;this.Bh?this.Bh(e):(r.innerHTML=(0,Is.convertBreakTagsToNewLines)(e.text),e.text="",this.Yn(t)),this.Vh()}}else if(null===(e=t.messagePayload.channelExtensions)||void 0===e?void 0:e.showInDialog){const e=n.createDiv(["wrapper","popup-content-wrapper"]),i=n.createDiv(["popup-dialog"]),s=$e.fromMessage(o,n,t,this.Eh);s.onActionClick=this.De.bind(this),i.appendChild(s.render()),e.appendChild(i);const r=s.actionsWrapper;if(r){const t=r.children;for(let i=0;i<t.length;i++)t[i].addEventListener("click",(()=>e.remove()))}e.onclick=t=>{i.contains(t.target)||e.remove()},document.body.appendChild(e),this.Oh=!1,this.Vh()}else if(this.Oh=!1,t.messagePayload.type===s.MessageType.Error){if(this.Ih=!0,null===(i=this.Hh.firstChild)||void 0===i||i.remove(),!this.Wh){const t=n.createDiv(["error-message"]);t.appendChild(n.createImageIcon({icon:Z,iconCss:["error-icon"]}));const e=n.createDiv(["error-info"]),i=n.createTextDiv(["error-text"]),s=n.createTextDiv(["reset-button"]);s.onclick=()=>{this.Ih=!1,this.Oh=!0,this.jh()},i.innerText="Something went wrong",s.innerText="Start over",e.appendChild(i),e.appendChild(s),t.appendChild(e),this.Wh=t}this.Hh.appendChild(this.Wh),this.jh()}else this.Yn(t),this.showFullSizeWidget()}addText(t){return this.qe.text=t,this}addAction(t,e,i=!1){return this.Th.push({type:s.ActionType.Postback,label:t,postback:{actionId:e,generate:i}}),this}addFieldInputParameter(t,e,i){return this.Th.forEach((s=>{const o=s.postback;o.actionId===t&&(o.fieldInputParameters||(o.fieldInputParameters={}),o.fieldInputParameters[e]=i)})),this}addAdditionalInputParameter(t,e,i){return this.Th.forEach((s=>{const o=s.postback;o.actionId===t&&(o.additionalInputParameters||(o.additionalInputParameters={}),o.additionalInputParameters[e]=i)})),this}createWidget(){const t=this.contextualElem;return this.element||this.render(),this._h&&t.addEventListener("focus",(()=>{this.showWidget()})),this}showWidget(){const t=this.zh;return Object.keys(t).filter((t=>t!==this.threadId)).forEach((e=>{t[e].hideWidget()})),this.zn.removeCSSClass(this.Lh,As),this}collapseWidget(){return this.Vh(),this}hideWidget(){return this.zn.addCSSClass(this.Lh,As),this}startWidgetInteraction(t){return this.Zh(this.Gh(t)),this}onGeneratedText(t){return this.Bh=t,this}Yn(t){var e;const i=$e.fromMessage(Object.assign(Object.assign({},this.He),{actionsLayout:"horizontal",globalActionsLayout:"horizontal"}),this.zn,t,this.Eh);i.onActionClick=this.De.bind(this),null===(e=this.Hh.firstChild)||void 0===e||e.remove(),this.Hh.appendChild(i.render())}Rh(t=!1){this.Oh&&(t?(1===this.Th.length?this.qe.actions=this.Th.slice(0):this.qe.actions=this.Th.slice(0,2).reverse(),this.qe.globalActions=[]):(this.qe.actions=this.Th.slice(1),this.Dh&&(this.qe.globalActions=this.Dh.slice(0))),this.Yn({messagePayload:this.qe}))}Vh(){const t=this.zn;if(!this.qh){const e=t.createDiv(["minimum-size","contextual-widget","wrapper"]),i=t.createIconButton({css:[],icon:B,iconCss:[],title:"open"}),o=t.createIconButton({css:[],icon:U,iconCss:[],title:"like"}),r=t.createIconButton({css:[],icon:N,iconCss:[],title:"dislike"});i.onclick=()=>{this.Oh||this.Ih?this.jh():this.showFullSizeWidget()},o.onclick=()=>{this.sendMessage((0,s.buildPostbackMessage)({postback:{rating:"positive",feedbackType:"llm"},type:s.ActionType.Postback}),!1)},r.onclick=()=>{this.sendMessage((0,s.buildPostbackMessage)({postback:{rating:"negative",feedbackType:"llm"},type:s.ActionType.Postback}),!1)},e.appendChild(i),e.appendChild(o),e.appendChild(r),this.Lh.appendChild(e),this.qh=e}t.removeCSSClass(this.element,Os),t.addCSSClass(this.element,As),this.Yh&&t.addCSSClass(this.Yh,As),this.Jh&&t.addCSSClass(this.Jh,As),t.removeCSSClass(this.qh,As),this.Ah?t.removeCSSClass(this.qh,"no-feedback"):t.addCSSClass(this.qh,"no-feedback")}jh(){const t=this.zn;this.qh&&t.addCSSClass(this.qh,As),this.Yh&&t.addCSSClass(this.Yh,As),this.Jh&&t.addCSSClass(this.Jh,As),t.removeCSSClass(this.element,Os),t.removeCSSClass(this.element,As),this.Rh(!0),this.Ah=!1}showFullSizeWidget(){const t=this.zn;this.qh&&t.addCSSClass(this.qh,As),this.Yh&&t.addCSSClass(this.Yh,As),this.Jh&&t.addCSSClass(this.Jh,As),t.addCSSClass(this.element,As),this.Rh(),t.addCSSClass(this.element,Os)}Nh(){const t=this.zn;if(!this.Yh){const e=t.createDiv(["generate-spinner"]),i=t.createTextDiv(["generate-text"]);i.innerText="Generating...",e.appendChild(t.createImageIcon({icon:R,iconCss:["generate-icon","spin"]}));const s=t.createIconButton({css:["close-button",As],icon:m,iconCss:[],title:"close"});s.onclick=this.Vh.bind(this),e.appendChild(i),e.appendChild(s),this.Lh.appendChild(e),this.Yh=e}this.qh&&t.addCSSClass(this.qh,As),this.Jh&&t.addCSSClass(this.Jh,As),t.removeCSSClass(this.element,Os),t.addCSSClass(this.element,As),t.removeCSSClass(this.Yh,As)}Uh(){const t=this.zn;if(!this.Jh){const e=t.createDiv(["generate-spinner"]),i=t.createTextDiv(["generate-text"]);i.innerText="Done",e.appendChild(t.createImageIcon({icon:D,iconCss:["generate-icon"]})),e.appendChild(i),this.Lh.appendChild(e),this.Jh=e}this.qh&&t.addCSSClass(this.qh,As),t.addCSSClass(this.Yh,As),t.removeCSSClass(this.Jh,As),t.removeCSSClass(this.element,Os),t.addCSSClass(this.element,As),setTimeout(this.Vh.bind(this),3e3)}De(t){switch(t.type){case s.ActionType.Postback:t.getPayload().then((e=>{(null==e?void 0:e.generate)?this.Zh(Object.assign(Object.assign({},(0,Is.getFieldInputValues)(e.fieldInputParameters)),e.additionalInputParameters)):(null==e?void 0:e.showMore)?this.showFullSizeWidget():this.sendMessage((0,s.buildPostbackMessage)({postback:e,text:t.label,type:s.MessageType.Postback}))}));break;case s.ActionType.SubmitForm:const e=t.messageComponent;if(!e.validateForm())break;t.getPayload().then((t=>{const i={postback:t,submittedFields:e.getSubmittedFields(),type:s.MessageType.FormSubmission};t||delete i.postback,this.sendMessage((0,s.buildUserMessage)(i))}))}}Zh(t){this.sendMessage({messagePayload:{type:s.MessageType.UpdateApplicationContextCommand,source:s.ContextSource.UIWidget,context:this.kh,properties:t,reset:this.Mh}})}Gh(t){let e;return this.Th.forEach((i=>{const s=i.postback,{fieldInputParameters:o,additionalInputParameters:r}=s;s.actionId===t&&(e=Object.assign(Object.assign({},(0,Is.getFieldInputValues)(o)),r))})),e}}},476:function(t,e,i){i.r(e),i.d(e,{AuthError:function(){return s},AuthTokenService:function(){return p},Deferred:function(){return Z},JWT:function(){return o},KeyCode:function(){return w},buildURL:function(){return A},deepFreeze:function(){return a},drawVisualizer:function(){return G},formatDate:function(){return y},generateEventDispatcher:function(){return x},getDeviceType:function(){return H},getLongPollURL:function(){return E},getWebSocketURL:function(){return O},isAndroid:function(){return j},isApple:function(){return F},isFunction:function(){return n},isMobile:function(){return V},isObject:function(){return r},isSameDay:function(){return I},parseDOM:function(){return N},pipe:function(){return h},removeDisplayNoneAndDecode:function(){return D},resetRegex:function(){return l},safeHTML:function(){return U},setReadOnly:function(){return c},startTimer:function(){return ct},stringToHTML:function(){return W},stripHTTP:function(){return P}});const s={AuthExpiredToken:"AuthExpiredToken",AuthNoToken:"AuthNoToken",AuthNoChannelId:"AuthNochannelId",AuthNoUserId:"AuthNouserId",AuthNoExp:"AuthNoexp",AuthNoIat:"AuthNoiat",AuthInvalidChannelId:"AuthInvalidchannelId",AuthInvalidUserId:"AuthInvaliduserId",AuthInvalidExp:"AuthInvalidexp",AuthInvalidIat:"AuthInvalidiat",AuthEmptyChannelIdClaim:"AuthInvalidchannelId",AuthEmptyUserIdClaim:"AuthInvaliduserId",AuthNegativeExp:"AuthNegativeexp",AuthNegativeIat:"AuthNegativeiat",AuthExpLessThanIat:"AuthExpLessThanIat"};class o{constructor(t){this.token=t;const e=this.token.split(".");this.header=JSON.parse(atob(e[0])),this.payload=JSON.parse(atob(e[1]))}getClaim(t){return this.payload[t]}}const r=t=>"object"==typeof t&&null!==t,n=t=>t instanceof Function,a=t=>{if(!r(t))return t;for(const e of Object.keys(t)){const i=t[e];r(i)&&a(i)}return Object.freeze(t)},c=t=>{const e={};return Object.keys(t).forEach((i=>{Object.defineProperty(e,i,{get:()=>t[i],enumerable:!0,configurable:!0})})),e},h=(t,...e)=>e.reduce(((t,e)=>e(t)),t),l=t=>(t.lastIndex=0,t),u=Promise;class p{static getInstance(){return this.v||(this.v=new p),this.v}get(){return this.Kh&&f(this.Kh)?u.resolve(this.Kh):new u(((t,e)=>{u.resolve(this.Xh()).then((i=>{this.Kh=new o(i);try{if(function(t){t||v(s.AuthNoToken);const e="iat",i=t.getClaim(e);b(e,g,i);const o=t.getClaim(m);b(m,g,o),o<=i&&v(s.AuthExpLessThanIat);const r="channelId",n=t.getClaim(r);b(r,d,n);const a="userId",c=t.getClaim(a);b(a,d,c)}(this.Kh),f(this.Kh))return void t(this.Kh);v(s.AuthExpiredToken)}catch(t){e(t)}}))}))}reset(){this.Kh=void 0}setFetch(t){if(!n(t))throw new Error("'generateAuthToken' is not a function. Create a function that returns a Promise that resolves to a new JWT when called.");this.Xh=t,this.reset()}}const d="string",g="number",m="exp";function f(t){const e=Math.floor((Date.now()+2e4)/1e3);return t.getClaim(m)>e}function b(t,e,i){null==i&&v(`AuthNo${t}`),typeof i!==e&&v(`AuthInvalid${t}`),"number"==typeof i?i<=0&&v(`AuthNegative${t}`):i.length||v(`AuthEmpty${t}`)}function v(t){throw Error(t)}const w={Return:"Enter",Esc:"Escape",Space:"Space",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Tab:"Tab",PageDown:"PageDown",PageUp:"PageUp",Home:"Home",End:"End",Backspace:"Backspace"};function x(){let t={};return{bind:(e,i)=>{e&&i&&n(i)&&(Object.prototype.hasOwnProperty.call(t,e)?t[e].push(i):t[e]=[i])},trigger:(e,...i)=>{if(Object.prototype.hasOwnProperty.call(t,e)){const s=null!=i?i:[];t[e].forEach((t=>{try{t.call(null,...s)}catch(t){console.error(`${e} listener error`,t)}}))}},unbind:(e,i)=>{e?i||!Object.prototype.hasOwnProperty.call(t,e)?t[e]&&(t[e]=t[e].filter((t=>t!==i))):t[e].splice(0,t[e].length):t={}}}}const y=(t,{pattern:e,locale:i})=>{const s=new Date(t);if("string"==typeof e)try{return k(s,e)}catch(t){}else if(r(e))return new Intl.DateTimeFormat(i,e).format(s);return _(s,i)},k=(t,e)=>{const i=t.getDate(),s=t.getDay(),o=z[s],r=t.getMonth()+1,n=M[r-1],a=`${t.getFullYear()}`,c=t.getHours(),h=t.getMinutes(),l=t.getSeconds(),u=t.getMilliseconds(),p=c>=S?"PM":"AM",d=C(t),g=c%S||S,m={DD:$(i),Do:`${i}${T(i)}`,D:`${i}`,dddd:o,ddd:o.substring(0,3),d:`${s}`,MMMM:n,MMM:n.substring(0,3),MM:$(r),M:`${r}`,YYYY:a,YY:a.slice(-2),HH:$(c),H:`${c}`,hh:$(g),h:`${g}`,mm:$(h),m:`${h}`,ss:$(l),s:`${l}`,SSS:`${u}`,SS:""+u%100,S:""+u%1e3,A:p,a:p.toLowerCase(),ZZ:d.replace(":",""),Z:d};return e.replace(/DD|Do|D|dddd|ddd|d|MMMM|MMM|MM|M|YYYY|YY|HH|H|hh|h|mm|m|ss|s|SSS|SS|S|A|a|ZZ|Z/g,(t=>m[t]))},_=(t,e)=>`${t.toLocaleDateString(e,{weekday:"short",month:"short",day:"numeric"}).replace(/,/g,"")}, ${t.toLocaleTimeString(e,{hour:"numeric",minute:"numeric",hour12:!0})}`,z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"],S=12,C=t=>{const e=t.getTimezoneOffset(),i=Math.abs(e);return`${i===e?"+":"-"}${$(Math.floor(i/60))}:${$(i%60)}`},T=t=>{let e="th";if(t>=11&&t<=13)return e;switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},$=t=>`${t}`.padStart(2,"0"),I=(t,e)=>{const i=new Date(t),s=new Date(e);return i.getDate()===s.getDate()&&i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()},A=(t,e,i,s)=>L(`${t}${e}${s}`,i),O=(t,e,i=!0,s="websdk")=>A(`ws${i?"s":""}://`,t,e,`/chat/v1/chats/sockets/${s}`),E=(t,e,i=!0)=>A(`http${i?"s":""}://`,t,e,"/chat/v1/chats/message"),L=(t,e)=>{const i=Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&");return i.length?`${t}?${i}`:t},P=t=>t.replace(/^https?:\/\//i,""),j=()=>/Android/i.test(navigator.userAgent),F=()=>/iPhone|iPad/i.test(navigator.userAgent)&&!window.MSStream,V=()=>j()||F(),H=()=>j()?"android":F()?"ios":"desktop",D=t=>{const e=document.createElement("div");e.style.display="none",document.body.appendChild(e),e.innerHTML=t,R(e);const i=e.innerText;return e.remove(),i},R=t=>{for(let e=t.childElementCount-1;e>=0;e--){const i=t.children[e],s=window.getComputedStyle(i);"none"===s.display||"hidden"===s.visibility?i.remove():R(i)}},N=t=>{const e=(new DOMParser).parseFromString(t.replace(/\r\n|\n|\r/g,"<br/>"),"text/html");return e&&e.body},U=t=>{const e=N(t);e.querySelectorAll("script, iframe, link, object").forEach((t=>{t.remove()}));return e.querySelectorAll("*").forEach((t=>{for(const e of t.attributes)B(e)&&t.removeAttribute(e.name)})),e.innerHTML},B=t=>{const e=t.name.toLowerCase(),i=t.value.toLowerCase();return e.startsWith("on")||"style"===e||i.startsWith("javascript")},W=t=>{const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild};class Z{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),Object.freeze(this)}}const G=(t,e,i="#000")=>{const s=e.height,o=e.width,r=Math.floor(s/2);let n=q(t,31);n=Y(n,s/255);const a=e.getContext("2d");if(a){a.fillStyle=i,a.clearRect(0,0,o,s),a.save();let t=0;n.forEach((e=>{const i=Math.ceil(e/2)+1;a.fillRect(t,r-i,2,2*i),t+=8})),a.save()}},q=(t,e)=>{const i=Math.ceil(e/2),s=t.length/i,o=[],r=[];for(let e=0;e<t.length;e+=s){const i=t.slice(e,e+s).map((t=>t*t)).reduce(((t,e)=>t+e),0)/s;o.push(i),r.unshift(i)}return o.splice(0,1),r.concat(o)},Y=(t,e)=>t.map((t=>t*e)),J=window.setInterval,K=window.setTimeout,X=36e5,Q=864e5;let tt;const et=()=>{clearTimeout(tt),clearInterval(tt)},it=(t,e,i,s,o,r)=>{var n;let a=1;et(),t((null===(n=e[o])||void 0===n?void 0:n.replace("{0}",`${a}`))||""),tt=J((()=>{var s;a++,i&&r&&a>=i?r(t,e):t((null===(s=e[o])||void 0===s?void 0:s.replace("{0}",`${a}`))||"")}),s)},st=(t,e)=>{it(t,e,60,6e4,"relTimeMin",ot)},ot=(t,e)=>{it(t,e,24,X,"relTimeHr",rt)},rt=(t,e)=>{it(t,e,30,Q,"relTimeDay",nt)},nt=(t,e)=>{it(t,e,12,2592e6,"relTimeMon",at)},at=(t,e)=>{it(t,e,0,31536e6,"relTimeYr")},ct=(t,e)=>{et(),t(e.relTimeNow||""),tt=K((()=>{((t,e)=>{et(),t(e.relTimeMoment||""),tt=K((()=>{st(t,e)}),5e4)})(t,e)}),1e4)}},8:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.Constants=e.SEC_MULTIPLIER=e.ATTACHMENT_MAX_HEIGHT=e.MESSAGE_BLOCK_THRESOLD=e.ATTACHMENT_MAX_SIZE=e.BYTE_MULTIPLIER=e.SDK_VERSION=void 0;var i=function(){function t(){}return t.GEOLOCATION_REQUEST_DENIED=1,t.CHAT_SCROLL_DELAY=300,t.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],t.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},t.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},t.MAX_SUGGESTIONS_COUNT=5,t.MIN_SUGGESTIONS_COUNT=1,t.SUGGESTIONS_COUNT_THRESHOLD=30,t.TIME={MIN_FIFTY:3e6},t}();e.Constants=i;e.SDK_VERSION="{version}",e.BYTE_MULTIPLIER=1024,e.ATTACHMENT_MAX_SIZE=25*e.BYTE_MULTIPLIER*e.BYTE_MULTIPLIER,e.MESSAGE_BLOCK_THRESOLD=1e4,e.ATTACHMENT_MAX_HEIGHT=211,e.SEC_MULTIPLIER=1e3},720:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.defaultSettings=void 0;var s=i(396),o=i(75),r="Please try sharing it again, or else type it in.";e.defaultSettings={badgePosition:{right:"-5px",top:"-5px"},clientAuthEnabled:!1,conversationBeginPosition:"bottom",disablePastActions:"all",displayActionsAsPills:!1,searchBarMode:!1,sidepanel:!1,embedded:!1,embeddedVideo:!0,enableAgentSneakPreview:!1,enableAttachment:!0,enableAttachmentSecurity:!1,enableHeaderActionCollapse:!0,enableAutocomplete:!1,enableAutocompleteClientCache:!1,enableBotAudioResponse:!1,enableDefaultClientResponse:!1,enableClearMessage:!1,enableEndConversation:!0,enableHeadless:!1,enableLocalConversationHistory:!1,enableLongPolling:!1,enableResizableWidget:!1,enableSendTypingStatus:!1,enableSecureConnection:!0,enableSpeech:!1,enableSpeechAutoSend:!0,enableTabsSync:!0,enableTimestamp:!0,enableVoiceOnlyMode:!1,focusOnNewMessage:"input",height:"620px",i18n:{en:{agent:"Agent",agentMessage:"{0} says",attachment_audio:"Audio attachment",attachment_file:"File attachment",attachment_image:"Image attachment",attachment_video:"Video attachment",attachmentAudioFallback:"Your browser does not support embedded audio. However you can {0}download it{/0}.",attachmentVideoFallback:"Your browser does not support embedded video. However you can {0}download it{/0}.",audioResponseOff:"Turn audio response on",audioResponseOn:"Turn audio response off",avatarAgent:"Agent icon",avatarBot:"Bot icon",avatarUser:"User icon",card:"Card {0}",cardImagePlaceholder:"Card image",cardNavNext:"Next card",cardNavPrevious:"Previous card",chatTitle:"Chat",clear:"Clear conversation",close:"Close widget",closing:"Closing",connected:"Connected",connecting:"Connecting",connectionFailureMessage:"Sorry, the assistant is unavailable right now. If the issue persists, contact your help desk.",connectionRetryLabel:"Try Again",copyFailureMessage:"Sorry, copying is not available on this device.",copySuccessMessage:"Successfully copied the response text to the clipboard.",defaultGreetingMessage:"Hey, Nice to meet you! Allow me a moment to get back to you.",defaultWaitMessage:"I'm still working on your request. Thank you for your patience!",defaultSorryMessage:"I'm sorry. I can't get you the right content. Please try again.",disconnected:"Disconnected",download:"Download",editFieldErrorMessage:"Field input is invalid",editFormErrorMessage:"Some of the fields need your attention",endConversation:"End Conversation",endConversationConfirmMessage:"Are you sure you want to end the conversation?",endConversationDescription:"This will also clear your conversation history.",errorSpeechInvalidUrl:"ODA URL for connection is not set. Please pass 'URI' parameter during SDK initialization.",errorSpeechMultipleConnection:"Another voice recognition is ongoing. Can't start a new one.",errorSpeechTooMuchTimeout:"The voice message is too long to recognize and generate text.",errorSpeechUnavailable:"To allow voice messaging, update your browser settings to enable access to your microphone.",errorSpeechUnsupportedLocale:"The locale set for voice recognition is not supported. Please use a valid locale in 'speechLocale' setting.",inputPlaceholder:"Type a message",imageViewerClose:"Close image viewer",imageViewerOpen:"Open image viewer",itemIterator:"Item {0}",language_ar:"Arabic",language_de:"German",language_detect:"Detect Language",language_en:"English",language_es:"Spanish",language_fr:"French",language_hi:"Hindi",language_it:"Italian",language_nl:"Dutch",language_pt:"Portuguese",languageSelectDropdown:"Select chat language",linkField:"Click on the highlighted text to open Link for {0}",noResultText:"No more results",noSpeechTimeout:"The voice could not be detected to perform recognition.",noText:"No",openMap:"Open Map",previousChats:"End of previous conversation",ratingStar:"Rate {0} star",recognitionTextPlaceholder:"Speak your message",relTimeDay:"{0}d ago",relTimeHr:"{0}hr ago",relTimeMin:"{0}min ago",relTimeMoment:"A few seconds ago",relTimeMon:"{0}mth ago",relTimeNow:"Now",relTimeYr:"{0}yr ago",requestLocation:"Requesting location",requestLocationDeniedPermission:"To allow sharing your location, update your browser settings to enable access to your location. You can also type in the location instead.",requestLocationDeniedTimeout:"It is taking too long to get your location. ".concat(r),requestLocationDeniedUnavailable:"Your current location is unavailable. ".concat(r),retryMessage:"Try again",send:"Send message",shareAudio:"Share Audio",shareFailureMessage:"Sorry, sharing is not available on this device.",shareFile:"Share File",shareLocation:"Share Location",shareVisual:"Share Image/Video",skillMessage:"Skill says",showOptions:"Show Options",speak:"Speak a message",typingIndicator:"Waiting for response",upload:"Share popup",uploadFailed:"Upload Failed.",uploadFileNetworkFailure:"Upload not completed due to network failure.",uploadFileSizeLimitExceeded:"File size should not be more than {0}MB.",uploadFileSizeZeroByte:"Files of size zero bytes can't be uploaded.",uploadUnauthorized:"Upload request is unauthorized.",uploadUnsupportedFileType:"Unsupported file type.",userMessage:"I say",utteranceGeneric:"Message from skill.",webViewAccessibilityTitle:"In-widget WebView to display links",webViewClose:"Done",webViewErrorInfoDismiss:"Dismiss",webViewErrorInfoText:"Don't see the page? {0}Click here{/0} to open it in a browser.",yesText:"Yes"},ar:{language_ar:"اَلْعَرَبِيَّةُ"},de:{language_de:"Deutsch"},es:{language_es:"Español"},fr:{language_fr:"Français"},hi:{language_hi:"हिन्दी"},it:{language_it:"Italiano"},nl:{language_nl:"Nederlands"},pt:{language_pt:"Português"}},initBotAudioMuted:!0,initMessageOptions:{sendAt:"expand"},disableInlineCSS:!1,isDebugMode:!1,locale:"en",messageCacheSizeLimit:2e3,name:"oda-chat",openChatOnLoad:!1,openLinksInNewWindow:!1,readMark:"✓",reconnectInterval:5,reconnectMaxAttempts:5,shareMenuItems:[o.ShareCategory.AUDIO,o.ShareCategory.FILE,o.ShareCategory.LOCATION,o.ShareCategory.VISUAL],showConnectionStatus:!1,showPrevConvStatus:!0,showTypingIndicator:!0,speechLocale:s.RecognitionLocale.EN_US,theme:o.WidgetTheme.DEFAULT,timestampMode:"default",defaultGreetingTimeout:5,defaultWaitMessageInterval:5,typingIndicatorTimeout:30,typingStatusInterval:3,typingDelay:0,upgradeToWebSocketInterval:300,webViewConfig:{},width:"375px",actionsLayout:"vertical",globalActionsLayout:"vertical",cardActionsLayout:"vertical",formActionsLayout:"vertical",wcfsEnableEndConversationButtonToClose:!1}},549:function(t,e,i){var s=this&&this.tl||function(t,e,i,s){return new(i||(i=Promise))((function(o,r){function n(t){try{c(s.next(t))}catch(t){r(t)}}function a(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}c((s=s.apply(t,e||[])).next())}))},o=this&&this.el||function(t,e){var i,s,o,r,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(n=0)),n;)try{if(i=1,s&&(o=2&a[0]?s.return:a[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,a[1])).done)return o;switch(s=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=n.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(t){a=[6,t],s=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(e,"Qh",{value:!0}),e.linkify=e.getEmbeddedVideo=void 0;var r=i(476),n=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gimu;e.linkify=function(t,e,i){var s=a(t),o=u(s).replace((0,r.resetRegex)(n),m(i,e)),c=p(o);return S(c,e)};var a=function(t){var e;try{e=(0,r.parseDOM)(t)}catch(e){return t}return c(e),h(e),e.innerHTML},c=function(t){return t.querySelectorAll("a").forEach((function(t){t.outerHTML=l(t.outerHTML)})),t},h=function(t){t.querySelectorAll("*").forEach((function(t){if("A"!==t.tagName)for(var e=t.attributes,i=0;i<e.length;i++){var s=e[i];s.value=l(s.value)}}))},l=function(t){return t.replace(/(https?|www)/gim,g)},u=function(t){return t.replace(/&lt;|&gt;|&nbsp;|&amp;/gim,g)},p=function(t){var e=t;return d.forEach((function(t,i){e=e.replace(new RegExp(i,"g"),t)})),d.clear(),e},d=new Map,g=function(t){var e=performance.now().toString(36).replace(".","_")+Math.random().toString(36).substring(2);return d.set(e,t),e},m=function(t,e){return function(i,s){if(t){var o=f(i,e);if(o)return o}var r=s?"https://".concat(i):i;return'<a href="'.concat(r,'" target="_blank" rel="noreferrer">').concat(i,"</a>")}},f=function(t,e){var i,s;try{var o=t.toLowerCase().startsWith("https")?new URL(t):new URL("https://".concat(t));i=o.hostname.toLowerCase()}catch(t){return s}return z.some((function(o){var r=i.includes(o.name);if(r){var n=C();"videohub"!==o.name&&b(o.url,t,e,n),s=o.getEmbed(o.getId(t),n,e)}return r})),s};e.getEmbeddedVideo=f;var b=function(t,e,i,n){return s(void 0,void 0,void 0,(function(){var s,a,c,h,l;return o(this,(function(o){switch(o.label){case 0:s="".concat(t,"?url=").concat(e),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(s)];case 2:return(a=o.sent()).ok?[4,a.json()]:[2];case 3:return(c=o.sent())&&c.html&&(h=c.html.replace("<iframe",'<iframe class="'.concat(i,'-video-wrapper"')),null==(l=document.getElementById(n))||l.replaceWith((0,r.stringToHTML)(h))),[3,5];case 4:return o.sent(),[3,5];case 5:return[2]}}))}))},v=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,w=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,x=/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)(?:|\/\?)/gim,y=/^(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com\/(?:video|embed)|dai.ly)\/([a-z0-9]+)/gim,k="allow",_="".concat(k,'="autoplay *; fullscreen *; encrypted-media *" sandbox="').concat(k,"-downloads ").concat(k,"-forms ").concat(k,"-same-origin ").concat(k,"-scripts ").concat(k,"-top-navigation ").concat(k,"-pointer-lock ").concat(k,"-popups ").concat(k,"-modals ").concat(k,"-orientation-lock ").concat(k,"-popups-to-escape-sandbox ").concat(k,"-presentation ").concat(k,'-top-navigation-by-user-activation" height="auto"'),z=[{name:"youtu",url:"https://www.youtube.com/oembed",getEmbed:function(t,e,i){return T('src="https://www.youtube.com/embed/'.concat(t,'" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"'),e,i,"youtube")},getId:function(t){return M(t,v)}},{name:"videohub",url:"",getEmbed:function(t,e,i){var s="flashvars";return T('src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id='.concat(t,"&").concat(s,"[streamerType]=auto&amp;").concat(s,"[localizationCode]=en&amp;").concat(s,"[sideBarContainer.plugin]=true&amp;").concat(s,"[sideBarContainer.position]=left&amp;").concat(s,"[sideBarContainer.clickToClose]=true&amp;").concat(s,"[chapters.plugin]=true&amp;").concat(s,"[chapters.layout]=vertical&amp;").concat(s,"[chapters.thumbnailRotator]=false&amp;").concat(s,"[streamSelector.plugin]=true&amp;").concat(s,"[EmbedPlayer.SpinnerTarget]=videoHolder&amp;").concat(s,"[dualScreen.plugin]=true&amp;").concat(s,"[hotspots.plugin]=1&amp;").concat(s,'[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ').concat(_),e,i,"ovh")},getId:function(t){return M(t,w)}},{name:"vimeo",url:"https://vimeo.com/api/oembed.json",getEmbed:function(t,e,i){return T('src="https://player.vimeo.com/video/'.concat(t,'" allow="fullscreen; picture-in-picture"'),e,i,"vimeo")},getId:function(t){return M(t,x)}},{name:"dai",url:"https://www.dailymotion.com/services/oembed",getEmbed:function(t,e,i){return T('src="https://geo.dailymotion.com/player.html?video='.concat(t,'" allow="fullscreen; picture-in-picture; web-share"'),e,i,"dailymotion")},getId:function(t){return M(t,y)}}],M=function(t,e){var i;return t.replace((0,r.resetRegex)(e),(function(t,e){return e&&e.length&&(i=e),t})),i},S=function(t,e){var i=(0,r.parseDOM)(t);if(!i)return t;var s=i.querySelectorAll("video"),o="".concat(e,"-video-wrapper");return s.forEach((function(t){t.classList.add(o)})),i.innerHTML},C=function(){return"".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))},T=function(t,e,i,s){return'<div class="'.concat(i,"-").concat(s,'-wrapper"><iframe id="').concat(e,'" class="').concat(i,'-video-wrapper" ').concat(t,' allowfullscreen frameborder="0"></iframe></div>')}},609:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.iconStartOver=e.iconInlineError=e.iconInlineLogo=e.iconInlineLaunch=e.iconThumbsUp=e.iconThumbsDown=e.iconSuccess=e.iconGenerating=e.iconCheck=e.iconZoom=e.iconWarn=e.iconVideo=e.iconTTSUnmute=e.iconTTSMute=e.iconShareMedia=e.iconShareLocation=e.iconShareFile=e.iconShareAudio=e.iconSend=e.iconSearch=e.iconRating=e.iconMic=e.iconLogo=e.iconLaunchButton=e.iconLanguage=e.iconKeyboard=e.iconImage=e.iconFile=e.iconExternalLink=e.iconExpandArrow=e.iconExpand=e.iconError=e.iconDownload=e.iconCollapse=e.iconClose=e.iconClearHistory=e.iconChevronPrevious=e.iconChevronNext=e.iconChevronDown=e.iconCaretDown=e.iconAudio=e.iconAttach=void 0;var i=R('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>');e.iconAttach=i;var s=R('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');e.iconAudio=s;var o=R('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>');e.iconCaretDown=o;var r=R('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>');e.iconChevronDown=r;var n=R('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>');e.iconChevronNext=n;var a=R('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>');e.iconChevronPrevious=a;var c=R('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>');e.iconClearHistory=c;var h=R('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>');e.iconClose=h;var l=R('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>');e.iconCollapse=l;var u=R('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>');e.iconDownload=u;var p=R('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>');e.iconError=p;e.iconExpand='<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M4.99935 9.99967C4.99935 10.9201 4.25316 11.6663 3.33268 11.6663C2.41221 11.6663 1.66602 10.9201 1.66602 9.99967C1.66602 9.0792 2.41221 8.33301 3.33268 8.33301C4.25316 8.33301 4.99935 9.0792 4.99935 9.99967Z" fill="#161513"/><path d="M11.666 9.99967C11.666 10.9201 10.9198 11.6663 9.99935 11.6663C9.07887 11.6663 8.33268 10.9201 8.33268 9.99967C8.33268 9.0792 9.07887 8.33301 9.99935 8.33301C10.9198 8.33301 11.666 9.0792 11.666 9.99967Z" fill="#161513"/><path d="M18.3327 9.99967C18.3327 10.9201 17.5865 11.6663 16.666 11.6663C15.7455 11.6663 14.9993 10.9201 14.9993 9.99967C14.9993 9.0792 15.7455 8.33301 16.666 8.33301C17.5865 8.33301 18.3327 9.0792 18.3327 9.99967Z" fill="#161513"/></svg';e.iconExpandArrow='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>';var d=R('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>');e.iconExternalLink=d;var g=R('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>');e.iconFile=g;var m=R('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>');e.iconImage=m;var f=R('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />');e.iconKeyboard=f;var b=R('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>');e.iconLanguage=b;e.iconLaunchButton='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>';var v=R('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>');e.iconLogo=v;var w=R('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>');e.iconMic=w;var x=R('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>');e.iconRating=x;var y=R('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>');e.iconSearch=y;var k=R('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>');e.iconSend=k;var _=R('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>');e.iconShareAudio=_;var z=R('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>');e.iconShareFile=z;var M=R('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>');e.iconShareLocation=M;var S=R('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>');e.iconShareMedia=S;var C=R('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>');e.iconSuccess=C;var T=R('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>');e.iconTTSMute=T;var $=R('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>');e.iconTTSUnmute=$;var I=R('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');e.iconVideo=I;var A=R('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>');e.iconWarn=A;var O=R('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>');e.iconZoom=O;var E=R('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>');e.iconCheck=E;var L=R('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>');e.iconGenerating=L;var P=R('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20");e.iconThumbsDown=P;var j=R('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20");e.iconThumbsUp=j;var F=R('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20");e.iconInlineLaunch=F;var V=R('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16");e.iconInlineLogo=V;var H=R('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16");e.iconInlineError=H;var D=R('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>');function R(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 '.concat(e||"24"," ").concat(e||"24",'">').concat(t,"</svg>")}e.iconStartOver=D},168:function(t,e,i){var s=this&&this.il||function(){return s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};Object.defineProperty(e,"Qh",{value:!0}),e.updatePosition=e.throttle=e.syncTTSLocaleIfUnavailable=e.setLinksOpenInNewWindow=e.setEmbeddedLinksHandler=e.setAttributes=e.sanitizeText=e.mergeTranslationStrings=e.matchStringIgnoreCase=e.isSVG=e.isInteger=e.isFeedbackComponent=e.isAnyVoiceAvailable=e.getShareText=e.getPopupContent=e.getFormShareText=e.getFooterFormComponent=e.getColor=e.getFieldInputValues=e.debounce=e.convertBreakTagsToNewLines=e.configureLocale=e.configureColorCustomization=e.addDefaultSettings=void 0;var o=i(396),r=i(517),n=i(476),a=i(819),c=i(720);e.isAnyVoiceAvailable=function(t,e){if(!e)return Promise.resolve(!1);if(Array.isArray(e)||(e=[e]),!e.length)return Promise.resolve(!1);var i=e.map((function(t){var e;return null===(e=t.lang)||void 0===e?void 0:e.toLowerCase()}));return t.getVoices().then((function(t){for(var e=!1,s=t.map((function(t){return t.lang.toLowerCase()})),o=0,r=i;o<r.length;o++){var n=r[o];if(s.indexOf(n)>=0){e=!0;break}}return e}))},e.getFooterFormComponent=function(t,e,i,s){var r=a.MessageComponentFactory.fromMessage(i,t,{messagePayload:{type:o.MessageType.Form,forms:[e]}},s);return r.onActionClick=s.onMessageActionClicked,r},e.getPopupContent=function(t,e,i,s){var r=t.createDiv(["wrapper","popup-content-wrapper","none"]),n=t.createDiv(["popup-dialog"]),c=a.MessageComponentFactory.fromMessage(i,t,{messagePayload:e});return c.onActionClick=function(e){(e.type!==o.ActionType.SubmitForm||c.validateForm())&&(t.addCSSClass(r,"none"),s(e))},n.appendChild(c.render()),r.appendChild(n),r.onclick=function(e){n.contains(e.target)||t.addCSSClass(r,"none")},r},e.isFeedbackComponent=function(t){return void 0!==t.ratingId};e.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};e.isSVG=function(t){var e=t.match(/<svg\s/gi);return e&&e.length>0};var h=/<br\s*\/?>/g;e.convertBreakTagsToNewLines=function(t){return t.replace(h,"\n")},e.matchStringIgnoreCase=function(t,e){return t.toLowerCase()===e.toLowerCase()};var l=[{match:/<([a-z])/gi,replace:function(t,e){return"&#x3c;".concat(e)}},{match:/<\/([a-z])/gi,replace:function(t,e){return"&#x3c;&#47;".concat(e)}}];e.sanitizeText=function(t){return l.forEach((function(e){t=t.replace((0,n.resetRegex)(e.match),e.replace)})),t},e.setEmbeddedLinksHandler=function t(e,i){for(var s=0;s<e.childElementCount;s++){var o=e.children[s];if("a"===o.tagName.toLowerCase()){var r=o;r.rel="noreferrer noopener",i.onclick&&(r.onclick=i.onclick.bind(r)),i.target&&(r.target=i.target)}o.hasChildNodes()&&t(o,i)}},e.setLinksOpenInNewWindow=function t(e){for(var i=function(i){var s=e.children[i];"a"===s.tagName.toLowerCase()&&(s.onclick=function(t){return window.open(s.href,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1}),s.hasChildNodes()&&t(s)},s=0;s<e.childElementCount;s++)i(s)};var u,p=(u=!1,function(t){var e;void 0===t&&(t={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:"",synthesisLocales:[]}),t.isReset&&(u=!1);var i=t.synthesisLocales;return Array.isArray(i)||(i=[]),t.hasRecognition&&t.hasSynthesis&&(null===(e=t.recognitionLocale)||void 0===e?void 0:e.length)&&(!u&&t.synthesisLocales.length||(u=!0,i=[{lang:t.recognitionLocale}])),i});function d(t,e){var i=t.toLowerCase();for(var s in e)if(i===s.toLowerCase())return!0;return!1}function g(t,e){var i=t.toLowerCase().split("-")[0];for(var s in e)if(i===s.toLowerCase())return!0;return!1}function m(t,e){var i=[t.toLowerCase()],s="en";(i=i.concat((0,r.getLocales)())).indexOf(s)<0&&i.push(s);for(var o=0,n=i;o<n.length;o++){var a=n[o];if(d(a,e)){s=a;break}if(g(a,e)){s=a.split("-")[0];break}}return s}function f(t,e){void 0===e&&(e=!1);var i=t.title?"".concat(t.title," - "):"";return(0,o.isFormEntityWithFields)(t)?t.fields.forEach((function(t){i+=t.value?"".concat(t.value," - "):""})):t.formRows.forEach((function(t){t.columns.forEach((function(t){t.fields.forEach((function(t){(0,o.isReadOnlyField)(t)&&(i+=t.value?"".concat(t.value," - "):"")}))}))})),e?x(i):i}e.syncTTSLocaleIfUnavailable=p,e.configureLocale=m,e.debounce=function(t,e){var i;return function(){var s=this,o=arguments;clearTimeout(i),i=setTimeout((function(){i=null,t.apply(s,o)}),e)}},e.throttle=function(t,e){var i=!1;return function(){i||(t.apply(this,arguments),i=!0,setTimeout((function(){i=!1}),e))}},e.getColor=function(t,e){var i=document.querySelector(".".concat(e,"-wrapper"));return getComputedStyle(i).getPropertyValue(t)},e.getShareText=function(t){var e="";switch(t.type){case o.MessageType.Card:return t.cards.forEach((function(t){var i;e+="".concat((t.title?"".concat(t.title," - "):"")+(t.description?"".concat(t.description," - "):"")+(null!==(i=t.url)&&void 0!==i?i:""),"\n")})),e;case o.MessageType.Text:return t.text;case o.MessageType.Attachment:return t.attachment.url;case o.MessageType.Location:var i=t.location;return"".concat(i.title?"".concat(i.title," - "):"").concat(i.latitude,", ").concat(i.longitude);case o.MessageType.Table:t.rows.forEach((function(t){t.fields.forEach((function(t){e+=t.value?"".concat(t.value," - "):""}))}));break;case o.MessageType.Form:t.forms.forEach((function(t){var i=f(t);e+=i?"".concat(i," - "):""}));break;case o.MessageType.EditForm:var s=t;e=s.title?"".concat(s.title," - "):"",(0,o.isEditFormPayloadWithFields)(s)?s.fields.forEach((function(t){(0,o.isReadOnlyField)(t)?e+=t.value?"".concat(t.value," - "):"":e+=t.label?"".concat(t.label," - "):""})):s.formRows.forEach((function(t){t.columns.forEach((function(t){t.fields.forEach((function(t){(0,o.isReadOnlyField)(t)?e+=t.value?"".concat(t.value," - "):"":e+=t.label?"".concat(t.label," - "):""}))}))}));break;case o.MessageType.TableForm:var r=t;r.rows.forEach((function(t,i){t.fields.forEach((function(t){e+=t.value?"".concat(t.value," - "):""})),e+=f(r.forms[i])}))}return x(e)},e.getFormShareText=f,e.configureColorCustomization=function(t,e){if(t){var i=s({},t);["headerBackground","visualizer","ratingStarFill"].forEach((function(e){i[e]=t[e]||t.branding})),["botText","userText"].forEach((function(e){i[e]=t[e]||t.text})),Object.keys(i).forEach((function(t){var s=i[t];if(s)if("shareMenuText"===t)e.updateCSSVar("--color-popup-button-text",s);else{var o="--color-".concat(t.replace(/([A-Z&])/g,"-$1").toLowerCase());e.updateCSSVar(o,s)}}))}},e.getFieldInputValues=function(t){var e={};return t&&Object.keys(t).forEach((function(i){var s;e[i]=null===(s=document.getElementById(t[i]))||void 0===s?void 0:s.value})),e},e.updatePosition=function(t,e){e.updateCSSVar("--position-top",t.top||"unset"),e.updateCSSVar("--position-left",t.left||"unset"),e.updateCSSVar("--position-right",t.right||"unset"),e.updateCSSVar("--position-bottom",t.bottom||"unset"),t.bottom&&e.updateCSSVar("--widget-max-height","calc(100vh - 60px - ".concat(t.bottom,")"))};var b={avatarAgent:"agentAvatar",avatarBot:"botIcon",avatarUser:"personIcon",fileAudio:"audioIcon",fileImage:"imageIcon",fileGeneric:"fileIcon",fileVideo:"videoIcon",clearHistory:"clearMessageIcon",close:void 0,collapse:"closeIcon",download:"downloadIcon",error:"errorIcon",expandImage:"expandImageIcon",keyboard:"keyboardIcon",logo:"logoIcon",launch:"botButtonIcon",mic:"micIcon",rating:void 0,send:"sendIcon",shareMenu:"attachmentIcon",shareMenuAudio:void 0,shareMenuFile:void 0,shareMenuLocation:void 0,shareMenuVisual:void 0,ttsOff:"audioResponseOffIcon",ttsOn:"audioResponseOnIcon",typingIndicator:"chatBubbleIcon"};function v(t){for(var e={},i=0,s=Object.keys(t);i<s.length;i++){var o=s[i];e[o.toLowerCase()]=t[o]}return e}function w(t,e){t=v(t),e=v(e);var i=new Set;Object.keys(t).forEach((function(t){i.add(t)})),Object.keys(e).forEach((function(t){i.add(t)}));var o={};return i.forEach((function(i){o[i]=s(s(s({},t.en),t[i]),e[i])})),o}function x(t){return t.length?t.slice(0,t.length-3):t}e.mergeTranslationStrings=w,e.addDefaultSettings=function(t){var e=s(s({},c.defaultSettings),t);if(t.i18n&&Object.keys(t.i18n).length&&(e.i18n=w(c.defaultSettings.i18n,t.i18n)),e.colors=s(s({},c.defaultSettings.colors),t.colors),e.userId=t.userId||"user".concat(Math.floor(1e4+9e4*Math.random())).concat(Date.now()%1e5),e.icons=function(t){var e=t.icons||{};for(var i in b){var s=i,o=b[s];o in t&&(e[s]=t[o])}return e}(e),e.locale=m(e.locale,e.i18n),t.typingStatusInterval&&t.typingStatusInterval<c.defaultSettings.typingStatusInterval&&(e.typingStatusInterval=c.defaultSettings.typingStatusInterval),e.enableVoiceOnlyMode&&(e.enableBotAudioResponse=!0,e.initBotAudioMuted=!1,e.enableSpeech=!0),!e.position){var i="rtl"===window.getComputedStyle(document.body).direction;e.position=i?{left:"20px",bottom:"20px"}:{right:"20px",bottom:"20px"}}return e},e.setAttributes=function(t,e){for(var i=0,s=Object.entries(e);i<s.length;i++){var o=s[i],r=o[0],n=o[1];t.setAttribute(r,n)}}},517:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.isStorageAvailable=e.getLocales=e.getBrowserLocale=void 0;e.getBrowserLocale=function(){return navigator.language.toLowerCase()};e.getLocales=function(){var t;return(null===(t=navigator.languages)||void 0===t?void 0:t.map((function(t){return t.toLowerCase()})))||[]};e.isStorageAvailable=function(t){return i(t)};var i=function(t){var e;try{e=window[t];var i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}},820:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.ActionComponentFactory=void 0;var s=i(396),o=i(480),r=i(81),n=i(600),a=i(887),c=i(103),h=i(161),l=i(817),u=i(291),p=i(25),d=function(){function t(){}return t.fromActionPayload=function(e,i,u,d,g){switch(e.type){case s.ActionType.Postback:return new a.PostbackActionComponent(i,e);case s.ActionType.Url:return new l.UrlActionComponent(i,e,u.openLinksInNewWindow,u.linkHandler);case s.ActionType.Webview:return new l.UrlActionComponent(i,e,u.openLinksInNewWindow,g.webviewLinkHandler);case s.ActionType.Location:return new r.LocationActionComponent(i,e);case s.ActionType.Call:return new o.CallActionComponent(i,e);case s.ActionType.Share:return new c.ShareActionComponent(i,e,d);case s.ActionType.SubmitForm:return new h.SubmitFormActionComponent(i,e);case s.ActionType.Popup:return new n.PopupActionComponent(i,e,u,g.onMessageActionClicked);case s.ActionType.Client:return new p.ClientActionComponent(i,e,d);default:return t.logger.error("Payload contains wrong action type:".concat(e.type)),null}},t.logger=new u.Logger("ActionComponentFactory"),t}();e.ActionComponentFactory=d},819:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.MessageComponentFactory=void 0;var s=i(776),o=i(512),r=i(346),n=i(398),a=i(913),c=i(858),h=i(65),l=i(774),u=i(462),p=i(158),d=i(643),g=i(865),m=i(396),f=i(305),b=function(){function t(){}return t.fromMessage=function(t,e,i,b){var v,w;(0,f.isBotMessage)(i)?(v=n.MESSAGE_SIDE.LEFT,w=i.source||m.SkillMessageSource.Bot):v=n.MESSAGE_SIDE.RIGHT;var x=i.messagePayload;switch(x.type){case m.MessageType.Postback:case m.MessageType.Text:return x.channelExtensions&&"stars"===x.channelExtensions.displayType?new l.FeedbackComponent(t,e,x,v,w,b):new c.TextMessageComponent(t,e,x,v,w,b);case m.MessageType.TextStream:return new h.TextStreamMessageComponent(t,e,x,v,w,b);case m.MessageType.Attachment:return new s.AttachmentMessageComponent(t,e,x,v,w,b);case m.MessageType.Card:return new o.CardMessageComponent(t,e,x,v,w,b);case m.MessageType.Location:return new r.LocationMessageComponent(t,e,x,v,w,b);case m.MessageType.Table:return new g.TableMessageComponent(t,e,x,v,w,b);case m.MessageType.Form:return new p.FormMessageComponent(t,e,x,v,w,b);case m.MessageType.TableForm:return new d.TableFormMessageComponent(t,e,x,v,w,b);case m.MessageType.EditForm:return new u.EditFormMessageComponent(t,e,x,v,w,b);case m.MessageType.Raw:return new a.RawMessageComponent(t,e,x,v,w,b);default:throw Error("Wrong message payload type:".concat(x.type))}},t}();e.MessageComponentFactory=b},291:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.Logger=void 0;var i={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},s=function(){function t(t){this.Ze=t}return t.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.Ge(t.LOG_LEVEL.DEBUG,e)},t.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.Ge(t.LOG_LEVEL.ERROR,e)},t.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.Ge(t.LOG_LEVEL.INFO,e)},t.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.Ge(t.LOG_LEVEL.WARN,e)},t.prototype.Ge=function(e,i){if(t.logLevel>=e){i.unshift("[".concat(t.appName,".").concat(t.appVersion,".").concat(this.Ze,"]"));var s=void 0;switch(e){case t.LOG_LEVEL.ERROR:s=console.error;break;case t.LOG_LEVEL.WARN:s=console.warn;break;case t.LOG_LEVEL.INFO:s=console.info;break;case t.LOG_LEVEL.DEBUG:s=console.debug}s.apply(console,i)}},t.LOG_LEVEL=i,t.logLevel=t.LOG_LEVEL.NONE,t}();e.Logger=s},305:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.getMessageDigest=e.isBotMessage=void 0,e.isBotMessage=function(t){return!!t.source},e.getMessageDigest=function(t){if(t.msgId)return t.msgId;var e=JSON.stringify(t.messagePayload);return"".concat(i(e))};var i=function(t){for(var e=0,i=0,s=Math.pow(9,9);e<t.length;)i=Math.imul(i^t.charCodeAt(e++),s);return i^i>>>9}},75:function(t,e){Object.defineProperty(e,"Qh",{value:!0}),e.WidgetTheme=e.StorageType=e.ShareCategory=void 0;e.StorageType={SESSION:"sessionStorage",LOCAL:"localStorage",CUSTOM:"custom"};e.WidgetTheme={CLASSIC:"classic",DEFAULT:"default",REDWOOD_DARK:"redwood-dark"};e.ShareCategory={AUDIO:"audio",FILE:"file",LOCATION:"location",VISUAL:"visual"}},777:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.ActionComponent=void 0;var s=i(549),o=i(396),r=function(){function t(t,e){var i,s;this.util=t,this.Te=!1,this.$e=e.type,this.Ie=e.label,this.Ae=e.imageUrl,this.Oe=e.style,this.Ee=e.tooltip,this.Le=e.displayType,this.Pe=null===(i=e.channelExtensions)||void 0===i?void 0:i.activeImageUrl,this.je=null===(s=e.channelExtensions)||void 0===s?void 0:s.c2kText,this.$e!==o.ActionType.SubmitForm||this.Oe||(this.Oe=o.ActionStyle.Primary)}return t.prototype.render=function(){var t=this,e=this.util,i=e.createButton(["action-postback",this.Oe===o.ActionStyle.Primary?"primary":this.Oe===o.ActionStyle.Danger?"danger":""]);if(this.Le===o.ActionDisplayType.Icon&&e.addCSSClass(i,o.ActionDisplayType.Icon),i.onclick=this.handleOnClick.bind(this),this.Ae&&i.appendChild(e.createImage(this.Ae,["action-image"],this.Ie||"")),this.Ie){var r=(0,s.linkify)(this.Ie,e.cssPrefix),n=e.createTextDiv();if(this.Le===o.ActionDisplayType.Link){var a=e.createAnchor("",r);a.onclick=function(t){return t.preventDefault()},n.appendChild(a),e.addCSSClass(i,"display-link")}else this.je?(n.innerHTML=String.fromCharCode(parseInt(this.Ie)+10111),e.addCSSClass(i,"c2k-action"),i.addEventListener("mouseover",(function(){n.innerHTML=String.fromCharCode(parseInt(t.Ie)+10121);for(var i=0,s=Array.from(document.getElementsByClassName(t.je));i<s.length;i++){var o=s[i];e.addCSSClass(o,"highlight")}})),i.addEventListener("mouseleave",(function(){n.innerHTML=String.fromCharCode(parseInt(t.Ie)+10111);for(var i=0,s=Array.from(document.getElementsByClassName(t.je));i<s.length;i++){var o=s[i];e.removeCSSClass(o,"highlight")}}))):n.innerHTML=r;i.appendChild(n)}if(this.Te&&e.addCSSClass(i,"disabled"),this.Ee){var c=e.createDiv(["action-wrapper"]),h=e.createDiv(),l=e.createTextDiv(["tooltip","none"]);return l.innerText=this.Ee,l.setAttribute("role","tooltip"),h.appendChild(l),c.appendChild(i),c.appendChild(h),c}return this.Fe=i,i},t.prototype.handleOnClick=function(t){if(this.onActionClick&&!this.Te){var e={getPayload:this.getEventPayload.bind(this),label:this.Ie,imageUrl:this.Pe||this.Ae,type:this.$e};this.Pe&&this.Fe.lastElementChild.replaceWith(this.util.createImage(this.Pe,["action-image"],this.Ie||"")),this.onActionClick(e)}this.$e!==o.ActionType.Postback&&this.$e!==o.ActionType.Location&&this.$e!==o.ActionType.Share||(t.preventDefault(),t.stopPropagation())},t.prototype.disable=function(){this.Te=!0,this.Fe&&(this.util.addCSSClass(this.Fe,"disabled"),this.Fe.disabled=!0)},t.prototype.enable=function(){this.Te=!1,this.Fe&&(this.util.removeCSSClass(this.Fe,"disabled"),this.Fe.disabled=!1)},t.prototype.getActionType=function(){return this.$e},t}();e.ActionComponent=r},480:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.CallActionComponent=void 0;var r=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.Ve=i.phoneNumber,s}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);"button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-call"):e.addCSSClass(i.firstElementChild,"action-call");var s=e.createAnchor("tel:".concat(this.Ve),"");return this.onActionClick=function(){s.click()},i},e.prototype.getEventPayload=function(){return Promise.resolve(this.Ve)},e}(i(777).ActionComponent);e.CallActionComponent=r},25:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.ClientActionComponent=void 0;var r=i(396),n=function(t){function e(e,i,s){var o=t.call(this,e,i)||this;return o.qe=i,o.Ue=s,o}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);return"button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-client"):e.addCSSClass(i.firstElementChild,"action-client"),i},e.prototype.getEventPayload=function(){return this.qe.actionType===r.ClientActionType.COPY_MESSAGE_TEXT?Promise.resolve(this.Ue):Promise.resolve(this.qe)},e}(i(777).ActionComponent);e.ClientActionComponent=n},81:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.LocationActionComponent=void 0;var r=i(396),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);return"button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-location"):e.addCSSClass(i.firstElementChild,"action-location"),i},e.prototype.getEventPayload=function(){return(0,r.getCurrentPosition)()},e}(i(777).ActionComponent);e.LocationActionComponent=n},600:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.PopupActionComponent=void 0;var r=i(777),n=i(168),a=function(t){function e(e,i,s,o){var r=t.call(this,e,i)||this;return r.He=s,r.De=o,r.Re=i.popupContent,r}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);"button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-popup"):e.addCSSClass(i.firstElementChild,"action-popup");var s=(0,n.getPopupContent)(e,this.Re,this.He,this.De);return document.body.appendChild(s),this.onActionClick=function(){e.removeCSSClass(s,"none")},i},e.prototype.getEventPayload=function(){return Promise.resolve(this.Re)},e}(r.ActionComponent);e.PopupActionComponent=a},887:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.PostbackActionComponent=void 0;var r=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.Ne=i.postback,s}return o(e,t),e.prototype.getEventPayload=function(){return Promise.resolve(this.Ne)},e}(i(777).ActionComponent);e.PostbackActionComponent=r},103:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.ShareActionComponent=void 0;var r=function(t){function e(e,i,s){var o=t.call(this,e,i)||this;return o.Ue=s,o}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);return"button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-share"):e.addCSSClass(i.firstElementChild,"action-share"),i},e.prototype.getEventPayload=function(){return Promise.resolve(this.Ue)},e}(i(777).ActionComponent);e.ShareActionComponent=r},161:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.SubmitFormActionComponent=void 0;var r=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.Ne=i.postback,s}return o(e,t),e.prototype.getEventPayload=function(){return Promise.resolve(this.Ne)},e}(i(777).ActionComponent);e.SubmitFormActionComponent=r},817:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.UrlActionComponent=void 0;var r=function(t){function e(e,i,s,o){void 0===s&&(s=!1);var r=t.call(this,e,i)||this;return r.Be=s,r.We=o,r.P=i.url,r}return o(e,t),e.prototype.render=function(){var e=this.util,i=t.prototype.render.call(this);if("button"===i.tagName.toLowerCase()?e.addCSSClass(i,"action-url"):e.addCSSClass(i.firstElementChild,"action-url"),this.P){var s=e.createAnchor(this.P,"",[],this.Be,this.We);i.onclick=function(){s.click()}}return i},e.prototype.getEventPayload=function(){return Promise.resolve(this.P)},e}(i(777).ActionComponent);e.UrlActionComponent=r},776:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.AttachmentMessageComponent=void 0;var r=i(72),n=i(212),a=i(717),c=i(495),h=i(398),l=i(396),u=function(t){function e(i,s,o,r,n,a){var c=t.call(this,i,s,o,r,n,a)||this;return c.ei=e.fromPayload(i,s,o.attachment,r,a,c.hasActions()),c}return o(e,t),e.fromPayload=function(t,e,i,s,o,h){if(void 0===h&&(h=!1),o&&o.authToken&&o.uri&&i.url.indexOf(o.uri)>=0&&!this.ti.test(i.url)){var u=null==o?void 0:o.authToken;(null==u?void 0:u.length)&&(i.url="".concat(i.url,"?token=").concat(u))}switch(i.type){case l.AttachmentType.Image:return new a.ImageAttachmentComponent(t,e,i,s,h);case l.AttachmentType.Video:return new c.VideoAttachmentComponent(t,e,i,s,h);case l.AttachmentType.Audio:return new r.AudioAttachmentComponent(t,e,i,s,h);case l.AttachmentType.File:return new n.FileAttachmentComponent(t,e,i,s,h);default:throw Error("Payload contains wrong attachment type")}},e.prototype.getContent=function(){return t.prototype.getContent.call(this,this.ei.render())},e.ti=/token=[a-z\.\d]+/i,e}(h.MessageComponent);e.AttachmentMessageComponent=u},61:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.AttachmentComponent=void 0;var s=i(609),o=i(398),r=i(396),n=i(8),a=function(){function t(t,e,i,s,o){this.settings=t,this.util=e,this.side=s,this.Je=o,this.P=i.url,this.$e=i.type;var r=i.url.split("/");this.Ke=i.title||decodeURI(r[r.length-1]),this.Xe=i.filename}return t.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.Qe=function(t,e){var i=this.util,o=this.settings,r=i.createElement("a",[],!0),n=i.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:o.icons.download||s.iconDownload,iconCss:["attachment-download-icon"],title:o.i18n[o.locale].download});return r.setAttribute("href",t),r.setAttribute("download",e||""),r.setAttribute("target","_blank"),r.appendChild(n),r},t.prototype.createAttachment=function(t,e){var i=this,a=this.util,c=this.settings,h=a.createDiv(["attachment"]),l=a.createDiv(["attachment-placeholder","flex"]),u=a.createDiv(["attachment-icon"]),p=a.createImageIcon({icon:t});u.appendChild(p);var d=this.Ke,g=a.createDiv(["attachment-footer","flex",this.Je&&"with-actions"]),m=a.createLabel(["attachment-title"]),f=a.createDiv(["attachment-controls","flex"]);if(m.innerText=d,m.setAttribute("title",d),g.appendChild(m),this.$e===r.AttachmentType.Image){var b=a.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:c.icons.expandImage||s.iconZoom,iconCss:["attachment-expand-icon"],title:c.i18n[c.locale].imageViewerOpen});b.onclick=function(){i.createImagePreview(i.P,d)},f.appendChild(b)}if(this.side===o.MESSAGE_SIDE.LEFT&&f.appendChild(this.Qe(this.P,this.Xe)),e)switch(l.appendChild(e),e.onerror=function(){e.remove(),l.appendChild(u)},this.$e){case r.AttachmentType.Image:e.onload=function(){e.clientHeight>n.ATTACHMENT_MAX_HEIGHT&&(l.style.alignItems="flex-start"),g.appendChild(f)},e.onclick=function(){i.createImagePreview(i.P,i.Ke)};break;case r.AttachmentType.Audio:case r.AttachmentType.Video:e.onloadeddata=function(){g.appendChild(f)}}else l.appendChild(u),g.appendChild(f);return h.appendChild(l),null==h||h.appendChild(g),h},t.prototype.createImagePreview=function(t,e){var i=this.util,o="image-preview",r=this.settings,n=i.createDiv(["".concat(o,"-wrapper")]),a=i.createImage(t,[o]),c=i.createLabel(["".concat(o,"-title")]);c.innerText=e;var h=document.querySelector(".".concat(this.settings.name,"-wrapper")),l=r.icons.close||s.iconClose,u=i.createIconButton({css:["".concat(o,"-close")],icon:l,iconCss:["".concat(o,"-close-icon")],title:r.i18n[r.locale].imageViewerClose});u.onclick=function(){n.remove()},u.onkeydown=function(t){"Tab"===t.code&&(n.focus(),t.preventDefault())};var p=i.createDiv(["".concat(o,"-header")]);p.appendChild(c),p.appendChild(u),n.appendChild(p),n.appendChild(a),n.setAttribute("tabindex","-1"),n.onkeydown=function(t){"Escape"===t.code&&n.remove()},h.appendChild(n),n.focus()},t}();e.AttachmentComponent=a},72:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.AudioAttachmentComponent=void 0;var r=i(609),n=i(168),a=i(398),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.util,e=this.settings,i=e.icons.fileAudio||r.iconAudio,s=t.createMedia("video",this.P,["attachment-audio"]);s.controls=!0,s.preload="metadata",a.MESSAGE_SIDE.RIGHT===this.side&&s.setAttribute("controlsList","nodownload");var o='<a href="'.concat(this.P,'">'),c=e.i18n[e.locale].attachmentAudioFallback.replace("{0}",o).replace("{/0}","</a>");return s.innerHTML=c,e.linkHandler?(0,n.setEmbeddedLinksHandler)(s,e.linkHandler):e.openLinksInNewWindow&&(0,n.setLinksOpenInNewWindow)(s),this.createAttachment(i,s)},e}(i(61).AttachmentComponent);e.AudioAttachmentComponent=c},212:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.FileAttachmentComponent=void 0;var r=i(609),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.settings.icons.fileGeneric||r.iconFile;return this.createAttachment(t)},e}(i(61).AttachmentComponent);e.FileAttachmentComponent=n},717:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.ImageAttachmentComponent=void 0;var r=i(61),n=i(609),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.util,e=this.settings.icons.fileImage||n.iconImage,i=t.createImage(this.P,["attachment-image"],this.Ke);return this.createAttachment(e,i)},e}(r.AttachmentComponent);e.ImageAttachmentComponent=a},495:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.VideoAttachmentComponent=void 0;var r=i(549),n=i(609),a=i(168),c=i(398),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.util,e=this.settings,i=this.P,s=e.icons.fileVideo||n.iconVideo,o=(0,r.getEmbeddedVideo)(i,t.cssPrefix);if(o){var h=t.createElement("span");return h.innerHTML=o,h}var l=t.createMedia("video",this.P,["attachment-video"]);l.controls=!0,l.preload="metadata",c.MESSAGE_SIDE.RIGHT===this.side&&l.setAttribute("controlsList","nodownload");var u='<a href="'.concat(this.P,'">'),p=e.i18n[e.locale].attachmentVideoFallback.replace("{0}",u).replace("{/0}","</a>");return l.innerHTML=p,this.settings.linkHandler?(0,a.setEmbeddedLinksHandler)(l,e.linkHandler):this.settings.openLinksInNewWindow&&(0,a.setLinksOpenInNewWindow)(l),this.createAttachment(s,l)},e}(i(61).AttachmentComponent);e.VideoAttachmentComponent=h},548:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.C2SQLBaseMessageComponent=void 0;var r=i(398),n=i(396),a=i(752),c=function(t){function e(e,i,s,o,r,n){var a=t.call(this,e,i,s,o,r,n)||this;return a.si=[],a.cssPrefix=e.name,a.te=n,a.qe=s,a}return o(e,t),e.prototype.disableActions=function(){t.prototype.disableActions.call(this),this.si.forEach((function(t){t.disable()}))},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),(0,a.getPostActions)(this.si).forEach((function(t){t.disable()}))},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),this.si.forEach((function(t){t.enable()}))},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),(0,a.getPostActions)(this.si).forEach((function(t){t.enable()}))},e.prototype.render=function(){return t.prototype.render.call(this)},e.prototype.getHeader=function(){var e=this.util,i=t.prototype.getHeader.call(this);return e.addCSSClass(i,"message-header-yellow"),i},e.prototype.getContent=function(t){var e=this.util,i="message-bubble",s=this.qe.type,o=e.createDiv([i]);s===n.MessageType.Table||s===n.MessageType.TableForm?e.addCSSClass(o,"".concat(i,"-tabular-message")):e.addCSSClass(o,"".concat(i,"-form-message"),s===n.MessageType.EditForm?"edit-form-message":""),t&&o.appendChild(t);var r=this.getPageStatus();return r&&o.appendChild(r),o},e.prototype.getPageStatus=function(){var t,e=this.util,i=this.qe.paginationInfo;return i&&i.totalCount>i.rangeSize&&((t=e.createTextDiv(["results-page-status"])).innerText=i.status),t},e}(r.MessageComponent);e.C2SQLBaseMessageComponent=c},462:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.il||function(){return r=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"Qh",{value:!0}),e.EditFormMessageComponent=void 0;var n=i(396),a=i(609),c=i(8),h=i(548),l=i(476),u=i(291),p=i(955),d=i(158),g="aria-expanded",m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Vi=0,e.Hi=0,e.Di=[],e.Ri=new u.Logger("EditFormMessageComponent"),e.Ni={},e}return o(e,t),e.prototype.disableActions=function(){t.prototype.disableActions.call(this),f(this.Ui,this.Di,this.util)},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),f(this.Ui,this.Di,this.util)},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),f(this.Ui,this.Di,this.util,!1)},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),f(this.Ui,this.Di,this.util,!1)},e.prototype.getContent=function(){var e=this,i=this.qe,s=this.settings,o=this.util,r="form-message",a="".concat(r,"-item"),c=o.createDiv([r]),h=o.createDiv([a]);if(i.title){var l=o.createTextDiv(["".concat(r,"-header")]);l.innerText=i.title,c.appendChild(l)}return(0,n.isEditFormPayloadWithFields)(i)?(i.formColumns>2&&(i.formColumns=2),i.fields.filter((function(t){return t})).forEach((function(t){h.appendChild(e.Bi(t,r,!1,i.formColumns))}))):i.formRows.forEach((function(t){var i=(0,d.getFormRow)(t,e.si,o,s,e.shareText,e.handleOnActionClick.bind(e),e.options),n=t.columns.length;t.columns.forEach((function(t){var s=(0,d.getFormRowColumn)(t,o);t.fields.filter((function(t){return t})).forEach((function(i){s.appendChild(e.Bi(i,r,!0)),(0,d.setMaxColumnWidth)(t.width,i.displayType,s,n)})),i.appendChild(s)})),h.appendChild(i)})),this.actions.concat(this.si).some((function(t){return t.getActionType()===n.ActionType.SubmitForm}))||this.Ri.error("Payload does not contain submit-form action"),this.Wi(h,i.errorMessage||(this.Hi&&this.Vi>1?this.translations.editFormErrorMessage:""),!0),c.appendChild(h),this.Zi=h,t.prototype.getContent.call(this,c)},e.prototype.validateForm=function(){var t,e=this,i=!0;return null===(t=this.Ui)||void 0===t||t.remove(),this.Di.forEach((function(t){i=e.Gi(t)&&i})),!i&&this.Vi>1&&this.Wi(this.Zi,this.translations.editFormErrorMessage,!0),i},e.prototype.getSubmittedFields=function(){var t=this;return this.Di.filter((function(e){var i=e.tagName.toLowerCase();return"textarea"===i&&(t.Ni[e.id]=e.value),"input"===i})).forEach((function(e){var i=e;switch(i.type){case"checkbox":t.Ni[i.id]=i.checked?i.getAttribute("valueOn"):i.getAttribute("valueOff");break;case"number":t.Ni[i.id]=i.valueAsNumber;break;default:t.Ni[i.id]=i.value}})),this.Ni},e.prototype.Bi=function(t,e,i,s){var o=this.shareText,r=this.util;if(this.Vi++,(0,n.isReadOnlyField)(t)){var a=new p.FieldComponent(this.settings,r,t,o,this.options,s);return a.isColumnField=i,a.onActionClick=this.handleOnActionClick.bind(this),a.action&&this.si.push(a.action),a.render()}return i?(0,p.applyMarginTop)(this.qi(t,s,e,r),t.marginTop,r):this.qi(t,s,e,r)},e.prototype.qi=function(t,e,i,s){var o,r,c,h,u,d,m,f=this,b="".concat(i,"-field"),v=[b,"".concat(b,"-col-").concat(e),"edit-".concat(b)],w=s.createDiv(v),x=s.createDiv(["".concat(i,"-key"),"with-margin"]),y=t.labelFontSize,k=t.labelFontWeight,_=t.id,z=t.displayType,M=t.placeholder,S=t.required,C=t.clientErrorMessage,T=t.serverErrorMessage,$=t.autoSubmit;switch(x.innerHTML=t.label||"",(0,p.applyFontStyles)(x,y,k,s),w.appendChild(x),z){case n.DisplayType.SingleSelect:var I=t;if(d=I.defaultValue,m=I.layoutStyle,d&&(this.Ni[_]=d),m&&"list"!==m)if("radioGroup"===m){var A=s.createElement("form",["".concat(i,"-value"),"form-container","col"]);s.setAttributes(A,{id:_,ariaLabel:z,errorMsg:C}),A.onclick=function(t){return t.stopPropagation()},I.options.forEach((function(t){var e=s.createInputElement({type:"radio",name:_,value:t.label,required:S,checked:t.value===d},["radio-input"]);e.onchange=function(){e.checked&&(f.Ni[_]=t.value),f.Yi(_,$,A)};var i=s.createLabel();i.innerText=t.label,i.prepend(e),A.appendChild(i)})),this.Di.push(A),w.appendChild(A),this.Wi(A,T)}else this.Ri.error("Payload contains wrong layout style:".concat(m," for single select field"));else{var O,E=s.createDiv(["select-wrapper","".concat(i,"-value")]),L=s.createInputElement({type:"text",placeholder:M,required:S,id:_,autocomplete:"off"},["".concat(i,"-value")]),P=s.createDiv(),j=s.createDiv(["listbox","popup","none"]),F=s.createElement("ul",["single-select-list"]),V=F.getElementsByTagName("li"),H=s.createIconButton({css:["select-icon"],icon:a.iconCaretDown,iconCss:[],title:""}),D=function(t){"true"!==E.getAttribute(g)||P.contains(t.target)||(O||(L.value=""),N(!1))},R=function(){"false"===E.getAttribute(g)&&(E.setAttribute(g,"true"),s.removeCSSClass(j,"none"),setTimeout((function(){return document.addEventListener("click",D)})),L.focus())},N=function(t){void 0===t&&(t=!0),"true"===E.getAttribute(g)&&(O&&(L.value=O.textContent||O.innerText),E.setAttribute(g,"false"),s.addCSSClass(j,"none"),document.removeEventListener("click",D),f.Ji("",V,U),t&&L.focus())},U=[];s.setAttributes(E,{errorMsg:C}),E.setAttribute(g,"false"),E.setAttribute("aria-label",z),E.onclick=function(t){t.stopPropagation(),R()},E.oninput=function(){f.Ji(L.value,V,U)?R():N()},E.onkeydown=function(t){var e,i=t.key;i===l.KeyCode.Down||i===l.KeyCode.Up?!O||O.classList.contains("".concat(f.cssPrefix,"-none"))?null===(e=U[0])||void 0===e||e.focus():null==O||O.focus():i!==l.KeyCode.Esc&&i!==l.KeyCode.Tab||N()},L.onfocus=function(){return s.addCSSClass(E,"focused")},L.onblur=function(){return s.removeCSSClass(E,"focused")},H.onclick=function(t){t.stopPropagation(),"true"===E.getAttribute(g)?N():R()},null===(o=I.options)||void 0===o||o.forEach((function(t){var e=s.createListItem(t.label,t.label,t.label,"","",(function(){s.addCSSClass(e,"selected"),O&&s.removeCSSClass(O,"selected"),O=e,N(),f.Ni[_]=t.value,f.Yi(_,$,E)}),!1,!1);e.onkeydown=function(t){return f.Ki(t,e,F,L,U)},t.value===d&&(s.addCSSClass(e,"selected"),O=e,L.value=t.label),F.appendChild(e)})),U=Array.from(V),P.onclick=function(t){return t.stopPropagation()},E.appendChild(L),E.appendChild(H),j.appendChild(F),P.appendChild(j),w.appendChild(E),w.appendChild(P),this.Di.push(E),this.Wi(L,T)}break;case n.DisplayType.MultiSelect:var B=t;if(d=B.defaultValue,m=B.layoutStyle,this.Ni[_]=d||[],m&&"list"!==m)if("checkboxes"===m){var W=s.createElement("form",["".concat(i,"-value"),"form-container","col"]);s.setAttributes(W,{id:_,ariaLabel:z,errorMsg:C,ariaRequired:S?"true":""}),W.onclick=function(t){return t.stopPropagation()},B.options.forEach((function(t){var e=s.createInputElement({type:"checkbox",name:_,value:t.label,checked:null==d?void 0:d.includes(t.value),required:S},["radio-input"]),i=s.createLabel();i.innerText=t.label,i.prepend(e),e.onchange=function(){if(e.checked)f.Ni[_].push(t.value);else{var i=f.Ni[_];i.splice(i.indexOf(t.value),1)}f.Yi(_,$,W)},W.appendChild(i)})),this.Di.push(W),w.appendChild(W),this.Wi(W,T)}else this.Ri.error("Payload contains wrong layout style:".concat(m," for multi select field"));else{var Z=s.createDiv(["".concat(i,"-value"),"text-field-container"]),G=s.createElement("ul",["selected-options"]),q=s.createDiv(),Y=s.createDiv(["listbox","popup","none"]),J=[],K=s.createDiv(["filter-message-box"]),X=s.createDiv(["filter-message-text","none"]),Q=s.createInputElement({type:"text"},["".concat(i,"-value"),"listbox-search","none"]),tt=s.createElement("ul",["multi-select-list"]),et=tt.getElementsByTagName("li"),it=s.createDiv(["search-icon-wrapper","none"]),st=s.createImageIcon({icon:a.iconSearch,iconCss:["search-icon"]});X.textContent=this.translations.noResultText,K.appendChild(X),Q.oninput=function(){return f.Ji(Q.value,et,J)?s.addCSSClass(X,"none"):s.removeCSSClass(X,"none")},Q.onkeydown=function(t){var e,i=t.key;i===l.KeyCode.Down?(f.Ji(Q.value,et,J),null===(e=J[0])||void 0===e||e.focus()):i!==l.KeyCode.Esc&&i!==l.KeyCode.Tab||Z.click()},M&&G.setAttribute("data-placeholder",M),Z.setAttribute(g,"false");var ot=function(t){"true"!==Z.getAttribute(g)||q.contains(t.target)||rt()},rt=function(){Z.setAttribute(g,"false"),s.addCSSClass(Y,"none"),document.removeEventListener("click",ot),Q.value="",f.Ji(Q.value,et,J),s.addCSSClass(Q,"none"),s.addCSSClass(it,"none"),s.addCSSClass(X,"none")};Z.onclick=function(t){if(t.stopPropagation(),"true"===Z.getAttribute(g))rt(),Z.focus();else{Z.setAttribute(g,"true"),s.removeCSSClass(Y,"none");var e=tt.firstElementChild;e?e.focus():s.removeCSSClass(X,"none"),setTimeout((function(){return document.addEventListener("click",ot)}))}},Z.onkeydown=function(t){var e=t.code;t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||e===l.KeyCode.Esc||e===l.KeyCode.Tab||(Z.click(),s.removeCSSClass(Q,"none"),s.removeCSSClass(it,"none"),Q.focus())},Z.setAttribute("aria-required",S?"true":"false"),Z.tabIndex=0,C&&Z.setAttribute("data-error",C),B.options.forEach((function(t){var e=function(e){var i=s.createDiv(["multi-select-option"]);i.innerText=t.label;var o=s.createImageIcon({icon:a.iconClose,iconCss:["opt-close"]});o.onclick=function(){G.removeChild(i),tt.appendChild(e);var s=f.Ni[_];s.splice(s.indexOf(t.value),1),f.Yi(_,$,Z)},i.appendChild(o),i.onclick=function(t){t.stopPropagation(),"true"===Z.getAttribute(g)&&Z.click()},G.appendChild(i)},i=s.createListItem(t.label,t.label,t.label,"","",(function(){Z.click(),tt.removeChild(i),f.Ni[_].push(t.value),e(i),f.Yi(_,$,Z)}),!1,!1);i.onkeydown=function(t){return f.Ki(t,i,tt,Z,J)},(null==d?void 0:d.includes(t.value))?e(i):tt.appendChild(i)})),q.onclick=function(t){return t.stopPropagation()},Z.appendChild(G),this.Di.push(Z),w.appendChild(Z),it.appendChild(st),Y.appendChild(K),Y.appendChild(Q),Y.appendChild(it),Y.appendChild(tt),q.appendChild(Y),w.appendChild(q),this.Wi(Z,T)}break;case n.DisplayType.Toggle:var nt=t,at=s.createLabel(["".concat(i,"-value"),"toggle"]);at.tabIndex=0,at.onclick=function(t){return t.stopPropagation()},u=s.createInputElement({id:_,placeholder:M,required:S,type:"checkbox",checked:nt.defaultValue===nt.valueOn,errorMsg:C,valueOn:nt.valueOn,valueOff:nt.valueOff});var ct=nt.labelOn||nt.valueOn,ht=nt.labelOff||nt.valueOff;u.setAttribute("aria-label",u.checked?ct:ht),u.oninput=function(){u.setAttribute("aria-label",u.checked?ct:ht),f.Yi(_,$,u)},at.appendChild(u),at.appendChild(s.createDiv(["round-slider"])),w.appendChild(at),this.Wi(u.parentElement,T);break;case n.DisplayType.DatePicker:var lt=t;u=s.createInputElement({type:"date",id:_,title:M,required:S,defaultValue:lt.defaultValue,min:lt.minDate,max:lt.maxDate,errorMsg:C},["".concat(i,"-value")]);break;case n.DisplayType.TimePicker:var ut=t;u=s.createInputElement({type:"time",id:_,title:M,required:S,defaultValue:ut.defaultValue,min:ut.minTime,max:ut.maxTime,errorMsg:C},["".concat(i,"-value")]);break;case n.DisplayType.TextInput:var pt=t;if(pt.multiLine){var dt=s.createElement("textarea",["".concat(i,"-value")],!0);s.setAttributes(dt,{id:_,required:S,minLength:pt.minLength,maxLength:pt.maxLength,defaultValue:pt.defaultValue,placeholder:pt.placeholder,errorMsg:C}),dt.rows=3,dt.onchange=function(){return f.Yi(_,$,dt)},dt.onclick=function(t){return t.stopPropagation()},w.appendChild(dt),this.Di.push(dt),this.Wi(dt,T)}else u=s.createInputElement({type:pt.inputStyle||"text",id:_,placeholder:M,required:S,defaultValue:pt.defaultValue,errorMsg:C,minLength:pt.minLength,maxLength:pt.maxLength,pattern:pt.validationRegularExpression},["".concat(i,"-value")]);break;case n.DisplayType.NumberInput:var gt=t;u=s.createInputElement({type:"number",id:_,placeholder:M,required:S,defaultValue:null===(r=gt.defaultValue)||void 0===r?void 0:r.toString(),min:null===(c=gt.minValue)||void 0===c?void 0:c.toString(),max:null===(h=gt.maxValue)||void 0===h?void 0:h.toString(),errorMsg:C},["".concat(i,"-value")]);break;default:this.Ri.error("Payload contains wrong display type:".concat(z," for editable field"))}return u&&("checkbox"!==u.type&&(w.appendChild(u),this.Wi(u,T),u.onchange=function(){return f.Yi(_,$,u)},u.onclick=function(t){return t.stopPropagation()}),this.Di.push(u)),w},e.prototype.Gi=function(t,e){var i=this;void 0===e&&(e=!1);var s,o=t.dataset.error,r=function(){e||("SPAN"===(null==a?void 0:a.tagName)&&(i.util.removeCSSClass(t.parentElement,"error"),a.remove(),i.Hi--),c||i.Wi(t,s||i.translations.editFieldErrorMessage))},a=t.nextElementSibling,c=!0;switch(t.tagName.toLowerCase()){case"form":var h=t,l=h.getAttribute("aria-label");if(l===n.DisplayType.MultiSelect&&"true"===h.ariaRequired)h.querySelectorAll("input[type='checkbox']:checked").length||(c=!1,s=o||h.querySelector("input").validationMessage);else l!==n.DisplayType.SingleSelect||h.checkValidity()||(c=!1,s=o||h.querySelector("input").validationMessage);break;case"input":var u=t;"checkbox"===u.type?a=a.parentElement.nextElementSibling:u.checkValidity()||(s=o||u.validationMessage,c=!1);break;case"textarea":var p=t;p.checkValidity()||(s=o||p.validationMessage,c=!1);break;case"div":var d=t;a=a.nextElementSibling,d.getAttribute("aria-label")===n.DisplayType.SingleSelect?setTimeout((function(){var t=d.firstElementChild;return t.checkValidity()||(c=!1,s=o||t.validationMessage),r(),c})):"true"===d.getAttribute("aria-required")&&(s=o,c=!!d.firstElementChild.firstElementChild)}return r(),c},e.prototype.Ji=function(t,e,i){var s=this.util;i.length=0;for(var o=0;o<e.length;o++){var r=e[o],n=r.querySelector("span"),a=r.textContent||r.innerText;a.toLowerCase().indexOf(t.toLowerCase())<0?(s.addCSSClass(r,"none"),n.innerHTML=a.replace(/(<b>)|(<\/b>)/g,"")):(n.innerHTML=t?a.replace(new RegExp("".concat(t),"gi"),"<b>$&</b>"):a.replace(/(<b>)|(<\/b>)/g,""),s.removeCSSClass(r,"none"),i.push(r))}return i.length>0},e.prototype.Ki=function(t,e,i,s,o){var r,n,a,c,h=this.cssPrefix,u=o.indexOf(e),p=o.length,d=!1;if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.shiftKey&&t.code===l.KeyCode.Tab)s.click();else switch(t.code){case l.KeyCode.Return:case l.KeyCode.Space:e.click(),d=!0;break;case l.KeyCode.Esc:case l.KeyCode.Tab:s.click(),t.code===l.KeyCode.Esc&&(s.focus(),d=!0);break;case l.KeyCode.Up:var g=e.previousElementSibling||i.lastElementChild;g.classList.contains("".concat(h,"-none"))?null===(r=o[(u+p-1)%p])||void 0===r||r.focus():g.focus(),d=!0;break;case l.KeyCode.Down:var m=e.nextElementSibling||i.firstElementChild;m.classList.contains("".concat(h,"-none"))?null===(n=o[(u+1)%p])||void 0===n||n.focus():m.focus(),d=!0;break;case l.KeyCode.Home:case l.KeyCode.PageUp:var f=i.firstElementChild;f.classList.contains("".concat(h,"-none"))?null===(a=o[0])||void 0===a||a.focus():f.focus(),d=!0;break;case l.KeyCode.End:case l.KeyCode.PageDown:var b=i.lastElementChild;b.classList.contains("".concat(h,"-none"))?null===(c=o[p-1])||void 0===c||c.focus():b.focus(),d=!0;break;default:if(s instanceof HTMLInputElement)s.focus();else{var v=i.previousElementSibling,w=v.previousElementSibling,x=this.util;x.removeCSSClass(w,"none"),x.removeCSSClass(v,"none"),w.focus()}}d&&(t.stopPropagation(),t.preventDefault())}},e.prototype.Yi=function(t,e,i){var s=this;if(this.Gi(i)&&e){var o=JSON.parse(JSON.stringify(this.getSubmittedFields()));this.Di.forEach((function(t){s.Gi(t,!0)||delete o[t.id]})),Object.keys(o).forEach((function(t){var e=o[t];Array.isArray(e)?0===e.length&&delete o[t]:0===e||e||delete o[t]}));var a=this.settings.sdkMetadata?r({version:c.SDK_VERSION},this.settings.sdkMetadata):{version:c.SDK_VERSION};this.te.webCore.sendMessage((0,n.buildUserMessage)({submittedFields:o,partialSubmitField:t,type:n.MessageType.FormSubmission}),{sdkMetadata:a}).then((function(){var t=s.settings.disablePastActions;"all"===t?s.disableActions():"postback"===t&&s.disablePostbacks()})).catch((function(t){return s.Ri.error("[partialSubmit] Failed to send postback message:",t)}))}},e.prototype.Wi=function(t,e,i){if(void 0===i&&(i=!1),e){var s=this.util,o=s.createTextSpan(["field-error",i?"form-error":""]),r=s.createImageIcon({icon:a.iconError,iconCss:["form-error-icon"]}),n=s.createTextSpan(["error-text"]);if(n.innerText=e,o.appendChild(r),o.appendChild(n),i)t.appendChild(o),this.Ui=o;else{var c=t.parentElement;s.addCSSClass(c,"error"),c.appendChild(o),this.Hi++}}},e}(h.C2SQLBaseMessageComponent);function f(t,e,i,s){void 0===s&&(s=!0),t&&(s?i.addCSSClass(t,"disabled"):i.removeCSSClass(t,"disabled")),e.forEach((function(t){switch(t.tagName.toLowerCase()){case"form":var e=t.getElementsByTagName("input");s?i.addCSSClass(t,"disabled"):i.removeCSSClass(t,"disabled");for(var o=0;o<e.length;o++){e[o].disabled=s}break;case"input":var r=t;r.disabled=s,"checkbox"===r.type&&(s?i.addCSSClass(t.parentElement,"disabled"):i.removeCSSClass(t.parentElement,"disabled"));break;case"textarea":t.disabled=s;break;case"div":s?(i.addCSSClass(t,"disabled"),i.addCSSClass(t.parentElement,"disabled")):(i.removeCSSClass(t,"disabled"),i.removeCSSClass(t.parentElement,"disabled"))}}))}e.EditFormMessageComponent=m},955:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.applyMarginTop=e.applyFontStyles=e.FieldComponent=void 0;var s=i(396),o=i(476),r=i(168),n=i(820),a=i(752),c=i(819),h=i(549),l=function(){function t(t,e,i,o,r,a){this.He=t,this.ii=e,this.ji=i,this.Fi=a,this.isTableField=!1,this.isColumnField=!1,i.displayType===s.DisplayType.Action&&(this.action=n.ActionComponentFactory.fromActionPayload(i.action,e,t,o,r))}return t.prototype.render=function(){var t,e=this.ii,i=this.ji,n="form-message",a=this.He,c=i.alignment,l=i.label,m=i.labelFontSize,f=i.labelFontWeight,b=i.marginTop,v=i.onHoverPopupContent,w=e.createTextDiv(["".concat(n,"-value")]),x=null===(t=i.value)||void 0===t?void 0:t.toString();switch(i.displayType){case s.DisplayType.Link:var y=e.createDiv(),k=i,_=k.imageUrl,z=k.linkLabel,M=e.createElement("a",z?[]:["ellipsis"],!0);if(M.href=x,_){var S=e.createImage(_,["video-wrapper"],x);S.alt=z||"",M.appendChild(S),l&&e.addCSSClass(w,"with-top-margin")}else M.innerHTML=z||(0,o.stripHTTP)(x)||"";M.setAttribute("target","_blank"),y.appendChild(M),a.linkHandler?(0,r.setEmbeddedLinksHandler)(y,a.linkHandler):a.openLinksInNewWindow&&(0,r.setLinksOpenInNewWindow)(y),w.appendChild(M);break;case s.DisplayType.Text:var C=i,T=C.fontSize,$=C.fontWeight,I=C.truncateAt;x&&I?(w.innerHTML="".concat(x.slice(0,I),"..."),w.title=x):w.innerHTML=x||"",u(w,T,$,e);break;case s.DisplayType.Media:var A=i.mediaType,O=l&&x;switch(A){case"image":var E=e.createImage(x,["video-wrapper"],x);O&&e.addCSSClass(w,"with-top-margin"),w.appendChild(E);break;case"video":(0,h.getEmbeddedVideo)(x,e.cssPrefix)?(w.innerHTML=(0,h.linkify)(x,e.cssPrefix,a.embeddedVideo),a.embeddedVideo&&O&&e.addCSSClass(w,"with-top-margin")):w.appendChild(g(A,x,w,O,e));break;case"audio":w.appendChild(g(A,x,w,O,e))}break;case s.DisplayType.Action:e.addCSSClass(w,"flex"),w.style.justifyContent=c,l&&e.addCSSClass(w,"with-top-margin"),this.action.onActionClick=this.onActionClick,w.appendChild(this.action.render())}if(this.isTableField)return d(w,v,a,e),w;var L="".concat(n,"-field"),P=[L,"".concat(L,"-col-").concat(this.Fi)],j=e.createDiv(P),F=e.createDiv(["".concat(n,"-key")]);return F.innerHTML=l||"",c&&(F.style.textAlign=c,w.style.textAlign=c),u(F,m,f,e),j.appendChild(F),j.appendChild(w),d(j,v,a,e),this.isColumnField?p(j,b,e):j},t.prototype.disableActions=function(){this.action.disable()},t.prototype.disablePostbacks=function(){(0,a.getPostActions)([this.action]).forEach((function(t){t.disable()}))},t.prototype.enableActions=function(){this.action.enable()},t.prototype.enablePostbacks=function(){(0,a.getPostActions)([this.action]).forEach((function(t){t.enable()}))},t}();function u(t,e,i,s){switch(e){case"large":s.addCSSClass(t,"font-size-lg");break;case"small":s.addCSSClass(t,"font-size-sm");break;default:s.addCSSClass(t,"font-size-md")}switch(i){case"bold":s.addCSSClass(t,"font-weight-bold");break;case"light":s.addCSSClass(t,"font-weight-light");break;default:s.addCSSClass(t,"font-weight-md")}}function p(t,e,i){return"large"===e?i.addCSSClass(t,"margin-top-lg"):"none"!==e&&i.addCSSClass(t,"margin-top-md"),t}function d(t,e,i,s){if(e){var o=c.MessageComponentFactory.fromMessage(i,s,{messagePayload:e});if(o){var r=s.createDiv(),n=s.createDiv(["popupContent"]);n.appendChild(o.render()),n.setAttribute("role","tooltip"),r.appendChild(n),t.style.cursor="pointer",t.appendChild(r)}}}e.FieldComponent=l,e.applyFontStyles=u,e.applyMarginTop=p;var g=function(t,e,i,s,o){var r=o.createMedia(t,e,["video-wrapper"]);return r.controls=!0,r.preload="metadata",s&&o.addCSSClass(i,"with-top-margin"),r}},158:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.setMaxColumnWidth=e.getFormRowColumn=e.getFormRow=e.getFormItem=e.applySelectAction=e.FormMessageComponent=void 0;var r=i(396),n=i(548),a=i(820),c=i(955),h=i(168),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getContent=function(){var e=this,i=this.util,s=this.settings,o=this.qe,r="form-message",n=i.createDiv([r]);o.formColumns>2&&(o.formColumns=2);var a=o.forms;return a.forEach((function(t,c){if(t.title){var h=i.createTextDiv(["".concat(r,"-header")]);h.innerText=t.title,n.appendChild(h)}var l=u(i,t,o.formColumns,s,e.handleOnActionClick.bind(e),e.te),p=l[0],d=l[1];e.si=e.si.concat(d);var g=c+1;g===a.length||a[g].title||i.addCSSClass(p,"with-border"),n.appendChild(p)})),t.prototype.getContent.call(this,n)},e}(n.C2SQLBaseMessageComponent);function u(t,e,i,s,o,n){var l,u,f="form-message",b="".concat(f,"-actions-col"),v=null===(l=e.channelExtensions)||void 0===l?void 0:l.c2kReferences,w=t.createDiv(["".concat(f,"-item"),v?"c2k-reference":""]),x=(0,h.getFormShareText)(e,!0),y=function(t,e,i,s,o,r){var n,c=[];if((null===(n=t.actions)||void 0===n?void 0:n.length)>0)for(var h=0,l=t.actions;h<l.length;h++){var u=l[h],p=a.ActionComponentFactory.fromActionPayload(u,e,i,o,r);p&&(p.onActionClick=s,c.push(p))}return c}(e,t,s,o,x,n);(y.length&&(u=function(t,e,i,s){for(var o=e.createDiv("horizontal"!==i.formActionsLayout?["form-actions","col",s]:["form-actions"]),r=0,n=t;r<n.length;r++){var a=n[r].render();o.appendChild(a)}return o}(y,t,s,b)),(0,r.isFormEntityWithRows)(e)?e.formRows.forEach((function(e,i){var a=p(e,y,t,s,x,o,n),h=e.columns.length;if(e.columns.forEach((function(e){var i=g(e,t);e.fields.forEach((function(a){if((0,r.isReadOnlyField)(a)){var l=new c.FieldComponent(s,t,a,x,n);l.isColumnField=!0,l.onActionClick=o,l.action&&y.push(l.action),m(e.width,a.displayType,i,h),i.appendChild(l.render())}})),a.appendChild(i)})),v&&0!==i){var l=t.createTextSpan(["delimiter"]);l.innerHTML="&bull;",a.firstElementChild.firstElementChild.lastElementChild.prepend(l)}w.appendChild(a)})):e.fields.forEach((function(e){var r=new c.FieldComponent(s,t,e,x,n,i);r.onActionClick=o,r.action&&y.push(r.action),w.appendChild(r.render())})),u&&w.appendChild(u),e.selectAction)&&d(a.ActionComponentFactory.fromActionPayload(e.selectAction,t,s,x,n),y,o,w,e.selectAction.label);return[w,y]}function p(t,e,i,s,o,r,n){var c=i.createDiv(["form-row",t.separator?"separator":""]);t.selectAction&&d(a.ActionComponentFactory.fromActionPayload(t.selectAction,i,s,o,n),e,r,c,t.selectAction.label);return c}function d(t,e,i,s,o){t&&(e.push(t),t.onActionClick=i,s.onclick=function(e){return t.handleOnClick(e)},s.title=o||"",s.style.cursor="pointer")}function g(t,e){var i=t.width,s=t.verticalAlignment,o=e.createDiv(["form-row-column",i||""]);return"center"===s?e.addCSSClass(o,"align-center"):"bottom"===s?e.addCSSClass(o,"align-end"):e.addCSSClass(o,"align-start"),o}function m(t,e,i,s){"stretch"===t||e!==r.DisplayType.Media||i.style.maxWidth||(i.style.maxWidth="calc((100% - ".concat(16*(s-1),"px)/").concat(s,")"))}e.FormMessageComponent=l,e.getFormItem=u,e.getFormRow=p,e.applySelectAction=d,e.getFormRowColumn=g,e.setMaxColumnWidth=m},865:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.applyHeadingWidth=e.createTableCell=e.TableMessageComponent=void 0;var r=i(548),n=i(955),a=i(820),c=i(158),h=100,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getContent=function(){var e=this,i=this.util,s=this.qe,o=p(s.headings),r="table-message",h=i.createDiv(["".concat(r,"-wrapper")]),l=i.createElement("table",[r]);h.appendChild(l);var d=i.createElement("tr",["".concat(r,"-headings")]);return o.forEach((function(t){var e=u(i,["".concat(r,"-heading")],t.width,t.alignment);e.innerText=t.label,d.appendChild(e)})),l.appendChild(d),s.rows.forEach((function(t){var s=i.createElement("tr",["".concat(r,"-row")]);if(t.selectAction){var h=a.ActionComponentFactory.fromActionPayload(t.selectAction,i,e.settings,e.shareText,e.options);(0,c.applySelectAction)(h,e.si,e.handleOnActionClick.bind(e),s,t.selectAction.label)}t.fields.forEach((function(t,a){var c=u(i,["".concat(r,"-item")],o[a].width,t.alignment),h=new n.FieldComponent(e.settings,i,t,e.shareText,e.options);h.isTableField=!0,h.onActionClick=e.handleOnActionClick.bind(e),h.action&&e.si.push(h.action),c.appendChild(h.render()),s.appendChild(c)})),l.appendChild(s)})),t.prototype.getContent.call(this,h)},e}(r.C2SQLBaseMessageComponent);function u(t,e,i,s){var o=t.createElement("td",e,!0);return o.style.textAlign=s,o.style.width="".concat(i,"%"),o}function p(t){var e;if(t.every((function(t){return!t.width||t.width>=0&&t.width<=h}))){var i=0,s=0;if(t.forEach((function(t){t.width?s+=t.width:i++})),i)if(s<h){var o=(h-s)/i;e=t.map((function(t){return t.width||(t.width=o),t}))}else e=d(t);else if(s===h)e=t;else{var r=h/s;e=t.map((function(t){return t.width=t.width*r,t}))}}else e=d(t);return e}function d(t){var e=h/t.length;return t.map((function(t){return t.width=e,t}))}e.TableMessageComponent=l,e.createTableCell=u,e.applyHeadingWidth=p},643:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.TableFormMessageComponent=void 0;var r=i(548),n=i(865),a=i(158),c=i(609),h=i(955),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getContent=function(){var e=this,i=this.util,s=this.qe,o=(0,n.applyHeadingWidth)(s.headings.concat({alignment:"center",label:""})),r="table-message",l=i.createDiv(["".concat(r,"-wrapper")]),u=i.createElement("table",[r,"tableform-message"]);l.appendChild(u);var p=i.createElement("tr",["".concat(r,"-headings")]);return o.forEach((function(t){var e=(0,n.createTableCell)(i,["".concat(r,"-heading")],t.width,t.alignment);e.innerText=t.label,p.appendChild(e)})),u.appendChild(p),p.lastElementChild.style.width="32px",s.rows.forEach((function(t,l){var p=i.createElement("tr",["".concat(r,"-row")]);t.fields.forEach((function(t,s){var a=(0,n.createTableCell)(i,["".concat(r,"-item")],o[s].width,t.alignment),c=new h.FieldComponent(e.settings,i,t,e.shareText,e.options);c.isTableField=!0,c.onActionClick=e.handleOnActionClick.bind(e),c.action&&e.si.push(c.action),a.appendChild(c.render()),p.appendChild(a)})),s.formColumns>2&&(s.formColumns=2);var d=s.forms[l],g=(0,n.createTableCell)(i,["".concat(r,"-item"),"button-cell"]),m=i.createIconButton({css:["".concat(r,"-item"),"".concat(r,"-item-form-toggle")],icon:c.iconChevronDown,iconCss:[],title:d.title||""});g.appendChild(m),p.appendChild(g);var f="none",b="rotate-180",v=(0,a.getFormItem)(i,d,s.formColumns,e.settings,e.handleOnActionClick.bind(e),e.te),w=v[0],x=v[1];e.si=e.si.concat(x),i.addCSSClass(w,f);var y=!1;p.onclick=function(){y?(i.addCSSClass(w,f),i.removeCSSClass(m,b)):(i.removeCSSClass(w,f),i.addCSSClass(m,b)),y=!y},u.appendChild(p),u.appendChild(w)})),t.prototype.getContent.call(this,l)},e}(r.C2SQLBaseMessageComponent);e.TableFormMessageComponent=l},512:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.ol||function(t,e,i){if(i||2===arguments.length)for(var s,o=0,r=e.length;o<r;o++)!s&&o in e||(s||(s=Array.prototype.slice.call(e,0,o)),s[o]=e[o]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(e,"Qh",{value:!0}),e.CardMessageComponent=void 0;var n=i(609),a=i(101),c=i(398),h=i(168),l=function(t){function e(e,i,s,o,r,n){var c=t.call(this,e,i,s,o,r,n)||this;c.ni=[],c.ai=s.layout,c.ci=s.cards.length;var h=0;return s.cards.forEach((function(t){h++,c.ni.push(new a.CardComponent(c.settings,i,t,h,n))})),c.globalActions=c.actions.concat(c.globalActions),c.actions=[],c.li=!1,c}return o(e,t),e.prototype.hasActions=function(){return this.ni[0].hasActions()||this.actions.length>0||this.globalActions.length>0},e.prototype.disableActions=function(){t.prototype.disableActions.call(this),this.ni.forEach((function(t){t.disableActions()}))},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),this.ni.forEach((function(t){t.disablePostbacks()}))},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),this.ni.forEach((function(t){t.enableActions()}))},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),this.ni.forEach((function(t){t.enablePostbacks()}))},e.prototype.render=function(){var e=this.util,i=this.settings.name,s=["card-message-".concat(this.ai)],o=t.prototype.render.call(this);if(o.querySelector(".".concat(i,"-icon-wrapper"))){s.push("has-message-icon");var n=o.querySelector(".".concat(i,"-content-wrapper"));e.addCSSClass(n,"with-icon")}return e.addCSSClass.apply(e,r([o],s,!1)),o},e.prototype.setCardsScrollDirection=function(){this.li="rtl"===getComputedStyle(this.ui).direction},e.prototype.getContent=function(){var t,e=this,i=this.util,s=this.ci,o=i.createDiv(["card-message-content"]),r=i.createDiv(["card-message-cards"]),n=!0;(this.ni.forEach((function(t){t.onActionClick=e.handleOnActionClick.bind(e);var i=t.render();n&&t.hasActions()&&(e.firstActionButton=t.getFirstActionButton(),n=!1),r.appendChild(i)})),o.appendChild(r),"horizontal"===this.ai&&s>1)&&(o.appendChild(this.pi()),this.di=0,r.addEventListener("scroll",(function(){window.clearTimeout(t),t=window.setTimeout((function(){for(var t=0,i=0;i<s;i++){var o=e.li?s-i-1:i,n=r.children[o];if(r.scrollLeft<=n.offsetLeft+5){t=o;break}}t!==e.di&&(e.di=t,e.gi())}),100)})),window.addEventListener("resize",(0,h.debounce)((function(){e.mi()}),500)));this.fi=o,this.ui=r;var a=this.settings.name;return new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e.mi()}))}),{root:document.querySelector(".".concat(a,"-conversation"))}).observe(r),o},e.prototype.pi=function(){if(!this.bi){var t=this.util,e=this.translations.cardNavNext;this.bi=t.createDiv(["next-wrapper"]);var i=t.createIconButton({css:["round","next"],icon:n.iconChevronNext,iconCss:[],title:e});i.onclick=this.vi.bind(this),this.bi.appendChild(i)}return this.bi},e.prototype.wi=function(){if(!this.xi){var t=this.util,e=this.translations.cardNavPrevious;this.xi=t.createDiv(["prev-wrapper"]);var i=t.createIconButton({css:["round","previous"],icon:n.iconChevronPrevious,iconCss:[],title:e});i.onclick=this.yi.bind(this),this.xi.appendChild(i)}return this.xi},e.prototype.vi=function(){this.di<this.ci&&(this.di++,this.gi())},e.prototype.yi=function(){this.di>0&&(this.di--,this.gi())},e.prototype.gi=function(){var t,e,i,s,o=this.ui.children[this.di];o&&(this.ui.scrollLeft=o.offsetLeft-56,0===this.di?null===(t=this.xi)||void 0===t||t.remove():(null===(e=this.xi)||void 0===e?void 0:e.parentElement)||this.fi.prepend(this.wi()),this.di===this.ci-1?null===(i=this.bi)||void 0===i||i.remove():(null===(s=this.bi)||void 0===s?void 0:s.parentElement)||this.fi.appendChild(this.pi()))},e.prototype.mi=function(){this.ui.scrollWidth===this.ui.offsetWidth?(this.bi&&(this.bi.hidden=!0),this.xi&&(this.xi.hidden=!0)):(this.bi&&(this.bi.hidden=!1),this.xi&&(this.xi.hidden=!1))},e}(c.MessageComponent);e.CardMessageComponent=l},101:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.CardComponent=void 0;var s=i(752),o=i(820),r=i(168),n=i(549),a=function(){function t(t,e,i,r,n){var a;if(this.He=t,this.ii=e,this.te=n,this.si=[],this.Ye=[],this.Ke=i.title,this.oi=i.description,this.Ae=i.imageUrl,this.P=i.url,i.actions){for(var c=0,h=i.actions;c<h.length;c++){var l=h[c],u=(this.Ke?"".concat(this.Ke," - "):"")+(this.oi?"".concat(this.oi," - "):"")+(null!==(a=this.P)&&void 0!==a?a:""),p=o.ActionComponentFactory.fromActionPayload(l,e,t,u,n);p&&(p.onActionClick=this.handleOnActionClick.bind(this),this.si.push(p))}this.Ye=(0,s.getPostActions)(this.si)}}return t.prototype.handleOnActionClick=function(t){this.onActionClick&&this.onActionClick(t)},t.prototype.render=function(){var t=this.ii,e=this.He,i=e.embeddedVideo,s=e.locale,o=this.P,a=t.createDiv(["card"]),c=o?t.createAnchor(o,"",["card-component"],e.openLinksInNewWindow,e.linkHandler):t.createDiv(["card-content"]);if(this.P&&(c.innerText=""),this.Ae){var h=e.i18n,l=h[s].cardImagePlaceholder;if(this.te&&this.te.locale){var u=h[this.te.locale];l=u?u.cardImagePlaceholder:l}c.appendChild(t.createImage(this.Ae,["card-image"],l))}var p=t.createTextDiv(["card-title"]);if(p.innerHTML=(0,n.linkify)(this.Ke,t.cssPrefix,i),c.appendChild(p),this.oi){var d=t.createTextDiv(["card-description"]);d.innerHTML=(0,n.linkify)(this.oi,t.cssPrefix,i),c.appendChild(d)}if(a.appendChild(c),e.linkHandler?(0,r.setEmbeddedLinksHandler)(c,e.linkHandler):e.openLinksInNewWindow&&(0,r.setLinksOpenInNewWindow)(c),this.si.length>0){for(var g=t.createDiv("horizontal"!==e.cardActionsLayout?["card-actions","col"]:["card-actions"]),m=!0,f=0,b=this.si;f<b.length;f++){var v=b[f].render();m&&(this.ri=v,m=!1),g.appendChild(v)}a.appendChild(g)}return a},t.prototype.hasActions=function(){return this.si.length>0},t.prototype.disableActions=function(){this.si.forEach((function(t){return t.disable()}))},t.prototype.disablePostbacks=function(){this.Ye.forEach((function(t){return t.disable()}))},t.prototype.enableActions=function(){this.si.forEach((function(t){return t.enable()}))},t.prototype.enablePostbacks=function(){this.Ye.forEach((function(t){return t.enable()}))},t.prototype.getFirstActionButton=function(){return this.ri},t}();e.CardComponent=a},346:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.LocationMessageComponent=void 0;var r=i(398),n=i(609),a=function(t){function e(e,i,s,o,r,n){var a=t.call(this,e,i,s,o,r,n)||this,c=s.location;return a.Ke=c.title,a.P=c.url,a.ki=c.longitude,a._i=c.latitude,a}return o(e,t),e.prototype.render=function(){var t=this.util,e=t.createDiv(["message"]);e.lang=this.locale;var i=t.createDiv(["message-wrapper"]);e.appendChild(i);var s=t.createDiv(["attachment"]),o=t.createDiv(["attachment-placeholder","flex"]),r=t.createDiv(["attachment-icon"]),a=t.createImageIcon({icon:this.settings.icons.shareMenuLocation||n.iconShareLocation}),c=t.createDiv(["attachment-footer","flex"]),h=t.createLabel(["attachment-title"]);if(h.innerText=this.Ke?this.Ke:"".concat(this._i.toFixed(4),", ").concat(this.ki.toFixed(4)),c.appendChild(h),r.appendChild(a),o.appendChild(r),!this.actions.length){var l=t.createDiv(["attachment-controls"]),u=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:this.settings.icons.externalLink||n.iconExternalLink,iconCss:[],title:this.translations.openMap}),p=t.createAnchor(this.P||"https://www.google.com/maps/@".concat(this._i,",").concat(this.ki,",12z"),"",[],this.settings.openLinksInNewWindow,this.settings.linkHandler);u.onclick=function(){p.click()},l.appendChild(u),c.appendChild(l)}return s.appendChild(o),s.appendChild(c),i.appendChild(this.getContent(s)),e},e}(r.MessageComponent);e.LocationMessageComponent=a},752:function(t,e,i){Object.defineProperty(e,"Qh",{value:!0}),e.getPostActions=void 0;var s=i(396);e.getPostActions=function(t){return t.filter((function(t){var e=t.getActionType();return e===s.ActionType.Postback||e===s.ActionType.Location||e===s.ActionType.SubmitForm}))}},398:function(t,e,i){var s=this&&this.il||function(){return s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};Object.defineProperty(e,"Qh",{value:!0}),e.MESSAGE_SIDE=e.MessageComponent=void 0;var o=i(752),r=i(820),n=i(168),a=i(549);e.MESSAGE_SIDE={LEFT:"left",RIGHT:"right"};var c=function(){function t(t,e,i,r,a,c){this.settings=t,this.util=e,this.payload=i,this.side=r,this.source=a,this.options=c,this.actions=[],this.globalActions=[],this.Ye=[],this.locale=t.locale,this.translations=t.i18n[this.locale],this.shareText=(0,n.getShareText)(i),c&&c.locale&&(this.locale=c.locale,this.translations=s(s({},this.translations),this.settings.i18n[c.locale])),i.actions&&(this.actions=this.buildActions(i.actions,this.shareText)),i.globalActions&&(this.globalActions=this.buildActions(i.globalActions,this.shareText)),this.headerText=i.headerText,this.footerText=i.footerText,i.footerForm&&(this.footerFormComponent=(0,n.getFooterFormComponent)(e,i.footerForm,t,c)),this.Ye=(0,o.getPostActions)(this.actions).concat((0,o.getPostActions)(this.globalActions))}return t.prototype.handleOnActionClick=function(t){if(this.onActionClick){var e=t;e.messageComponent=this,this.onActionClick(e)}},t.prototype.hasActions=function(){return this.actions.length>0||this.globalActions.length>0},t.prototype.focusFirstAction=function(){var t;null===(t=this.firstActionButton)||void 0===t||t.focus()},t.prototype.disableActions=function(){this.actions.forEach((function(t){t.disable()})),this.globalActions.forEach((function(t){t.disable()})),this.footerFormComponent&&this.footerFormComponent.disableActions()},t.prototype.disablePostbacks=function(){this.Ye.forEach((function(t){t.disable()})),this.footerFormComponent&&this.footerFormComponent.disablePostbacks()},t.prototype.enableActions=function(){this.actions.forEach((function(t){t.enable()})),this.globalActions.forEach((function(t){t.enable()})),this.footerFormComponent&&this.footerFormComponent.enableActions()},t.prototype.enablePostbacks=function(){this.Ye.forEach((function(t){t.enable()})),this.footerFormComponent&&this.footerFormComponent.enablePostbacks()},t.prototype.render=function(t){var e=this,i=this,s=i.util,o=i.actions,n=i.globalActions,a=this.payload.embeddedActions,c="embeddedAction";this.element&&(this.element.innerHTML="");var h=this.element?this.element:s.createDiv(["message"]);h.lang=i.locale;var l=s.createDiv(["message-wrapper"]);h.appendChild(l);var u=i.getContent(t);if(i.headerText&&l.appendChild(i.getHeader()),l.appendChild(u),o&&o.length){var p=i.getActions();(this.settings.displayActionsAsPills?l:u).appendChild(p),i.firstActionButton||(i.firstActionButton=p.firstElementChild),this.actionsWrapper=p}if(i.footerText&&l.appendChild(i.getFooter()),this.footerFormComponent){var d=s.createDiv(["footer-form"]);d.appendChild(this.footerFormComponent.render()),l.appendChild(d)}if(n&&n.length){p=i.getGlobalActions();h.appendChild(p),i.firstActionButton||(i.firstActionButton=p.firstElementChild)}return this.element=h,h.querySelectorAll("span.".concat(c)).forEach((function(t){var i=t,o=a.find((function(e){return e.id===t.id}));if(o){s.addCSSClass(t,c,"display-".concat(o.displayType));var n=r.ActionComponentFactory.fromActionPayload(o,s,e.settings,e.shareText,e.options);n&&(n.onActionClick=e.handleOnActionClick.bind(e),n.render(),i.onclick=function(t){return n.handleOnClick(t)})}})),h},t.prototype.getHeader=function(){return h(this.headerText,"message-header",this.util,this.settings.embeddedVideo)},t.prototype.getContent=function(t){var e=this.util.createDiv(["message-bubble"]);return e.style.padding=this.settings.messagePadding||e.style.padding,t&&e.appendChild(t),e},t.prototype.getActions=function(){var t=this.settings,e=t.displayActionsAsPills?["message-global-actions"]:["message-actions"];return"horizontal"!==t.actionsLayout&&e.push("col"),l(this.actions,e,this.util)},t.prototype.getFooter=function(){return h(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)},t.prototype.getGlobalActions=function(){var t=["message-global-actions"];return this.settings.icons.avatarBot&&t.push("has-message-icon"),"horizontal"!==this.settings.globalActionsLayout&&t.push("col"),l(this.globalActions,t,this.util)},t.prototype.buildActions=function(t,e){var i=this.settings;return function(t,e,i,s,o,n){var a=[];return t.forEach((function(t){var c=r.ActionComponentFactory.fromActionPayload(t,e,i,s,o);c&&(c.onActionClick=n,a.push(c))})),a}(t,this.util,i,e,this.options,this.handleOnActionClick.bind(this))},t}();function h(t,e,i,s){var o=i.createDiv(["message-bubble",e]),r=i.createTextDiv();return r.innerHTML=(0,a.linkify)(t,i.cssPrefix,s),o.appendChild(r),o}function l(t,e,i){var s=i.createTextDiv(e);return t.forEach((function(t){s.appendChild(t.render())})),s}e.MessageComponent=c},913:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.RawMessageComponent=void 0;var r=function(t){function e(e,i,s,o,r,n){var a=t.call(this,e,i,s,o,r,n)||this;return a.qe=JSON.stringify(s.payload),a}return o(e,t),e.prototype.getContent=function(){var e=this.util.createTextSpan();return e.innerText=this.qe,t.prototype.getContent.call(this,e)},e}(i(398).MessageComponent);e.RawMessageComponent=r},774:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.FeedbackComponent=void 0;var r=i(858),n=i(609),a=function(t){function e(e,i,s,o,r,n){var a=t.call(this,e,i,s,o,r,n)||this;return a.$i=0,a.Ii=s.actions,a.ratingId=Date.now(),a}return o(e,t),e.prototype.focusFirstAction=function(){this.Ai[0].focus()},e.prototype.disableActions=function(){this.Oi(!0),t.prototype.disableActions.call(this)},e.prototype.disablePostbacks=function(){this.Oi(!0),t.prototype.disablePostbacks.call(this)},e.prototype.enableActions=function(){this.Oi(!1),t.prototype.enableActions.call(this)},e.prototype.enablePostbacks=function(){this.Oi(!1),t.prototype.enablePostbacks.call(this)},e.prototype.highlightRating=function(t){if(this.actions&&this.Ai)for(var e=this.util,i="active",s="string"==typeof t?this.Ei(t):t,o=1;o<=this.Ai.length;o++){var r=this.Ai[o-1];if(!r)break;s&&o<=s||0===s&&o<=this.$i?e.addCSSClass(r,i):e.removeCSSClass(r,i)}},e.prototype.getActions=function(){var t=this,e=this.util,i=this.settings,s=i.i18n[i.locale].ratingStar,o=e.createDiv(["rating-wrapper"]);this.Ai=this.Ii.map((function(r){var a=e.createElement("input",["star-input","rating-hidden"]);a.id="rating-".concat(r.label,"-").concat(t.ratingId),a.type="radio",a.name="rating-".concat(t.ratingId),a.value=r.label;var c=e.createLabel(["star-label"]);c.htmlFor="rating-".concat(r.label,"-").concat(t.ratingId),c.setAttribute("data-rating",r.label);var h=e.createTextSpan(["rating-hidden"]),l=s.replace("{0}","".concat(r.label));h.innerText=l;var u=i.icons&&i.icons.rating||n.iconRating,p=e.createImageIcon({icon:u,iconCss:["rating-star-icon"]});return c.appendChild(h),c.appendChild(p),a.onfocus=function(){a.disabled||(t.$i=t.Li(a))},a.onkeydown=function(e){"Enter"===e.key&&t.Pi(r)},c.onclick=function(){a.disabled||(t.$i=t.Li(c),t.Pi(r))},c.onmouseover=function(){a.disabled||t.Li(c)},c.onmouseleave=function(){a.disabled||t.Li(null)},o.appendChild(a),o.appendChild(c),a})),this.$i&&this.Li(null);var r=e.createDiv(["rating-root"]);return r.appendChild(o),r},e.prototype.Oi=function(t){this.Ai&&this.Ai.forEach((function(e){e.disabled=t}))},e.prototype.Pi=function(t){var e={getPayload:function(){return Promise.resolve(t.postback)},label:t.label,type:t.type};this.handleOnActionClick(e)},e.prototype.Li=function(t){var e=0;if(t){var i="value"in t?t.value:null==t?void 0:t.getAttribute("data-rating");e=i?parseInt(i,10):0}return this.highlightRating(e),e},e.prototype.Ei=function(t){var e=0;if(t.match(/^\d+$/)){var i=parseInt(t,10);i>0&&i<=this.actions.length&&(e=i)}return e},e}(r.TextMessageComponent);e.FeedbackComponent=a},858:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.TextMessageComponent=void 0;var r=i(168),n=i(398),a=i(396),c=i(549),h=function(t){function e(e,i,s,o,r,n){var a=t.call(this,e,i,s,o,r,n)||this;return a.zi=s.text,a}return o(e,t),e.prototype.getContent=function(){var e=this.settings,i=this.util,s=this.zi,o=i.createTextDiv(["message-text"]);return this.side===n.MESSAGE_SIDE.RIGHT?(0,a.isPostbackPayload)(this.payload)&&l(s)?(i.addCSSClass(o,"message-user-postback"),o.innerHTML=s):o.textContent=u(s):(o.innerHTML=(0,c.linkify)(s,i.cssPrefix,e.embeddedVideo),e.linkHandler?(0,r.setEmbeddedLinksHandler)(o,e.linkHandler):e.openLinksInNewWindow&&(0,r.setLinksOpenInNewWindow)(o)),t.prototype.getContent.call(this,o)},e}(n.MessageComponent);e.TextMessageComponent=h;var l=function(t){return!!t&&/^<img\s+/i.test(t)},u=function(t){return t.replace(/&#x([0-9a-f]+);/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))}},65:function(t,e,i){var s,o=this&&this.sl||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"Qh",{value:!0}),e.TextStreamMessageComponent=void 0;var r=i(398),n=i(752),a=i(168),c=i(549),h="start",l="end",u=function(t){function e(e,i,s,o,r,n){var h,u=t.call(this,e,i,s,o,r,n)||this;u.Mi="",u.Si=!0,u.Ci=s.streamState,u.zi=s.text,u.Mi=s.text,u.Si=null!==(h=n.isFresh)&&void 0!==h?h:u.Si;var d="";return u.Ti=p((function(t){var s=(d+=t).length%20?d:(0,c.linkify)(d,i.cssPrefix,e.embeddedVideo),o=(0,a.convertBreakTagsToNewLines)(s);u.textElement&&(u.textElement instanceof HTMLInputElement||u.textElement instanceof HTMLTextAreaElement?(u.textElement.focus(),u.textElement.value=o,u.textElement instanceof HTMLTextAreaElement&&(u.textElement.scrollTop=u.textElement.scrollHeight)):u.textElement.innerHTML=o)}),(function(){var t;u.Ci===l&&(u.isCoPilot?u.showDone():(u.zi=null===(t=u.textElement)||void 0===t?void 0:t.innerHTML,u.render()))}),e.typingDelay||1),u}return o(e,t),e.prototype.update=function(t){var e=t.streamState;switch(this.Ci=e,e){case h:this.renderClean(t),this.isCoPilot&&this.Ti.push(t.text.split(""));break;case"running":this.Ti.push(t.text.split("")),this.Mi=t.text;break;case l:if(this.Si){var i=this.Mi;if(this.Mi="",i.length){var s=t.text.lastIndexOf(i);if(s>=0){var o=t.text.substring(s+i.length);this.Ti.push(o.split("")),this.isCoPilot||this.setAddOnComponents(t);break}}}this.renderClean(t)}},e.prototype.getContent=function(){var e,i=this.settings,s=this.util,o=s.createTextDiv();return o.setAttribute("aria-hidden","true"),!this.Si||this.Ci!==h&&this.textElement?(o.innerHTML=(0,c.linkify)(this.zi,s.cssPrefix,i.embeddedVideo),this.Ci===l&&o.removeAttribute("aria-hidden"),i.linkHandler?(0,a.setEmbeddedLinksHandler)(o,i.linkHandler):i.openLinksInNewWindow&&(0,a.setLinksOpenInNewWindow)(o)):(this.textElement=o,this.Ti.push(null===(e=this.zi)||void 0===e?void 0:e.split(""))),t.prototype.getContent.call(this,o)},e.prototype.renderClean=function(t){this.Ti.clear(),this.zi=t.text,this.isCoPilot||(this.setAddOnComponents(t),this.render())},e.prototype.setAddOnComponents=function(t){this.headerText=t.headerText,t.actions&&(this.actions=this.buildActions(t.actions)),this.footerText=t.footerText,t.footerForm&&(this.footerFormComponent=(0,a.getFooterFormComponent)(this.util,t.footerForm,this.settings,this.options)),t.globalActions&&(this.globalActions=this.buildActions(t.globalActions)),this.Ye=(0,n.getPostActions)(this.actions).concat((0,n.getPostActions)(this.globalActions))},e}(r.MessageComponent);e.TextStreamMessageComponent=u;var p=function(t,e,i){var s=[],o=!0,r=function(){if(!s.length)return o=!0,void setTimeout((function(){return e()}));setTimeout((function(){s.length&&(t(s.shift()),r())}),i)};return{push:function(t){s.push.apply(s,t),o&&(o=!1,r())},clear:function(){s.length=0}}}},682:function(t,e,i){var s=this&&this.il||function(){return s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};Object.defineProperty(e,"Qh",{value:!0});var o=i(921),r=i(356),n=i(476),a={};function c(t,e){var i,u,p=this,d=(0,r.addDefaultSettings)(t),g=(0,n.generateEventDispatcher)(),m=!1,f=new r.DOMUtil(d);r.Logger.logLevel=d.isDebugMode?r.Logger.LOG_LEVEL.DEBUG:r.Logger.LOG_LEVEL.ERROR,r.Logger.appName=d.name,r.Logger.appVersion=r.SDK_VERSION;var b=new r.Logger("main"),v=new o.WebCore({URI:d.URI,channelId:d.channelId,userId:d.userId,isTLS:d.enableSecureConnection,channel:d.channel,enableAttachment:d.enableAttachment,enableAttachmentSecurity:d.enableAttachmentSecurity,isLongPoll:d.enableLongPolling,isTTS:d.enableBotAudioResponse,TTSService:d.ttsService,tokenGenerator:d.clientAuthEnabled?e:null,recognitionLocale:d.speechLocale,retryInterval:d.reconnectInterval,retryMaxAttempts:d.reconnectMaxAttempts});if(d.skillVoices&&(!d.ttsVoice||Array.isArray(d.ttsVoice)&&!d.ttsVoice.length)&&(d.ttsVoice=d.skillVoices),d.enableBotAudioResponse)try{d.ttsVoice&&v.setTTSVoice(d.ttsVoice)}catch(t){b.error("Failed to initialize TTS")}var w=Object.values(o.RecognitionLocale),x=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];1===e.length?b.error("Parameter ".concat(e," was not passed for ").concat(t," call. No action processed.")):b.error("Parameters ".concat(e.join(", ")," were not passed for ").concat(t," call. No action processed."))},y=function(t){g.trigger(r.ChatEvent.MESSAGE_SENT,t),g.trigger(r.ChatEvent.MESSAGE,t)},k=function(t){g.trigger(r.ChatEvent.MESSAGE_RECEIVED,t),g.trigger(r.ChatEvent.MESSAGE,t)},_=function(t){g.trigger(r.ChatEvent.NETWORK,t)},z=function(){(i=new r.WidgetComponent(v,d,{connect:p.connect.bind(p),openChat:p.openChat.bind(p),closeChat:p.closeChat.bind(p),handleSessionEnd:S.bind(p),receivedMessage:k.bind(p),sentMessage:y.bind(p),getUnreadMessagesCount:p.getUnreadMessagesCount.bind(p),onConnectionStatusChange:_.bind(p),util:f,eventDispatcher:g})).contextWidgetMap=a,i.render()},M=function(){g.trigger(r.ChatEvent.READY),M=function(){}};this.configureWidget=function(t,e,s){void 0===s&&(s=!0);var o=new r.ContextualWidgetComponent(d,f,t,e,s,a,v,i,g);return p.isConnected()||p.connect(),a[o.threadId]=o,o},this.updateChatContext=function(t,e,i,o,n){var a=void 0===n?{}:n,c=a.event,h=a.semanticObject;return t||x("updateChatContext","appContext"),v.updateChatContext(t,{properties:s(s({},(0,r.getFieldInputValues)(e)),i),event:c,semanticObject:h},o,d.sdkMetadata?s({version:r.SDK_VERSION},d.sdkMetadata):{version:r.SDK_VERSION})},this.connect=function(t){var e,s=void 0===t?{}:t,o=s.URI,r=s.channelId,n=s.userId;return o||r||n?(!function(t,e,s){"string"==typeof t&&t.length&&(d.URI=t),"string"==typeof e&&e.length&&(d.channelId=e),"string"==typeof s&&s.length&&(d.userId=s,i.configureStorage())}(o,r,n),e=v.connect(d)):e=v.connect(),e.then((function(){b.debug("Connection ready")}),(function(){b.debug("Connection timeout"),i.showConnectionError()})).finally((function(){M()})),e},this.disconnect=function(){return d.enableSpeech&&p.stopVoiceRecording(),d.enableBotAudioResponse&&p.cancelTTS(),v.disconnect()},this.isConnected=function(){return v.isConnected()},this.openChat=function(){i.isOpen||(i.showChat(),m&&(p.connect(),m=!1)),g.trigger(r.ChatEvent.WIDGET_OPENED)},this.closeChat=function(){i.isOpen&&i.onClose(),g.trigger(r.ChatEvent.WIDGET_CLOSED)},this.endChat=function(){p.isConnected()&&i.sendExitEvent()},this.showWidget=function(){null==i||i.showWidget()},this.hideWidget=function(){null==i||i.hideWidget()};var S=function(){i.isOpen&&p.closeChat(),p.disconnect(),p.clearConversationHistory(),m=!0,g.trigger(r.ChatEvent.CHAT_END)};this.isChatOpened=function(){return i.isOpen},this.destroy=function(){if(p.disconnect(),p.closeChat(),i.remove(),document){var t=i.styleSheet;t&&t.remove()}for(var e in g.trigger(r.ChatEvent.DESTROY),p.off(),p)p[e]&&delete p[e]},this.on=function(t,e){switch(t){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:v.on(t,e);break;default:g.bind(t,e)}},this.off=function(t,e){switch(t){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:v.off(t,e);break;default:g.unbind(t,e)}},this.sendAttachment=function(t){return t?i.uploadFile(t):(x("sendAttachment","file"),Promise.reject(new Error("Invalid Parameter")))},this.sendMessage=function(t,e){return t?i.sendMessage(t,e):(x("sendMessage","message"),Promise.reject(new Error("Invalid Parameter")))},this.sendUserTypingStatus=function(t,e){return t?v.sendUserTypingStatus(t,e):(x("sendUserTypingStatus","status"),Promise.reject(new Error("Invalid Parameter")))},this.updateUser=function(t){return t?v.updateUser(t,{sdkMetadata:{version:r.SDK_VERSION}}).then((function(){return y(t)})):(x("updateUser","userDetails"),Promise.reject(new Error("Invalid Parameter")))},this.setUserAvatar=function(t){t?i.setUserAvatar(t):x("setUserAvatar","userAvatar")},this.setAgentDetails=function(t){t?i.setAgentDetails(t):x("setAgentDetails","agentDetails")},this.getAgentDetails=function(){return i.getAgentDetails()},this.setSkillVoices=function(t){if(!v.getTTSService())return l();var e=[];return t&&!Array.isArray(t)&&"string"==typeof(null==t?void 0:t.lang)?e=[t]:Array.isArray(t)&&(e=t),p.setTTSVoice(e)},this.setTTSService=function(t){var e=v.getTTSService();e&&e.cancel(),"string"==typeof t?v.setTTSService(t):v.setTTSService(function(t){return t&&(0,n.isFunction)(t.speak)&&(0,n.isFunction)(t.cancel)&&(0,n.isFunction)(t.getVoice)&&(0,n.isFunction)(t.getVoices)&&(0,n.isFunction)(t.setVoice)}(t)?t:null);var s=v.getTTSService();d.ttsService=s,i&&i.refreshTTS(),s&&(d.enableBotAudioResponse=!0,(0,r.isAnyVoiceAvailable)(s,d.ttsVoice).then((function(t){t||(d.ttsVoice=[]);var e=(0,r.syncTTSLocaleIfUnavailable)({hasRecognition:d.enableSpeech,hasSynthesis:d.enableBotAudioResponse,recognitionLocale:d.speechLocale,synthesisLocales:d.ttsVoice});e&&s.setVoice(e).catch((function(t){b.error(t)})),d.ttsVoice=e})))},this.getTTSVoices=function(){return v.getTTSVoices()},this.setTTSVoice=function(t){var e=v.getTTSService();return e?(0,r.isAnyVoiceAvailable)(e,d.ttsVoice).then((function(e){return d.ttsVoice=(0,r.syncTTSLocaleIfUnavailable)({hasRecognition:d.enableSpeech,hasSynthesis:d.enableBotAudioResponse,isReset:e,recognitionLocale:d.speechLocale,synthesisLocales:t}),v.setTTSVoice(t).catch((function(){return l()}))})):l()},this.getTTSVoice=function(){try{return v.getTTSVoice()}catch(t){throw Error(h)}},this.speakTTS=function(t){v.speakTTS(t,d.i18n[d.locale])},this.cancelTTS=function(){v.cancelTTS()},this.setPrimaryChatLanguage=function(t){if(null!==t&&"string"!=typeof t)throw Error("Please pass a language string or null as argument");p.isConnected()?i.setPrimaryChatLanguage(t):b.error("Not connected. Can not call setPrimaryChatLanguage.")},this.setDelegate=function(t){d.delegate=t},this.getConversationHistory=function(){var t=i.getMessages();return{messages:t,messagesCount:t.length,unreadCount:p.getUnreadMessagesCount(),userId:d.userId}},this.clearConversationHistory=function(t,e){void 0===e&&(e=!0),t&&"string"!=typeof t?b.error("Argument passed in clearConversationHistory() is not of type string. Returning without execution."):(t&&0!==t.length||(t=d.userId),e&&t===d.userId?i.clearConversationHistory():i.clearMessages(t,r.StorageType.LOCAL))},this.clearAllConversationsHistory=function(t){void 0===t&&(t=!0),i.clearAllMessage(),t&&i.clearConversationHistory()},this.getSuggestions=function(t){return d.enableAutocomplete?t?"string"!=typeof t&&"number"!=typeof t?Promise.reject("Invalid query parameter type passed for the getSuggestions call."):i.getSuggestions(t):Promise.reject("No query parameter passed for the getSuggestions call."):Promise.reject("Autocomplete suggestions not enabled.")},this.startVoiceRecording=function(t,e,i){return d.enableSpeech?t?e?v.startRecognition({onRecognitionText:function(e){t(e.message)},onAnalyserReady:null==i?void 0:i.onAnalyserReady,onVisualData:null==i?void 0:i.onAnalyserFrequencies,onSpeechNetworkChange:e}):Promise.reject(new Error("Second callback parameter, onSpeechNetworkChange not provided. Can not start recording")):Promise.reject(new Error("First callback parameter, onSpeechRecognition not provided. Can not start recording.")):Promise.reject(new Error("Speech-to-text feature is not enabled. Initialize the widget with enableSpeech: true to use the service."))},this.stopVoiceRecording=function(){if(!d.enableSpeech)throw new Error("Speech-to-text feature is not enabled. Speech recognition service is not running.");return v.stopRecognition()},this.setSpeechLocale=function(t){if(!d.enableSpeech)return!1;t=t.toLowerCase();var e=w.indexOf(t)>=0;if(d.speechLocale=t,v.setRecognitionLocale(t),i.setVoiceRecognitionService(e),e&&d.enableBotAudioResponse){var s=(0,r.syncTTSLocaleIfUnavailable)({hasRecognition:d.enableSpeech,hasSynthesis:d.enableBotAudioResponse,recognitionLocale:d.speechLocale,synthesisLocales:d.ttsVoice});s!==d.ttsVoice&&(d.ttsVoice=s,s.length&&v.setTTSVoice(s))}return e},this.getUnreadMessagesCount=function(){if(d.enableHeadless)return 0;var t=i.getUnreadMsgsCount();return t!==u&&(u=t,g.trigger(r.ChatEvent.UNREAD,t)),t},this.setAllMessagesAsRead=function(){d.enableHeadless||(p.getUnreadMessagesCount(),i.updateNotificationBadge(0))},this.showTypingIndicator=function(){if(!d.showTypingIndicator)throw new Error("Typing indicator is configured not to be shown.");if(d.enableHeadless)throw new Error("Typing indicator cannot be shown in headless mode.");p.isConnected()&&i.showTypingIndicator()},this.setWebViewConfig=function(t){if(d.enableHeadless)throw new Error("WebView cannot be configured in headless mode.");i.refreshWebView(t)},this.setUserInputMessage=function(t){if(d.enableHeadless)throw new Error("User input cannot be set in headless mode.");i.setUserInputMessage(t)},this.setUserInputPlaceholder=function(t){if(d.enableHeadless)throw new Error("Placeholder cannot be set in headless mode.");t?i.setUserInputPlaceholder(t):x("setUserInputPlaceholder","placeholder text")},this.setHeight=function(t){t?null==i||i.setHeight(t):x("setHeight","height")},this.setWidth=function(t){t?null==i||i.setWidth(t):x("setWidth","width")},this.setSize=function(t,e){t||e?null==i||i.setSize(t,e):x("setSize","width","height")},this.setMessagePadding=function(t){t?null==i||i.setMessagePadding(t):x("setMessagePadding","padding")},this.setChatBubbleIconHeight=function(t){t?null==i||i.setChatBubbleIconHeight(t):x("setChatBubbleIconHeight","height")},this.setChatBubbleIconWidth=function(t){t?null==i||i.setChatBubbleIconWidth(t):x("setChatBubbleIconWidth","width")},this.setChatBubbleIconSize=function(t,e){t||!e?null==i||i.setChatBubbleIconSize(t,e):x("setChatBubbleIconSize","width","height")},this.setFont=function(t){t?(f.updateCSSVar("font",t),d.font=t):x("setFont","font")},this.setFontFamily=function(t){t?(f.updateCSSVar("font-family",t),d.fontFamily=t):x("setFontFamily","fontFamily")},this.setFontSize=function(t){t?f.updateCSSVar("font-size",t):x("setFontSize","fontSize")},this.setTextColor=function(t){t?(f.updateCSSVar("--color-bot-text",t),f.updateCSSVar("--color-user-text",t)):x("setTextColor","color")},this.setTextColorLight=function(t){t?(f.updateCSSVar("--color-text-light",t),d.colors.textLight=t):x("setTextColorLight","color")},b.debug("onLoad","load chat widget"),z(),(0,n.setReadOnly)(this);var C=window;C&&"function"==typeof C.define&&C.define.amd&&(C.WebSDK=c)}e.default=c;var h="Text-to-speech is not available.";function l(){return t=h,Promise.reject(Error(t));var t}c.EVENT=r.ChatEvent,c.SPEECH_LOCALE=o.RecognitionLocale,c.THEME=r.WidgetTheme,c.Version=r.SDK_VERSION,(0,n.deepFreeze)(c)}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Qh",{value:!0})};var s=i(682);return s=s.default}()}));